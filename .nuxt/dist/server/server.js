module.exports=function(t){var e={},n={1:0};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.e=function(e){if(0!==n[e]){var r=require("./"+({2:"pages/about/hello",3:"pages/about/invite/_id",4:"pages/about/license",5:"pages/about/reward",6:"pages/about/thanks",7:"pages/app/download",8:"pages/app/notice/_id",9:"pages/bangumi/_id",10:"pages/bangumi/_id/cartoon",11:"pages/bangumi/_id/index",12:"pages/bangumi/_id/pins",13:"pages/bangumi/_id/post",14:"pages/bangumi/_id/qaq",15:"pages/bangumi/_id/review",16:"pages/bangumi/_id/role",17:"pages/bangumi/_id/setting",18:"pages/bangumi/_id/video",19:"pages/bangumi/index",20:"pages/bangumi/index/news",21:"pages/bangumi/index/tags",22:"pages/callback/auth-error",23:"pages/callback/auth-redirect",24:"pages/callback/auth-success",25:"pages/dev/sitemap",26:"pages/error/404",27:"pages/index",28:"pages/my",29:"pages/my/notice",30:"pages/my/notification",31:"pages/pin/_id",32:"pages/post/_id",33:"pages/post/create",34:"pages/qaq/_id",35:"pages/review/_id",36:"pages/review/create",37:"pages/role/_id",38:"pages/role/trending",39:"pages/role/trending/hall",40:"pages/role/trending/index",41:"pages/role/trending/intro",42:"pages/role/trending/listed",43:"pages/role/trending/mine",44:"pages/role/trending/newbie",45:"pages/role/trending/product",46:"pages/role/trending/register",47:"pages/search/index",48:"pages/soga/_id",49:"pages/user/_zone",50:"pages/user/_zone/bangumi",51:"pages/user/_zone/draft",52:"pages/user/_zone/index",53:"pages/user/_zone/mark",54:"pages/user/_zone/pins",55:"pages/user/_zone/post",56:"pages/user/_zone/qaq",57:"pages/user/_zone/review",58:"pages/user/_zone/role",59:"pages/user/_zone/setting",60:"pages/video/_id",61:"pages/world",62:"pages/world/index",63:"pages/world/pins",64:"pages/world/post",65:"pages/world/qaq",66:"pages/world/review"}[e]||e)+".chunk."+{0:"035e5647",2:"54fccc10",3:"219a076a",4:"0566bb93",5:"03223687",6:"13e3d67b",7:"f5bbe299",8:"2d2dc546",9:"b85005fc",10:"6288fd10",11:"f5efb8d9",12:"840b572a",13:"bf22d864",14:"3f0d69eb",15:"4fecb462",16:"d872b5bb",17:"925d932b",18:"19040b5e",19:"78996538",20:"fb76a1e8",21:"2227e305",22:"8ed0c96e",23:"47e77134",24:"f9fc75e6",25:"c397d78b",26:"65cfe6bf",27:"d4dc8699",28:"bc0f9a06",29:"1ec38c90",30:"88589a15",31:"ae6a738e",32:"a2c2be8a",33:"050e3371",34:"9f506cfa",35:"3312f5e5",36:"ef647f7b",37:"f77552e3",38:"70c082f4",39:"f48113a5",40:"485d3f90",41:"7784b0c1",42:"96ff4e09",43:"72d6c0aa",44:"26848856",45:"a426147a",46:"f116c4e3",47:"d13586d7",48:"9771d842",49:"13666700",50:"f8190077",51:"3840be69",52:"24457c91",53:"2fb118ca",54:"32d5dc66",55:"52eca83c",56:"0d4632cd",57:"446f9fe2",58:"bb7a4b1e",59:"af2e2b11",60:"5d0fe615",61:"5001e75b",62:"6a180848",63:"e8202767",64:"d84dd4d3",65:"8a412b14",66:"90b08070",67:"253be6ad"}[e]+".js"),o=r.modules,l=r.ids;for(var c in o)t[c]=o[c];for(var i=0;i<l.length;i++)n[l[i]]=0}return Promise.all([])},r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(object,t){return Object.prototype.hasOwnProperty.call(object,t)},r.p="https://static.calibur.tv/www/",r.oe=function(t){process.nextTick(function(){throw t})},r(r.s=113)}([function(t,e,n){"use strict";function r(t,e,n,r,o,l,c,d){var h,m="function"==typeof t?t.options:t;if(e&&(m.render=e,m.staticRenderFns=n,m._compiled=!0),r&&(m.functional=!0),l&&(m._scopeId="data-v-"+l),c?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(c)},m._ssrRegister=h):o&&(h=d?function(){o.call(this,this.$root.$options.shadowRoot)}:o),h)if(m.functional){m._injectStyles=h;var f=m.render;m.render=function(t,e){return h.call(e),f(t,e)}}else{var _=m.beforeCreate;m.beforeCreate=_?[].concat(_,h):[h]}return{exports:t,options:m}}n.d(e,"a",function(){return r})},function(t,e){t.exports=require("vue")},function(t,e){},function(t,e,n){"use strict";n.d(e,"g",function(){return r}),n.d(e,"d",function(){return o}),n.d(e,"v",function(){return l}),n.d(e,"u",function(){return c}),n.d(e,"k",function(){return d}),n.d(e,"a",function(){return h}),n.d(e,"t",function(){return m}),n.d(e,"q",function(){return f}),n.d(e,"l",function(){return _}),n.d(e,"m",function(){return v}),n.d(e,"c",function(){return y}),n.d(e,"b",function(){return $}),n.d(e,"j",function(){return x}),n.d(e,"i",function(){return w}),n.d(e,"r",function(){return k}),n.d(e,"s",function(){return C}),n.d(e,"n",function(){return S}),n.d(e,"o",function(){return E}),n.d(e,"p",function(){return I}),n.d(e,"f",function(){return N}),n.d(e,"e",function(){return T}),n.d(e,"h",function(){return O});const r=t=>t.$axios.$get("user/recommended"),o=t=>t.$axios.$post("door/refresh"),l=(t,e)=>t.$axios.$post("user/setting/profile",e),c=(t,{type:e,url:n})=>t.$axios.$post("user/setting/image",{type:e,url:n}),d=(t,{zone:e})=>t.$axios.$get(`user/${e}/show`),h=(t,{id:e,phone:n,password:r,authCode:o})=>t.$axios.$post("door/bind_phone",{id:e,phone:n,password:r,authCode:o}),m=(t,{phone_number:e,type:n,geetest:r})=>t.$axios.$post("door/message",{phone_number:e,type:n,geetest:r}),f=(t,{access:e,secret:n,nickname:r,authCode:o,inviteCode:l})=>t.$axios.$post("door/register",{access:e,secret:n,nickname:r,authCode:o,inviteCode:l}),_=(t,{access:e,secret:n,remember:r,geetest:o})=>t.$axios.$post("door/login",{access:e,secret:n,remember:r,geetest:o}),v=t=>t.$axios.$post("door/logout"),y=(t,{type:e,desc:desc,ua:n})=>t.$axios.$post("user/feedback",{type:e,desc:desc,ua:n}),$=t=>t.$axios.$post("user/daySign"),x=(t,{id:e})=>t.$axios.$get("user/card",{params:{id:e}}),w=(t,{user_id:e,badge_id:n})=>t.$axios.$get("user/badge/item",{params:{user_id:e,badge_id:n}}),k=(t,{id:e,type:n,model:r,message:o})=>t.$axios.$post("report/send",{id:e,type:n,model:r,message:o}),C=(t,{method:e,access:n,authCode:r,secret:o})=>t.$axios.$post("door/reset",{method:e,access:n,authCode:r,secret:o}),S=t=>t.$axios.$post("user/notification/clear"),E=(t,{id:e})=>t.$axios.$post("user/notification/read",{id:e}),I=(t,{id:e})=>t.$axios.$post("user/notice/mark",{id:e}),N=(t,{minId:e})=>t.$axios.$get("user/notification/list",{params:{minId:e}}),T=t=>t.$axios.$get("user/notification/count"),O=t=>t.$axios.$get("user/notice/list")},function(t,e,n){"use strict";e.a=new class{constructor(){this.id=0,this.listeners={}}checkInView(t,e=1.3){if("undefined"==typeof window||!(t instanceof Element))return!1;const rect=t.getBoundingClientRect();return rect.top<window.innerHeight*e&&rect.bottom>0&&rect.left<window.innerWidth*e&&rect.right>0}on(element,t,e,n=!1){const r=[];return("string"==typeof t?[t]:t).forEach(t=>{const o=this.id++;element.addEventListener(t,e,n),this.listeners[o]={element:element,event:t,handler:e,capture:n},r.push(o)}),r}off(t){t.forEach(t=>{if(this.listeners[t]){const e=this.listeners[t];e.element.removeEventListener(e.event,e.handler,e.capture),delete this.listeners[t]}})}}},function(t,e,n){"use strict";n.d(e,"g",function(){return r}),n.d(e,"l",function(){return o}),n.d(e,"f",function(){return l}),n.d(e,"a",function(){return c}),n.d(e,"d",function(){return d}),n.d(e,"k",function(){return h}),n.d(e,"j",function(){return m}),n.d(e,"b",function(){return f}),n.d(e,"e",function(){return _}),n.d(e,"h",function(){return v}),n.d(e,"i",function(){return y}),n.d(e,"c",function(){return $});const r=t=>t.$axios.$get("image/uptoken"),o=(t,e)=>t.$axios.$post("https://up.qbox.me",e,{"Content-Type":"multipart/form-data"}),l=(t,{id:e,hash:n,query:r})=>t.$axios.$get(`image/${e}/show`,{params:{hash:n,query:r}}),c=(t,{bangumi_id:e,name:n,url:r,width:o,height:l,size:c,type:d,is_creator:h,is_cartoon:m,part:f})=>t.$axios.$post("image/album/create",{bangumi_id:e,name:n,url:r,width:o,height:l,size:c,type:d,is_creator:h,is_cartoon:m,part:f}),d=(t,{id:e,name:n,url:r,width:o,height:l,size:c,type:d,part:h})=>t.$axios.$post("image/album/edit",{id:e,name:n,url:r,width:o,height:l,size:c,type:d,part:h}),h=(t,{bangumi_id:e,name:n,url:r,width:o,height:l,size:c,type:d,is_creator:h,geetest:m})=>t.$axios.$post("image/single/upload",{bangumi_id:e,name:n,url:r,width:o,height:l,size:c,type:d,is_creator:h,geetest:m}),m=(t,{album_id:e,images:n})=>t.$axios.$post("image/album/upload",{album_id:e,images:n}),f=(t,{id:e})=>t.$axios.$post("image/album/delete",{id:e}),_=(t,{id:e,name:n,bangumi_id:r})=>t.$axios.$post("image/single/edit",{id:e,name:n,bangumi_id:r}),v=t=>t.$axios.$get("image/album/users"),y=(t,{id:e,result:n})=>t.$axios.$post(`image/album/${e}/sort`,{result:n}),$=(t,{id:e,result:n,imageId:r})=>t.$axios.$post(`image/album/${e}/deleteImage`,{result:n,imageId:r})},function(t,e,n){"use strict";e.a={data:()=>({uploadHeaders:{key:"",token:""},uploadConfig:{max:5},imageUploadAccept:["image/jpeg","image/png","image/jpg","image/gif"].toString(),imageUploadAction:"https://upload.qiniup.com",imagePrefix:"https://image.calibur.tv/",getUpTokenTimer:0}),computed:{currentUser(){return this.$store.state.user}},watch:{currentUser:{handler:function(t){t&&t.uptoken&&(this.uploadHeaders.token=t.uptoken.upToken)},deep:!0,immediate:!0}},mounted(){this.getUpTokenTimer=setInterval(()=>{this.getUpToken()},18e5)},beforeDestroy(){this.getUpTokenTimer&&clearInterval(this.getUpTokenTimer)},methods:{async getUpToken(){try{await this.$store.dispatch("getUpToken")}catch(t){}},handleImageUploadError(t,e){this.$store.state.login?this.$toast.error(`图片：${e.name} 上传失败`):this.$toast.error("继续操作前请先登录")},beforeImageUpload(t){const e=~this.imageUploadAccept.split(",").indexOf(t.type),n=t.size/1024/1024<this.uploadConfig.max;if(!e)return this.$toast.error(`仅支持上传${this.imageUploadAccept.replace(/image\//g,"").replace(/,/g,"、")}格式的图片`),!1;if(!n)return this.$toast.error(`图片大小不能超过 ${this.uploadConfig.max}MB!`),!1;return this.uploadHeaders.key=(({userId:t,page:e,file:n})=>`user/${t}${e}/${(new Date).getTime()}-${Math.random().toString(36).substring(3,6)}.${n.type.split("/").pop()}`)({userId:this.currentUser.id,page:this.$route.path,file:t}),!0}}}},function(t,e){},function(t,e){t.exports={"share-tips-modal":"share-tips-modal-1W",shareTipsModal:"share-tips-modal-1W",tips:"tips-3z",p:"p-2C",footer:"footer-1M","fen-think-btn":"fen-think-btn-3W",fenThinkBtn:"fen-think-btn-3W"}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports={header:"header-Ni","nav-link":"nav-link-2S",navLink:"nav-link-2S",nav:"nav-1X",text:"text-1u",right:"right-2F","sign-btn":"sign-btn-2D",signBtn:"sign-btn-2D","sign-in":"sign-in-OH",signIn:"sign-in-OH","sign-up":"sign-up-1r",signUp:"sign-up-1r","user-section":"user-section-CF",userSection:"user-section-CF",avatar:"avatar-nE","faker-user-section":"faker-user-section-2N",fakerUserSection:"faker-user-section-2N",logo:"logo-3U",first:"first-2F","banner-bg-container":"banner-bg-container-1D",bannerBgContainer:"banner-bg-container-1D","banner-bg-img":"banner-bg-img-WX",bannerBgImg:"banner-bg-img-WX","mask-bg":"mask-bg-1G",maskBg:"mask-bg-1G","nav-mask":"nav-mask-3m",navMask:"nav-mask-3m","nav-banner":"nav-banner-3Z",navBanner:"nav-banner-3Z","nav-pure":"nav-pure-ch",navPure:"nav-pure-ch","nav-fixed":"nav-fixed-OT",navFixed:"nav-fixed-OT","nav-abs":"nav-abs-2v",navAbs:"nav-abs-2v","nav-shim":"nav-shim-6U",navShim:"nav-shim-6U","normal-banner":"normal-banner-1Y",normalBanner:"normal-banner-1Y",calibur:"calibur-16","mask-banner":"mask-banner-3M",maskBanner:"mask-banner-3M","mask-banner-img":"mask-banner-img-2l",maskBannerImg:"mask-banner-img-2l"}},function(t,e){},function(t,e){t.exports={container:"container-38",header:"header-1m",title:"title-20",close:"close-uL",content:"content-37",loading:"loading-32","no-more":"no-more-2g",noMore:"no-more-2g",footer:"footer-2b",cancel:"cancel-3B",submit:"submit-1M"}},function(t,e){t.exports={container:"container-2t","main-left":"main-left-17",mainLeft:"main-left-17","main-right":"main-right-22",mainRight:"main-right-22","aside-left":"aside-left--M",asideLeft:"aside-left--M","aside-right":"aside-right-2z",asideRight:"aside-right-2z"}},function(t,e){t.exports={inline:"inline-2j",avatar:"avatar-GU","image-wrap":"image-wrap-1b",imageWrap:"image-wrap-1b",block:"block-1p",retry:"retry-1N","padding-shim":"padding-shim-3L",paddingShim:"padding-shim-3L",message:"message-5_","load-gif":"load-gif-fE",loadGif:"load-gif-fE",rolling:"rolling-2a",poster:"poster-2J","css-blur":"css-blur-2G",cssBlur:"css-blur-2G","css-fade":"css-fade-1m",cssFade:"css-fade-1m"}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){t.exports={"bangumi-panel":"bangumi-panel-10",bangumiPanel:"bangumi-panel-10",avatar:"avatar-2C",name:"name-23",summary:"summary-1B"}},function(t,e){t.exports={"flow-state":"flow-state-2z",flowState:"flow-state-2z",error:"error-2k","fetch-btn":"fetch-btn-rN",fetchBtn:"fetch-btn-rN",loading:"loading-2U","no-more":"no-more-2i",noMore:"no-more-2i",nothing:"nothing-2v",rolling:"rolling-3m"}},function(t,e){},function(t,e,n){"use strict";var r={name:"VFooter",data:()=>({toggleShareModal:!1}),computed:{show(){return-1===["index","about-invite-id"].indexOf(this.$route.name)},friends(){return this.$store.state.pageData?this.$store.state.pageData.friend_links:[]}},methods:{openShareModal(){this.toggleShareModal=!0},handleCopySuccess(){this.$toast.success("复制成功"),this.toggleShareModal=!1}}},o=n(0);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{id:"footer"}},[t._ssrNode('<div class="container">',"</div>",[t._ssrNode('<ul class="cards">',"</ul>",[t._ssrNode('<li class="card-item">',"</li>",[t._ssrNode('<p>calibur - 天下漫友是一家</p> <a href="/about/hello" target="_blank">欢迎</a> <a href="/app/notice/1" target="_blank">团子简介</a> <a href="javascript:;">分享网站</a> <a href="/about/thanks" target="_blank">品牌与站娘</a> '),n("v-dialog",{attrs:{"custom-class":t.$style.shareTipsModal,title:"感谢分享"},model:{value:t.toggleShareModal,callback:function(e){t.toggleShareModal=e},expression:"toggleShareModal"}},[n("div",{class:t.$style.tips},[n("p",{class:t.$style.p},[t._v('\n              【calibur.tv】一个纯粹的二次元社区网站，致力于实现"天下漫友是一家"！\n            ')]),t._v(" "),n("p",{class:t.$style.p},[t._v("\n              站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送团子！\n            ")]),t._v(" "),n("p",{class:t.$style.p},[t._v("\n              快来加入我们吧~\\(^o^)/~ 网址：http://calibur.tv\n            ")])]),t._v(" "),n("div",{class:t.$style.footer,attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:"【calibur.tv】一个纯粹的二次元社区网站，致力于实现'天下漫友是一家'！站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送团子（1团子 = 1人民币）！快来加入我们吧~(^o^)/~ 网址：http://calibur.tv",expression:"\n                `【calibur.tv】一个纯粹的二次元社区网站，致力于实现'天下漫友是一家'！站内海量动漫资源在线播放，更有看漫画、cosplay、发帖、为偶像应援等功能，每天签到送团子（1团子 = 1人民币）！快来加入我们吧~\\(^o^)/~ 网址：http://calibur.tv`\n              "}],class:t.$style.fenThinkBtn,attrs:{type:"primary",size:"small"},on:{success:t.handleCopySuccess}},[t._v("点击复制")])],1)]),t._ssrNode(' <div><a href="javascript:;"><img'+t._ssrAttr("src",t.$resize("https://image.calibur.tv/owner/beianbgs.png",{width:40}))+' class="icon">\n            沪ICP备17050785号-1\n          </a></div> <div><a href="http://www.shjbzx.cn/" target="_blank"><img'+t._ssrAttr("src",t.$resize("https://image.calibur.tv/owner/int-info.png",{width:40}))+' class="icon">\n            上海互联网举报中心\n          </a></div>')],2),t._ssrNode(' <li class="card-item"><p>友情链接</p> '+t._ssrList(t.friends,function(e,n){return"<a"+t._ssrAttr("href",e.link)+' target="_blank">'+t._ssrEscape(t._s(e.name))+"</a>"})+"</li> "),t._ssrNode('<li class="card-item">',"</li>",[t._ssrNode('<a href="https://www.calibur.tv/user/yu-yuan-lin-yin-7/bangumi" target="_blank" style="margin:0">',"</a>",[n("v-img",{attrs:{src:"https://image.calibur.tv/owner/logo/animate.gif",width:"250",height:"100"}})],1)])],2)])])},[],!1,function(t){var e=n(116);e.__inject__&&e.__inject__(t);var r=n(117);r.__inject__&&r.__inject__(t),this.$style=r.locals||r},null,"cc372442");e.a=component.exports},function(t,e,n){"use strict";var r=n(3),o={name:"SignUpForm",props:{inviteCode:{type:[String,Number],default:""}},data(){return{watchPwd:!1,form:{access:"",secret:"",nickname:"",authCode:"",inviteCode:this.inviteCode},rule:{nickname:[{validator:(t,e,n)=>{if(""===e)return n(new Error("请先给自己起个名字"));const r=e.replace(/([\u4e00-\u9fa5])/g,"aa").trim().length;return r<2?n(new Error("昵称至少是2个字符")):r>14?n(new Error("昵称不能超过14个字符，1个汉字占2个字符")):/^([\u4e00-\u9fa5]|[a-z0-9])+$/i.test(e)?void n():n(new Error("昵称只能包含：中文、数字、字母"))},trigger:"blur"}],access:[{validator:(t,e,n)=>e?11!==e.length?n(new Error("请填写11位手机号")):/^(0|86|17951)?(1)[0-9]{10}$/.test(e)?void n():n(new Error("错误的手机号格式")):n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(t,e,n)=>""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},step:0,timeout:0}},computed:{submitBtnText(){return 0===this.step?"注册":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"注册中...":"注册"},submitBtnLoading(){return 1===this.step||3===this.step},submitBtnDisabled(){return 0!==this.timeout&&0===this.step||3===this.step},query(){return this.$route.query},paramsIsOK(){return!!(this.query.uid&&/^\d+$/.test(this.query.uid)&&this.query.time&&/^\d+$/.test(this.query.time)&&Date.now()<=1e3*this.query.time&&this.query.key===this.$md5(`${this.query.uid}-the-world-${this.query.time}`))},qqRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/qq?from=sign";return this.paramsIsOK&&(link=`${link}&invite=${this.query.uid}`),link},wechatRegisterLink(){let link="https://api.calibur.tv/callback/oauth2/wechat?from=sign";return this.paramsIsOK&&(link=`${link}&invite=${this.query.uid}`),link}},methods:{submitForm(){this.$refs.form.validate(t=>{if(!t)return!1;0===this.step&&this.getRegisterAuthCode(),2===this.step&&this.openConfirmModal()})},getRegisterAuthCode(){this.step=1,this.$captcha({ctx:this,success:async({data:data})=>{try{await Object(r.t)(this,{type:"sign_up",phone_number:this.form.access,geetest:data}),this.step=2,this.openConfirmModal()}catch(t){this.$toast.error(t),this.step=0}finally{this.timeout=60;const t=setInterval(()=>{--this.timeout||(this.step=0,clearInterval(t))},1e3)}},close:()=>{this.step=0}})},openConfirmModal(){this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(({value:t})=>{this.form.authCode=t,this.step=3,this.signUp()}).catch(()=>{})},signUp(){Object(r.q)(this,{access:this.form.access,secret:this.form.secret,nickname:this.form.nickname,authCode:this.form.authCode,inviteCode:this.form.inviteCode}).then(t=>{this.$toast.success("注册成功！"),this.$cookie.set("JWT-TOKEN",t),window.location="/about/hello"}).catch(t=>{this.step=0,this.$toast.error(t)})},showLogin(){this.$emit("to-login"),this.$refs.form.resetFields()}}},l=n(0);var component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-up-form"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule,"status-icon":""}},[n("el-form-item",{attrs:{prop:"nickname"}},[n("el-input",{attrs:{type:"text",placeholder:"昵称（2-14个字符组成，1个汉字占2个字符）","auto-complete":"off"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname","string"==typeof e?e.trim():e)},expression:"form.nickname"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）","auto-complete":"off"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access","string"==typeof e?e.trim():e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:t.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）","auto-complete":"off"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret","string"==typeof e?e.trim():e)},expression:"form.secret"}}),t._v(" "),t.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(e){t.watchPwd=!t.watchPwd}}},[n("i",{staticClass:"iconfont icon-ai-eye"})]):t._e()],1),t._v(" "),t.inviteCode?t._e():n("el-form-item",[n("el-input",{attrs:{type:"number",placeholder:"邀请码（可为空）","auto-complete":"off"},model:{value:t.form.inviteCode,callback:function(e){t.$set(t.form,"inviteCode","string"==typeof e?e.trim():e)},expression:"form.inviteCode"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.submitBtnLoading,disabled:t.submitBtnDisabled,type:"primary"},on:{click:t.submitForm}},[t._v("\n        "+t._s(t.submitBtnText)+"\n        "),t.timeout?[t._v("\n          （"+t._s(t.timeout)+"s 后可重新获取）\n        ")]:t._e()],2)],1)],1),t._ssrNode(' <div class="others"><div class="provider"><span>社交账号注册</span> <a'+t._ssrAttr("href",t.qqRegisterLink)+'><i class="iconfont icon-qq"></i></a> <a'+t._ssrAttr("href",t.wechatRegisterLink)+'><i class="iconfont icon-v-chat"></i></a></div> '+(t.inviteCode?"\x3c!----\x3e":"<a>已有账号»</a>")+"</div>")],2)},[],!1,function(t){var e=n(132);e.__inject__&&e.__inject__(t)},null,"27eafa92");e.a=component.exports},function(t,e){t.exports=require("lodash/orderBy")},function(t,e,n){"use strict";e.a=(t=>{const e="undefined"!=typeof window;if(e&&window.__JWT_TOKEN__)return window.__JWT_TOKEN__;const n=e?document.cookie:t?t.headers.cookie:"";if(!n)return"";let r="";return n.split("; ").forEach(t=>{const e=t.split("=");"JWT-TOKEN"===e[0]&&(r=e[1])}),e&&(window.__JWT_TOKEN__=r),r})},function(t,e,n){"use strict";var r=n(69),o={props:{id:{type:[Number,String],default:""},func:{required:!0,type:String},type:{required:!0,type:String},sort:{required:!0,type:String},changing:{type:String,default:"id"},auto:{type:Boolean,default:!0},showLoadMore:{type:Boolean,default:!0}}},l={name:"FlowList",components:{FlowState:r.a},mixins:[o],computed:{source(){return this.$store.getters["flow/getFlow"](this.func,this.sort,this.id)}},methods:{loadMore(){this.$store.dispatch("flow/loadMore",{type:this.type,sort:this.sort,func:this.func,id:this.id,changing:this.changing})}}},c=n(0),component=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.source?n("div",[t._t("header",null,{source:t.source}),t._ssrNode(" "),t._t("default",null,{flow:t.source.list}),t._ssrNode(" "),n("flow-state",{attrs:{auto:t.auto,loading:t.source.loading,"no-more":t.source.noMore,nothing:t.source.nothing,error:t.source.error,"show-load-more":t.showLoadMore,fetch:t.loadMore}},[t._t("error",null,{slot:"error"}),t._v(" "),t._t("nothing",null,{slot:"nothing"}),t._v(" "),t._t("no-more",null,{slot:"no-more"}),t._v(" "),t._t("loading",null,{slot:"loading"})],2)],2):t._e()},[],!1,null,null,"77307b42");e.a=component.exports},function(t,e,n){"use strict";n.r(e),n.d(e,"users",function(){return r}),n.d(e,"like",function(){return o}),n.d(e,"reward",function(){return l}),n.d(e,"follow",function(){return c}),n.d(e,"mark",function(){return mark}),n.d(e,"vote",function(){return d});const r=({ctx:t,type:e,id:n,last_id:r,take:o,model:l})=>t.$axios.$get("toggle/users",{params:{id:n,last_id:r,take:o,model:l,type:e}}),o=({ctx:t,type:e,id:n})=>t.$axios.$post("toggle/like",{type:e,id:n}),l=({ctx:t,type:e,id:n})=>t.$axios.$post("toggle/reward",{type:e,id:n}),c=({ctx:t,type:e,id:n})=>t.$axios.$post("toggle/follow",{type:e,id:n}),mark=({ctx:t,type:e,id:n})=>t.$axios.$post("toggle/mark",{type:e,id:n}),d=({ctx:t,type:e,id:n,is_agree:r})=>t.$axios.$post("toggle/vote",{type:e,id:n,is_agree:r})},function(t,e){t.exports=require("vue-router")},function(t,e){t.exports=require("vuex")},function(t,e){t.exports=require("element-ui/lib/transitions/collapse-transition")},function(t,e){t.exports=require("timeago.js")},function(t,e,n){"use strict";n.d(e,"f",function(){return r}),n.d(e,"l",function(){return o}),n.d(e,"k",function(){return l}),n.d(e,"m",function(){return c}),n.d(e,"e",function(){return d}),n.d(e,"i",function(){return h}),n.d(e,"h",function(){return m}),n.d(e,"g",function(){return f}),n.d(e,"d",function(){return _}),n.d(e,"n",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"c",function(){return $}),n.d(e,"j",function(){return x}),n.d(e,"b",function(){return w});const r=(t,{id:e})=>t.$axios.$get(`bangumi/${e}/show`),o=t=>t.$axios.$get("bangumi/recommended"),l=t=>t.$axios.$get("bangumi/hots"),c=t=>t.$axios.$get("bangumi/released"),d=t=>t.$axios.$get("bangumi/tags"),h=(t,{tags:e,page:n,take:r})=>t.$axios.$get("bangumi/category",{params:{id:e,page:n,take:r}}),m=(t,{id:e})=>t.$axios.$get(`bangumi/${e}/videos`),f=(t,{id:e})=>t.$axios.$get("score/bangumis",{params:{id:e}}),_=t=>t.$axios.$get("search/bangumis"),v=(t,{id:e})=>t.$axios.$get(`bangumi/${e}/posts/top`),y=(t,form)=>t.$axios.$post("bangumi/manager/create_season",form),$=(t,form)=>t.$axios.$post("bangumi/manager/edit_season",form),x=(t,{bangumi_id:e})=>t.$axios.$get("bangumi/manager/get_info",{params:{bangumi_id:e}}),w=(t,form)=>t.$axios.$post("bangumi/manager/edit_info",form)},function(t,e,n){"use strict";var r={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}},o=n(0);var l=Object(o.a)(r,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode((this.item.title?"<h3>"+this._ssrEscape(this._s(this.item.title))+"</h3>":"\x3c!----\x3e")+" <p>"+this._s(this.item.text)+"</p>")])},[],!1,function(t){var e=n(138);e.__inject__&&e.__inject__(t)},null,"1fcc230b").exports,c={name:"JsonContentImgParser",props:{item:{type:Object,required:!0}}};var d=Object(o.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"json-content-img-parser"},[n("v-img",{attrs:{src:t.item.url,width:t.item.width,height:t.item.height,mime:t.item.mime,blur:!0,full:!0}}),t._ssrNode(" "+(t.item.text?'<p class="img-tip">'+t._ssrEscape(t._s(t.item.text))+"</p>":"\x3c!----\x3e"))],2)},[],!1,function(t){var e=n(139);e.__inject__&&e.__inject__(t)},null,"0828a6c4").exports,h={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}};var m=Object(o.a)(h,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode("<blockquote>"+this._s(this.item.text)+"</blockquote>")])},[],!1,function(t){var e=n(140);e.__inject__&&e.__inject__(t)},null,"2e707562").exports,f={name:"JsonContentTxtParser",props:{item:{type:Object,required:!0}}};var _=Object(o.a)(f,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"json-content-txt-parser"},[this._ssrNode(this.item.text?"<h3>"+this._ssrEscape(this._s(this.item.text))+"</h3>":"\x3c!----\x3e")])},[],!1,function(t){var e=n(141);e.__inject__&&e.__inject__(t)},null,"46987ff3").exports,v={name:"JsonContentListParser",props:{item:{type:Object,required:!0}},computed:{list(){let t=this.item.text;if(!t)return[];for(;/\n\n/.test(t);)t=t.replace(/\n\n/g,"\n");return t.split("\n")}}};var y={name:"JsonContent",components:{TitleParser:_,TxtParser:l,ImgParser:d,UseParser:m,ListParser:Object(o.a)(v,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"json-content-list-parser"},[t._ssrNode("1"===t.item.sort?"<ol>"+t._ssrList(t.list,function(li,e){return"<li>"+t._ssrEscape(t._s(li))+"</li>"})+"</ol>":"<ul>"+t._ssrList(t.list,function(li,e){return"<li>"+t._ssrEscape(t._s(li))+"</li>"})+"</ul>")])},[],!1,function(t){var e=n(142);e.__inject__&&e.__inject__(t)},null,"124cc5b1").exports},props:{content:{required:!0,type:Array},show:{type:Boolean,default:!0}}},$=Object(o.a)(y,function(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",{staticClass:"json-content"},this._l(this.content,function(t,n){return e(t.type+"-parser",{key:n,tag:"component",attrs:{item:t}})}),1):this._e()},[],!1,null,null,"db8356d6");e.a=$.exports},function(t,e,n){"use strict";n.d(e,"c",function(){return r}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return l});const r=t=>t.$axios.$get("door/data",{params:{refer:"pc"}}),o=t=>t.$axios.$get("image/banner"),l=t=>t.$axios.$get("cm/loop/list")},function(t,e,n){"use strict";var r={name:"VSearchInput",props:{placeholder:{type:String,default:"搜索"},autofocus:{type:Boolean,default:!1},value:{type:String,default:""},type:{type:String,default:"all"},showSuggestion:{type:Boolean,default:!0}},data(){return{word:this.value,selectedType:this.type,state:this.autofocus?"focus":"blur",typing:!1,filteredSelect:[],selectedIndex:-1}},computed:{bangumis(){return this.$store.state.bangumi.all},displaySuggestion(){return"focus"===this.state&&this.showSuggestion&&this.word&&this.word.length&&this.typing&&this.filteredSelect.length}},mounted(){this.$watch("value",t=>{this.word=t,this.typing=!0,this.selectedIndex=-1,this.handleEnter(t)}),this.$watch("word",t=>{this.$emit("input",t)}),this.$watch("$route",t=>{"search"===t.name&&(this.word=t.query.q,this.selectedType=t.query.type,setTimeout(()=>{this.typing=!1},0))})},methods:{submit(){const q=-1!==this.selectedIndex?this.filteredSelect[this.selectedIndex].name:this.word;q&&(this.$channel.$emit("search-action",{text:q,type:this.selectedType}),this.$router.push({name:"search",query:{q:q,type:this.selectedType}}))},clickToSearch(t){this.selectedIndex=t,this.submit()},handleEnter(t){this.filteredSelect=t?this.bangumis.filter(option=>option.alias.indexOf(t)>-1||option.name.indexOf(t)>-1):[]},handleInputFocus(){this.state="focus",this.$emit("focus")},handleInputBlur(){this.state="blur",this.$emit("blur")},handleKeyUp(){this.displaySuggestion&&(this.selectedIndex<1||this.selectedIndex--)},handleKeyDown(){this.displaySuggestion&&this.selectedIndex!==this.filteredSelect-1&&this.selectedIndex++}}},o=n(0);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("form",{staticClass:"search-input-wrap",class:"search-"+t.state,attrs:{action:"#",method:"get"},on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t._ssrNode('<button type="submit" class="search-input-btn">',"</button>",[t._t("submit-btn",[t._v("搜索")])],2),t._ssrNode(' <div class="search-input-text"><input'+t._ssrAttr("placeholder",t.placeholder)+t._ssrAttr("autofocus",t.autofocus)+' type="text" name="q" aria-autocomplete="both" aria-haspopup="false" autocapitalize="off" autocomplete="off" autocorrect="off" role="combobox" spellcheck="false" maxlength="50"'+t._ssrAttr("value",t.word)+' class="search-input"></div> <ul class="search-suggestions"'+t._ssrStyle(null,null,{display:t.displaySuggestion?"":"none"})+">"+t._ssrList(t.filteredSelect,function(e,n){return"<li"+t._ssrClass(null,{active:n===t.selectedIndex})+"><img"+t._ssrAttr("src",t.$resize(e.avatar,{width:60}))+"> <span>"+t._ssrEscape(t._s(e.name))+"</span></li>"})+"</ul>")],2)},[],!1,function(t){var e=n(177);e.__inject__&&e.__inject__(t)},null,"d741223e");e.a=component.exports},function(t,e,n){"use strict";n.d(e,"b",function(){return r}),n.d(e,"a",function(){return o});const r=(t,{id:e})=>t.$axios.$get(`question/qaq/${e}/show`),o=(t,{title:title,tags:e,content:content,images:n,intro:r,geetest:o})=>t.$axios.$post("question/qaq/create",{title:title,tags:e,content:content,images:n,intro:r,geetest:o})},function(t,e){t.exports=require("element-ui/lib/badge")},function(t,e){t.exports=require("mint-ui/lib/spinner")},function(t,e){},function(t,e,n){"use strict";var r=n(4),o={name:"FlowState",props:{auto:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},nothing:{type:Boolean,default:!1},error:{type:Boolean,default:!1},fetch:{type:Function,required:!0},displayNoMore:{type:Boolean,default:!1},showLoadMore:{type:Boolean,default:!0}},mounted(){this.auto&&this.onScroll()},methods:{onScroll(){if(this.error)return;r.a.checkInView(this.$el)&&this.fetch();const t=r.a.on(document,["scroll","resize"],this.$utils.throttle(()=>{this.auto?r.a.checkInView(this.$el)&&this.fetch():r.a.off(t)},200))}}},l=n(0);var component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.flowState},[t.error?t._ssrNode("<div>","</div>",[t._t("error",[n("div",{class:t.$style.error},[n("span",[t._v("出错了，点击重试")])])])],2):t.nothing?t._ssrNode("<div>","</div>",[t._t("nothing",[n("div",{class:t.$style.nothing},[n("span",[t._v("这里什么都没有")])])])],2):t.noMore?t._ssrNode("<div>","</div>",[t._t("no-more",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.displayNoMore,expression:"displayNoMore"}],class:t.$style.noMore},[n("span",[t._v("没有更多了")])])])],2):t.loading?t._ssrNode("<div>","</div>",[t._t("loading",[n("div",{class:t.$style.loading},[n("i"),t._v(" "),n("span",[t._v("加载中…")])])])],2):!t.auto&&t.showLoadMore?t._ssrNode("<div><button"+t._ssrClass(null,t.$style.fetchBtn)+">\n      点击加载更多\n    </button></div>"):t._e()])},[],!1,function(t){var e=n(196);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"d05aa4c0");e.a=component.exports},function(t,e,n){"use strict";var r=n(3),o={name:"UserBadge",props:{item:{required:!0,type:Object},userId:{type:Number,required:!0}},data:()=>({showDetail:!1,info:null}),methods:{async getBadgeData(){if(this.info)this.showDetail=!0;else try{this.info=await Object(r.i)(this,{user_id:this.userId,badge_id:this.item.id}),this.showDetail=!0}finally{}},computeLevel(t){switch(+t){case 0:return"D";case 1:return"C";case 2:return"B";case 3:return"A";case 4:return"S";default:return"未知"}}}},l=n(0);var component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-badge",on:{click:t.getBadgeData}},[t._ssrNode("<img"+t._ssrAttr("src",t.$resize(t.item.icon,{width:40}))+' class="icon"> <span class="text">'+t._ssrEscape(t._s(t.item.name))+"</span> "),n("v-dialog",{attrs:{header:!1,footer:!1,width:"400px"},model:{value:t.showDetail,callback:function(e){t.showDetail=e},expression:"showDetail"}},[t.info?n("div",{staticClass:"user-badge-detail"},[n("img",{attrs:{src:t.$resize(t.info.icon,{width:140})}}),t._v(" "),n("div",[n("strong",[t._v("名称")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.info.name)}})]),t._v(" "),n("div",[n("strong",[t._v("稀有度")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.computeLevel(t.info.level))}})]),t._v(" "),n("div",[n("strong",[t._v("持有人数")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.info.user_count)}})]),t._v(" "),t.info.user_count>1?n("div",[n("strong",[t._v("该用户持有数")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.info.user_get_count)}})]):t._e(),t._v(" "),n("div",[n("strong",[t._v("徽章描述")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.info.intro)}})]),t._v(" "),t.info.user_spec_intro?n("div",[n("strong",[t._v("小纸条")]),t._v(" "),n("p",{domProps:{textContent:t._s(t.info.user_spec_intro)}})]):t._e()]):t._e()])],2)},[],!1,function(t){var e=n(191);e.__inject__&&e.__inject__(t)},null,"5374f592");e.a=component.exports},function(t,e,n){"use strict";var r={name:"UserSex",props:{sex:{type:String,required:!0},secret:{type:Boolean,default:!1}}},o=n(0),component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{staticClass:"user-sex"},[t._ssrNode(t.secret?'<i class="iconfont icon-simi" style="color: limegreen"></i>':"未知"===t.sex?'<i class="iconfont icon-wenhao" style="color: gold"></i>':"男"===t.sex?'<i class="iconfont icon-nan" style="color: deepskyblue"></i>':"女"===t.sex?'<i class="iconfont icon-nv" style="color: hotpink"></i>':"伪娘"===t.sex?'<i class="iconfont icon-tijianxingbiefenxi" style="color: mediumpurple"></i>':"药娘"===t.sex?'<i class="iconfont icon-xingbie" style="color: #ff4d51;"></i>':"扶她"===t.sex?'<i class="iconfont icon-intersex" style="color: silver"></i>':"\x3c!----\x3e")])},[],!1,null,null,"657772d6");e.a=component.exports},function(t,e,n){"use strict";var r=n(6),o=n(5),l={name:"CreateAlbumForm",mixins:[r.a],props:{bangumiId:{type:[Number,String],default:""},isCartoon:{type:Boolean,default:!1}},data(){return{submitting:!1,form:{name:"",bangumi_id:this.bangumiId,is_cartoon:this.isCartoon,is_creator:!1,part:0,poster:null},rule:{name:[{validator:(t,e,n)=>e?e.length>30?n(new Error("名字最长 30 个字")):void n():n(new Error("请先填名字")),trigger:"submit"}],bangumi_id:[{validator:(t,e,n)=>{if(!e)return n(new Error("请选择一个相关的番剧"));n()},trigger:"submit"}],part:[{validator:(t,e,n)=>{if(!e)return n(new Error("漫画的集数是必填的"));n()},trigger:"submit"}],poster:[{validator:(t,e,n)=>{if(!e)return n(new Error("请给相册选择一个封面"));n()},trigger:"submit"}]}}},computed:{currentUserId(){return this.$store.state.user.id}},methods:{submit(){this.$refs.form.validate(t=>{if(!t)return!1;this.submitting||(this.submitting=!0,Object(o.a)(this,Object.assign({},this.form,this.form.poster)).then(t=>{this.$refs.form.resetFields(),this.$refs.upload.clearFiles(),this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp),this.submitting=!1,this.$emit("success",t.data)}).catch(t=>{this.$toast.error(t),this.submitting=!1}))})},beforePosterUpload(t){return this.uploadConfig.max=10,this.uploadConfig.pathPrefix=`user/${this.currentUserId}/album`,this.beforeImageUpload(t)},handleAlbumUploadSuccess(t){this.form.poster=t.data,this.$toast.success("封面上传成功")},handlePosterRemove(){this.form.poster=null}}},c=n(0);var component=Object(c.a)(l,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule,disabled:t.submitting,"label-width":"45px"}},[n("el-form-item",{attrs:{label:"名字",prop:"name"}},[n("el-input",{attrs:{placeholder:t.isCartoon?"填写这一话的名字":"给相册起一个名字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),t.isCartoon?n("el-form-item",{attrs:{label:"集数",prop:"part"}},[n("el-input-number",{attrs:{min:1},model:{value:t.form.part,callback:function(e){t.$set(t.form,"part",e)},expression:"form.part"}})],1):n("el-form-item",{attrs:{label:"番剧",prop:"bangumi_id"}},[n("bangumi-search",{attrs:{placeholder:"请选择要投稿的番剧"},model:{value:t.form.bangumi_id,callback:function(e){t.$set(t.form,"bangumi_id",e)},expression:"form.bangumi_id"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"原创"}},[n("el-row",[n("el-switch",{model:{value:t.form.is_creator,callback:function(e){t.$set(t.form,"is_creator",e)},expression:"form.is_creator"}}),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"只有相册内容全是原创时才应该勾选",placement:"top"}},[n("i",{staticClass:"el-icon-question"})]),t._v(" "),t.form.poster?n("div",{staticClass:"preview-poster",style:{backgroundImage:"url("+t.$resize(t.form.poster.url,{width:400,mode:2})+")"}}):t._e()],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"封面",prop:"poster"}},[n("el-upload",{ref:"upload",attrs:{data:t.uploadHeaders,"on-error":t.handleImageUploadError,"on-success":t.handleAlbumUploadSuccess,"before-upload":t.beforePosterUpload,"on-remove":t.handlePosterRemove,action:t.imageUploadAction,accept:t.imageUploadAccept}},[n("el-button",{attrs:{loading:t.submitting,size:"small",round:""}},[t._v("上传封面")])],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:t.submitting,type:"primary",size:"small"},on:{click:t.submit}},[t._v("确认提交")])],1)],1)},[],!1,function(t){var e=n(127);e.__inject__&&e.__inject__(t)},"b9e203a2","671967f5");e.a=component.exports},function(t,e,n){"use strict";var r=n(5),o={name:"ImageAlbumSelect",props:{placeholder:{type:String,default:"选择一个相册"},value:{type:[Number,String],default:""},clear:{type:Boolean,default:!0},append:{type:Array,default:()=>[]}},data(){return{selected:this.value,loading:!1,albums:[]}},computed:{selectionAlbum(){return this.append.concat(this.albums)}},mounted(){this.albums.length||this.getUserAlbum(),this.$watch("value",t=>{this.selected=t}),this.$watch("selected",t=>{this.$emit("input",t),this.$emit("success",this.selectionAlbum.filter(e=>e.id===t)[0])})},methods:{async getUserAlbum(){if(!this.loading){this.loading=!0;try{this.albums=await Object(r.h)(this)}finally{this.loading=!1}}}}},l=n(0);var component=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:!0,clearable:t.clear,loading:t.loading,placeholder:t.placeholder},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.selectionAlbum,function(e){return n("el-option",{key:e.id,staticClass:"choice-album-item",attrs:{label:e.name,value:e.id}},[n("div",{staticClass:"image-count meta",domProps:{textContent:t._s(e.image_count)}}),t._v(" "),e.is_creator?n("div",{staticClass:"is-creator meta"},[t._v("创")]):t._e(),t._v(" "),e.is_cartoon?n("div",{staticClass:"is-cartoon meta"},[t._v("漫")]):t._e(),t._v(" "),n("div",{staticClass:"info"},[n("img",{attrs:{src:t.$resize(e.poster,{width:48})}}),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})])])}),1)},[],!1,function(t){var e=n(125);e.__inject__&&e.__inject__(t)},null,"d1a72ebc");e.a=component.exports},function(t,e,n){"use strict";var r=n(6),o=n(73),l=n(5),c={name:"UploadImageForm",components:{ImageAlbumSelect:o.a},mixins:[r.a],props:{appendAlbums:{type:Array,default:()=>[]},selectedBangumiId:{type:[Number,String],default:""},selectedAlbumId:{type:[Number,String],default:""},isCartoon:{type:Boolean,default:!1},exceed:{type:Number,default:7}},data(){return{submitting:!1,fetchingAlbum:!1,pendingUpload:0,form:{name:"",album_id:this.selectedAlbumId,bangumi_id:this.bangumiId,is_cartoon:!1,is_creator:!1,image:null,images:[]},rule:{image:[{validator:(t,e,n)=>{if(!e)return n(new Error("请选择要上传的图片"));n()},trigger:"submit"}],images:[{validator:(t,e,n)=>{if(!e.length)return n(new Error("至少选择一张图片"));n()},trigger:"submit"}]}}},computed:{currentUserId(){return this.$store.state.user.id}},methods:{beforeSingleImageUpload(t){return this.uploadConfig.max=5,this.uploadConfig.pathPrefix=`user/${this.currentUserId}/image`,this.beforeImageUpload(t)},handleSingleImageUploadSuccess(t){this.form.image=t.data,this.$toast.success("封面上传成功")},handleSingleImageRemove(){this.form.image=null},submitSingleImage(){this.$refs.form.validate(t=>{if(!t)return!1;this.form.name.length>30?this.$toast.error("名字最长 30 个字"):this.submitting||(this.submitting=!0,this.$captcha({ctx:this,success:async({data:data})=>{Object(l.k)(this,Object.assign({geetest:data},this.form,this.form.image)).then(t=>{this.form.name="",this.form.is_creator=!1,this.form.image=null,this.$refs.singleUpload.clearFiles(),this.submitting=!1,this.$toast.success(t.message).then(()=>{window.location=this.$alias.image(t.data)})}).catch(t=>{this.$toast.error(t),this.submitting=!1})},close:()=>{this.submitting=!1}}))})},handleManyImageRemove(t){this.submitting||this.form.images.forEach((e,n)=>{e.uid===t.uid&&this.form.images.splice(n,1)})},beforeManyImageUpload(t){return this.form.images.push({raw:t,name:t.name,size:t.size,uid:t.uid,percentage:0,status:"uploading"}),this.uploadConfig.max=10,this.uploadConfig.pathPrefix=`user/${this.currentUserId}/album/${this.form.album_id}/image`,this.pendingUpload++,this.beforeImageUpload(t)},handleManyImageUploadSuccess(t,e){this.form.images.forEach((n,r)=>{n.uid===e.uid&&(this.form.images[r]=Object.assign(n,{data:t.data,width:t.data.width,height:t.data.height,size:t.data.size,type:t.data.type,url:this.$resize(t.data.url,{width:160}),status:"success"}))}),this.pendingUpload--},handleManyUploadError(t,e){console.log(t),this.$toast.error(`图片：${e.name} 上传失败`),this.form.images.forEach((t,n)=>{t.uid===e.uid&&this.form.images.splice(n,1)}),this.pendingUpload--},handleManyExceed(){this.$toast.error(`一次最多可上传 ${this.exceed} 张图片!`)},submitManyImage(){this.form.images.some(t=>"success"!==t.status)?this.$toast.warn("请等待所有图片上传成功"):this.$refs.form.validate(t=>{if(!t)return!1;{if(this.submitting)return;this.submitting=!0;const t=this.form.album_id;Object(l.j)(this,{album_id:t,images:this.form.images.map(t=>({url:t.url.split("calibur.tv/").pop().split("?")[0],size:t.size,type:t.type,width:t.width,height:t.height}))}).then(()=>{this.form.album_id="",this.form.images=[],this.$refs.manyUpload.clearFiles(),this.$toast.success("上传成功"),this.submitting=!1,this.isCartoon?this.$confirm("是否前往漫画页面?","提示",{confirmButtonText:"前往查看",cancelButtonText:"留在这里",type:"warning"}).then(()=>{window.location=this.$alias.image(t)}).catch(()=>{}):window.location=this.$alias.image(t)}).catch(t=>{this.$toast.error(t),this.submitting=!1,/审核/.test(t)&&setTimeout(()=>{window.location.reload()},1e3)})}})}}},d=n(0);var component=Object(d.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule,disabled:t.submitting,"label-width":"45px"}},[t.isCartoon?t._e():[n("el-alert",{staticClass:"tips",attrs:{type:"info",title:"","show-icon":""}},[n("p",[t._v("如果想要批量上传图片，就选择一个相册（需要先创建）")]),t._v(" "),n("p",[t._v("如果想上传单张精品美图，就选择一个番剧")])]),t._v(" "),t.form.bangumi_id?t._e():n("el-form-item",{attrs:{label:"相册",prop:"album_id"}},[n("image-album-select",{attrs:{append:t.appendAlbums,placeholder:"【批量上传】选择要上传图片的相册"},model:{value:t.form.album_id,callback:function(e){t.$set(t.form,"album_id",e)},expression:"form.album_id"}})],1),t._v(" "),t.form.album_id?t._e():n("el-form-item",{attrs:{label:"番剧",prop:"bangumi_id"}},[n("bangumi-search",{attrs:{placeholder:"【单个上传】选择要投稿的番剧"},model:{value:t.form.bangumi_id,callback:function(e){t.$set(t.form,"bangumi_id",e)},expression:"form.bangumi_id"}})],1)],t._v(" "),t.form.album_id||t.form.bangumi_id?[t.form.album_id?[n("el-form-item",{attrs:{label:"图片",prop:"images"}},[n("el-upload",{ref:"manyUpload",attrs:{data:t.uploadHeaders,"on-error":t.handleManyUploadError,"on-success":t.handleManyImageUploadSuccess,"before-upload":t.beforeManyImageUpload,"on-remove":t.handleManyImageRemove,"file-list":t.form.images,"on-exceed":t.handleManyExceed,limit:t.exceed,action:t.imageUploadAction,accept:t.imageUploadAccept,multiple:"","list-type":"picture-card"}},[n("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:t.submitting,type:"primary",size:"small"},on:{click:t.submitManyImage}},[t._v("\n          确认上传\n        ")])],1)]:[n("el-form-item",{attrs:{label:"名字"}},[n("el-input",{attrs:{placeholder:"给图片起个名字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"原创"}},[n("el-row",[n("el-switch",{model:{value:t.form.is_creator,callback:function(e){t.$set(t.form,"is_creator",e)},expression:"form.is_creator"}}),t._v(" "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"如果这幅画是你的作品，请勾选它！",placement:"top"}},[n("i",{staticClass:"el-icon-question"})]),t._v(" "),t.form.image?n("div",{staticClass:"preview-poster",style:{backgroundImage:"url("+t.$resize(t.form.image.url,{width:400,mode:2})+")"}}):t._e()],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"图片",prop:"image"}},[n("el-upload",{ref:"singleUpload",attrs:{data:t.uploadHeaders,"on-error":t.handleImageUploadError,"on-success":t.handleSingleImageUploadSuccess,"before-upload":t.beforeSingleImageUpload,"on-remove":t.handleSingleImageRemove,accept:t.imageUploadAccept,action:t.imageUploadAction}},[n("el-button",{attrs:{loading:t.submitting,size:"small",round:""}},[t._v("选择图片")])],1)],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:t.submitting,type:"primary",size:"small"},on:{click:t.submitSingleImage}},[t._v("\n          确认上传\n        ")])],1)]]:t._e()],2)},[],!1,function(t){var e=n(126);e.__inject__&&e.__inject__(t)},"52bc841a","3a2689fc");e.a=component.exports},function(t,e){t.exports=require("querystring")},function(t,e){t.exports=require("vue-meta")},function(t,e){t.exports=require("vue-no-ssr")},function(t,e){t.exports=require("element-ui/lib/checkbox")},function(t,e){t.exports=require("element-ui/lib/loading")},function(t,e){t.exports=require("axios")},function(t,e){t.exports=require("element-ui/lib/message")},function(t,e){t.exports=require("js-cookie")},function(t,e){t.exports=require("element-ui/lib/upload")},function(t,e){t.exports=require("element-ui/lib/col")},function(t,e){t.exports=require("element-ui/lib/row")},function(t,e){t.exports=require("element-ui/lib/alert")},function(t,e){t.exports=require("element-ui/lib/form-item")},function(t,e){t.exports=require("element-ui/lib/form")},function(t,e){t.exports=require("element-ui/lib/tooltip")},function(t,e){t.exports=require("element-ui/lib/popover")},function(t,e){t.exports=require("element-ui/lib/button-group")},function(t,e){t.exports=require("element-ui/lib/button")},function(t,e){t.exports=require("element-ui/lib/option-group")},function(t,e){t.exports=require("element-ui/lib/option")},function(t,e){t.exports=require("element-ui/lib/select")},function(t,e){t.exports=require("element-ui/lib/switch")},function(t,e){t.exports=require("element-ui/lib/radio-button")},function(t,e){t.exports=require("element-ui/lib/radio-group")},function(t,e){t.exports=require("element-ui/lib/radio")},function(t,e){t.exports=require("element-ui/lib/input-number")},function(t,e){t.exports=require("element-ui/lib/input")},function(t,e){t.exports=require("element-ui/lib/dropdown-item")},function(t,e){t.exports=require("element-ui/lib/dropdown-menu")},function(t,e){t.exports=require("element-ui/lib/dropdown")},function(t,e){t.exports=require("element-ui/lib/tab-pane")},function(t,e){t.exports=require("element-ui/lib/tabs")},function(t,e){t.exports=require("element-ui/lib/rate")},function(t,e){t.exports=require("lodash/throttle")},function(t,e){t.exports=require("element-ui/lib/dialog")},function(t,e){t.exports=require("vue-clipboards")},function(t,e){},function(t,e){},function(t,e,n){t.exports=n(199)},function(t,e,n){var map={"./route-change.js":115};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=114},function(t,e,n){"use strict";n.r(e),e.default=(({store:t,route:e,isClient:n})=>{t.dispatch("getNotification"),n&&(_hmt&&_hmt.push(["_trackPageview",e.fullPath]),M.sentry.setPageInfo(e.name),M.sentry.setPageViewStack(e.fullPath))})},function(t,e,n){"use strict";n.r(e);var r=n(7),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(8),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(9),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(10),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.r(e);var r=n(11),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(12),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(13),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(14),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(15),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(16),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(17),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(18),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e){},function(t,e,n){"use strict";n.r(e);var r=n(19),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(20),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(21),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(22),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(23),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(24),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e){},function(t,e,n){"use strict";n.r(e);var r=n(25),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(26),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(27),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(28),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(29),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(30),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){var map={"./bangumi.js":145,"./comment.js":202,"./editor.js":146,"./flow.js":201,"./index.js":147,"./search.js":200,"./social.js":148,"./users.js":149};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(map,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return map[t]}r.keys=function(){return Object.keys(map)},r.resolve=o,t.exports=r,r.id=144},function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return o}),n.d(e,"mutations",function(){return l}),n.d(e,"actions",function(){return c}),n.d(e,"getters",function(){return d});var r=n(61);const o=()=>({show:null,all:[]}),l={SET_BANGUMI_DATA(t,data){t.show=data},SET_ALL_BANGUMI(t,data){t.all=data},SET_BANGUMI_INFO(t,{key:e,value:n}){t.show[e]=n}},c={async getAllBangumi({state:t,commit:e}){let n=!0;try{const t=sessionStorage.getItem("all-bangumi-load-at");if(t&&Date.now()-t<36e5){const t=JSON.parse(sessionStorage.getItem("all-bangumi-list"));t&&e("SET_ALL_BANGUMI",t),n=!(t&&t.length)}}catch(t){}if(t.all.length||!n)return;const data=await Object(r.d)(this);e("SET_ALL_BANGUMI",data);try{sessionStorage.setItem("all-bangumi-load-at",Date.now()),sessionStorage.setItem("all-bangumi-list",JSON.stringify(data))}catch(t){}}},d={}},function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return o}),n.d(e,"mutations",function(){return l}),n.d(e,"actions",function(){return c}),n.d(e,"getters",function(){return d});const r={title:{type:"title",text:""},img:{type:"img",url:"",width:0,height:0,mime:"",text:""},txt:{type:"txt",text:""},list:{type:"list",text:"",sort:""},use:{type:"use",text:""}},o=()=>({resource:null,selectedIndex:0,sections:[Object.assign({},r.title,{id:0}),Object.assign({},r.img,{id:1}),Object.assign({},r.txt,{id:2}),Object.assign({},r.list,{id:3}),Object.assign({},r.use,{id:4})]}),l={SWITCH_SECTION(t,{index:e}){t.selectedIndex=e},APPEND_SECTION(t,{type:e,index:n}){const o=r[e],template={id:`${t.sections.length}-${Date.now()}`};Object.keys(o).forEach(t=>{template[t]=o[t]});const l=n+1;t.sections.splice(l,0,template),t.selectedIndex=l},UPDATE_SECTION_TEXT(t,{value:e}){t.sections[t.selectedIndex].text=e},UPDATE_SECTION_SORT(t,{value:e}){t.sections[t.selectedIndex].sort=e},UPDATE_SECTION_IMAGE(t,{url:e,width:n,height:r,size:o,mime:l}){t.sections[t.selectedIndex].url=e,t.sections[t.selectedIndex].width=n,t.sections[t.selectedIndex].height=r,t.sections[t.selectedIndex].mime=l,t.sections[t.selectedIndex].size=o},DELETE_SECTION(t,{index:e}){t.sections.splice(e,1),t.selectedIndex=0},SORT_SECTION(t,{index:e}){t.sections.splice(e-1,1,...t.sections.splice(e,1,t.sections[e-1]))},INIT_SECTION(t,data){const e=[];data.content.forEach((section,t)=>{section.id=`${t}-${Date.now()}`,e.push(section)}),t.sections=e,t.resource=data}},c={async getData({commit:t},{api:e,id:n}){const data=await e.edit({id:n});data&&t("INIT_SECTION",data)}},d={}},function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return m}),n.d(e,"mutations",function(){return f}),n.d(e,"actions",function(){return _});var r=n(1),o=n.n(r),l=n(63),c=n(3),d=n(5),h=n(54);const m=()=>({isAuth:!1,user:null,login:!1,pageData:null,haveAuthToken:!1}),f={SET_USER(t,e){t.user=e,t.login=!!e.id,t.isAuth=!0},SET_AUTH_TOKEN(t,e){const n=!!e;t.haveAuthToken=n,n||(t.isAuth=!0)},SET_PAGE_DATA(t,data){t.pageData=data},UPDATE_USER_INFO(t,{key:e,value:n}){o.a.set(t.user,e,n)},UPDATE_USER_EXP(t,e){if(t.login&&e)if(e>0)if(t.user.exp.have_exp+e>=t.user.next_level_exp){const n=t.user.exp.level+1;t.user.exp.level=n,t.user.exp.have_exp=t.user.exp.have_exp+e-t.user.next_level_exp,t.user.exp.next_level_exp=n*n+10*n}else t.user.exp.have_exp=t.user.exp.have_exp+e;else if(t.user.exp.have_exp+e<0){const n=t.user.exp.level-1,r=n*n+10*n;t.user.exp.have_exp=r+t.user.exp.have_exp+e,t.user.exp.next_level_exp=r}else t.user.exp.have_exp=t.user.exp.have_exp+e},USE_COIN(t,e=1){t.login&&(t.user.pocket-=e)}},_={async nuxtServerInit({commit:t},{req:e}){const data=await Object(l.c)(this);t("SET_AUTH_TOKEN",Object(h.a)(e)),t("SET_PAGE_DATA",data)},async initAuth({state:t,commit:e}){if(t.user)return!0;if(!t.haveAuthToken)return e("SET_USER",{}),!1;try{return e("SET_USER",await Object(c.d)(this)),e("UPDATE_USER_INFO",{key:"notification",value:await Object(c.e)(this)}),!0}catch(t){return e("SET_USER",{}),!1}},async getNotification({state:t,commit:e}){if(!t.login)return;e("UPDATE_USER_INFO",{key:"notification",value:await Object(c.e)(this)})},async getUpToken({state:t,commit:e}){if(t.login&&t.user.uptoken.expiredAt<=parseInt(Date.now()/1e3,10)){e("UPDATE_USER_INFO",{key:"uptoken",value:await Object(d.g)()})}}}},function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return c}),n.d(e,"mutations",function(){return d}),n.d(e,"actions",function(){return h}),n.d(e,"getters",function(){return m});var r=n(1),o=n.n(r),l=n(56);const c=()=>({}),d={SET_STATE(t,{type:e,data:data,id:n}){if(Array.isArray(data))data.forEach(n=>{Object.keys(n).forEach(t=>{n[`${t}_loading`]=!1}),o.a.set(t,`${e}-${n.id}`,n)});else{const r=data=>"object"==typeof data;Object.keys(data).forEach(t=>{r(data[t])?data[t]=Object.assign(data[t],{loading:!1,error:!1,nothing:!data[t].total}):data[`${t}_loading`]=!1}),o.a.set(t,`${e}-${n||data.id}`,data)}},PUSH_STATE(t,{type:e,id:n,key:r,data:data}){const o=[`${e}-${n}`],l=`${r}_users`,c=t[o][l].list,d=data.list.map(t=>t.id);t[o][l].list=c.filter(t=>-1===d.indexOf(t.id)).concat(data.list),t[o][l].total=data.total,t[o][l].noMore=data.noMore,t[o][l].loading=!1},TOGGLE_STATE(t,{type:e,id:n,key:r,result:o,user:l}){const c=[`${e}-${n}`],d=`${r}_users`;t[c][r]=o,t[c][`${r}_loading`]=!1,t[c][d]&&(o?(t[c][d].total++,t[c][d].noMore=!1,t[c][d].list.unshift(l)):(t[c][d].total--,t[c][d].list.forEach((e,n)=>{e.id===l.id&&t[c][d].list.splice(n,1)})))},SET_PUSH_RUNNING(t,{type:e,id:n,key:r,value:o}){const l=`${r}_users`;t[[`${e}-${n}`]][l][o]=!0},SET_TOGGLE_LOADING(t,{type:e,id:n,action:r,result:o}){t[`${e}-${n}`][`${r}_loading`]=o}},h={async getUsers({state:t,commit:e},{type:n,id:r,key:o}){const c=t[`${n}-${r}`][`${o}_users`];if(!c.loading&&!c.noMore){e("SET_PUSH_RUNNING",{type:n,key:o,id:r,value:"loading"});try{e("PUSH_STATE",{type:n,id:r,key:o,data:await l.users({ctx:this,type:o,id:r,last_id:c.list.length?c.list[c.list.length-1].id:0,model:n,take:15})})}catch(t){e("SET_PUSH_RUNNING",{type:n,key:o,id:r,value:"error"})}}},async toggleAction({state:t,commit:e,rootState:n},{type:r,id:o,action:c}){if(!t[`${r}-${o}`][`${c}_loading`]){e("SET_TOGGLE_LOADING",{action:c,type:r,id:o,result:!0});try{const t=await l[c]({ctx:this,id:o,type:r}),{user:d}=n;return e("TOGGLE_STATE",{type:r,key:c,id:o,result:t,user:{id:d.id,nickname:d.nickname,avatar:d.avatar,created_at:parseInt(Date.now()/1e3)}}),{success:!0,result:t}}catch(t){return e("SET_TOGGLE_LOADING",{action:c,type:r,id:o,result:!1}),{success:!1}}}}},m={getState:t=>(e,n)=>t[`${e}-${n}`]}},function(t,e,n){"use strict";n.r(e),n.d(e,"state",function(){return o}),n.d(e,"mutations",function(){return l}),n.d(e,"actions",function(){return c});var r=n(3);const o=()=>({show:null,notifications:{checked:0,take:10,list:[],noMore:!1,total:0,system_count:0,user_count:0}}),l={USER_SIGN(t){t.show.banlance.coin_count++},SET_USER_INFO(t,data){t.show=data},SET_NOTIFICATIONS(t,data){t.notifications.list=t.notifications.list.concat(data.list),t.notifications.total=data.total,t.notifications.noMore=data.noMore,data.system_count&&(t.notifications.system_count=data.system_count)},READ_NOTIFICATION(t,e){t.notifications.list.forEach((n,r)=>{n.id!==e||n.checked||(t.notifications.list[r].checked=!0,t.notifications.checked++)})},READ_ALL_NOTIFICATION(t){t.notifications.list.forEach((e,n)=>{t.notifications.list[n].checked=!0}),t.notifications.checked=88888888},CLEAR_NOTICE(t){t.notifications.checked+=t.notifications.system_count,t.notifications.system_count=0}},c={async daySign({rootState:t,commit:e}){if(!t.user.signed)return e("USER_SIGN"),await Object(r.b)(this)},async getNotifications({state:t,commit:e},{init:n}){const o=t.notifications.list.length;n&&o||t.notifications.noMore||e("SET_NOTIFICATIONS",await Object(r.f)(this,{minId:o?t.notifications.list[o-1].id:null,take:t.notifications.take}))},async readMessage({state:t,commit:e},{id:n}){let o=null;t.notifications.list.forEach(t=>{t.id!==n||t.checked||(o=t)}),o&&(await Object(r.o)(this,{id:n}),e("READ_NOTIFICATION",n))},async readNotice({state:t,commit:e},{id:n}){t.notifications.system_count&&(await Object(r.p)(this,{id:n}),e("CLEAR_NOTICE"))}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){"use strict";n.r(e);var r=n(31),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(32),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(33),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(34),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(35),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e){},function(t,e,n){"use strict";n.r(e);var r=n(36),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(37),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(38),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(39),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(40),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(41),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(42),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(43),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(44),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(45),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(46),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){t.exports=n.p+"img/aa8b45a.png"},function(t,e,n){"use strict";n.r(e);var r=n(47),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(48),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(49),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e,n){"use strict";n.r(e);var r=n(50),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},function(t,e){t.exports=require("debug")},function(t,e,n){"use strict";n.r(e);var r=n(75),o=n(1),l=n.n(o);const c=n(114),d=c.keys();function h(t){const e=c(t);return e.default||e}const m={};for(const t of d){m[t.replace(/^\.\//,"").replace(/\.(js|mjs|ts)$/,"")]=h(t)}var f=m;function _(t){return t.then(t=>t.default||t)}function v(t){return t.options&&t._Ctor===t?t:(t.options?(t._Ctor=t,t.extendOptions=t.options):(t=l.a.extend(t))._Ctor=t,!t.options.name&&t.options.__file&&(t.options.name=t.options.__file),t)}function y(t,e=!1){return Array.prototype.concat.apply([],t.matched.map((t,n)=>Object.keys(t.components).map(r=>(e&&e.push(n),t.components[r]))))}function $(t){return Promise.all(function(t,e){return Array.prototype.concat.apply([],t.matched.map((t,n)=>Object.keys(t.components).reduce((r,o)=>(t.components[o]?r.push(e(t.components[o],t.instances[o],t,o,n)):delete t.components[o],r),[])))}(t,async(t,e,n,r)=>("function"!=typeof t||t.options||(t=await t()),n.components[r]=v(t),n.components[r])))}async function x(t){return await $(t),{...t,meta:y(t).map((e,n)=>({...e.options.meta,...(t.matched[n]||{}).meta}))}}async function w(t,e){t.context||(t.context={isStatic:!1,isDev:!1,isHMR:!1,app:t,store:t.store,payload:e.payload,error:e.error,base:"/",env:{API_URL:"http://localhost/",API_URL_BROWSER:"https://api.calibur.tv/",SENTRY_URL:"https://5c1d2b169b09423abb6a74227a64c3c4@sentry.io/1352871",RELEASE:"2019-2-28-17-56-10"}},e.req&&(t.context.req=e.req),e.res&&(t.context.res=e.res),t.context.redirect=((e,path,n)=>{if(!e)return;t.context._redirected=!0;let r=typeof path;"number"==typeof e||"undefined"!==r&&"object"!==r||(n=path||{},r=typeof(path=e),e=302),"object"===r&&(path=t.router.resolve(path).href),/(^[.]{1,2}\/)|(^\/(?!\/))/.test(path)?t.context.next({path:path,query:n,status:e}):(path=function(t,e){let n;const r=t.indexOf("://");-1!==r?(n=t.substring(0,r),t=t.substring(r+3)):t.startsWith("//")&&(t=t.substring(2));let o,l=t.split("/"),c=(n?n+"://":"//")+l.shift(),path=l.filter(Boolean).join("/");2===(l=path.split("#")).length&&(path=l[0],o=l[1]);c+=path?"/"+path:"",e&&"{}"!==JSON.stringify(e)&&(c+=(2===t.split("?").length?"&":"?")+function(t){return Object.keys(t).sort().map(e=>{const n=t[e];return null==n?"":Array.isArray(n)?n.slice().map(t=>[e,"=",t].join("")).join("&"):e+"="+n}).filter(Boolean).join("&")}(e));return c+=o?"#"+o:""}(path,n),t.context.next({path:path,status:e}))}),t.context.beforeNuxtRender=(t=>e.beforeRenderFns.push(t))),t.context.next=e.next,t.context._redirected=!1,t.context._errored=!1,t.context.isHMR=!!e.isHMR,e.route&&(t.context.route=await x(e.route)),t.context.params=t.context.route.params||{},t.context.query=t.context.route.query||{},e.from&&(t.context.from=await x(e.from))}function k(t,e){return!t.length||e._redirected||e._errored?Promise.resolve():C(t[0],e).then(()=>k(t.slice(1),e))}function C(t,e){let n;return(n=2===t.length?new Promise(n=>{t(e,function(t,data){t&&e.error(t),n(data=data||{})})}):t(e))&&(n instanceof Promise||"function"==typeof n.then)||(n=Promise.resolve(n)),n}function S(t,e){return function(t){const e=new Array(t.length);for(let i=0;i<t.length;i++)"object"==typeof t[i]&&(e[i]=new RegExp("^(?:"+t[i].pattern+")$"));return function(n,r){let path="";const data=n||{},o=r||{},l=o.pretty?I:encodeURIComponent;for(let i=0;i<t.length;i++){const n=t[i];if("string"==typeof n){path+=n;continue}const r=data[n.name||"pathMatch"];let o;if(null==r){if(n.optional){n.partial&&(path+=n.prefix);continue}throw new TypeError('Expected "'+n.name+'" to be defined')}if(Array.isArray(r)){if(!n.repeat)throw new TypeError('Expected "'+n.name+'" to not repeat, but received `'+JSON.stringify(r)+"`");if(0===r.length){if(n.optional)continue;throw new TypeError('Expected "'+n.name+'" to not be empty')}for(let t=0;t<r.length;t++){if(o=l(r[t]),!e[i].test(o))throw new TypeError('Expected all "'+n.name+'" to match "'+n.pattern+'", but received `'+JSON.stringify(o)+"`");path+=(0===t?n.prefix:n.delimiter)+o}}else{if(o=n.asterisk?encodeURI(r).replace(/[?#]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase()):l(r),!e[i].test(o))throw new TypeError('Expected "'+n.name+'" to match "'+n.pattern+'", but received "'+o+'"');path+=n.prefix+o}}return path}}(function(t,e){const n=[];let r=0,o=0,path="";const l=e&&e.delimiter||"/";let c;for(;null!=(c=E.exec(t));){const e=c[0],d=c[1],h=c.index;if(path+=t.slice(o,h),o=h+e.length,d){path+=d[1];continue}const m=t[o],f=c[2],_=c[3],v=c[4],y=c[5],$=c[6],x=c[7];path&&(n.push(path),path="");const w=null!=f&&null!=m&&m!==f,k="+"===$||"*"===$,C="?"===$||"*"===$,S=c[2]||l,pattern=v||y;n.push({name:_||r++,prefix:f||"",delimiter:S,optional:C,repeat:k,partial:w,asterisk:!!x,pattern:pattern?T(pattern):x?".*":"[^"+N(S)+"]+?"})}o<t.length&&(path+=t.substr(o));path&&n.push(path);return n}(t,e))}const E=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function I(t){return encodeURI(t).replace(/[\/?#]/g,t=>"%"+t.charCodeAt(0).toString(16).toUpperCase())}function N(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function T(t){return t.replace(/([=!:$\/()])/g,"\\$1")}var O=n(76),j=n.n(O),A=n(57),U=n.n(A);const B=()=>_(n.e(19).then(n.bind(null,493))),L=()=>_(n.e(20).then(n.bind(null,514))),R=()=>_(n.e(21).then(n.bind(null,515))),P=()=>_(n.e(28).then(n.bind(null,516))),D=()=>_(n.e(29).then(n.bind(null,517))),z=()=>_(n.e(30).then(n.bind(null,518))),F=()=>_(n.e(47).then(n.bind(null,489))),G=()=>_(n.e(61).then(n.bind(null,502))),W=()=>_(n.e(62).then(n.bind(null,548))),H=()=>_(n.e(63).then(n.bind(null,535))),Q=()=>_(n.e(64).then(n.bind(null,537))),K=()=>_(n.e(65).then(n.bind(null,538))),V=()=>_(n.e(66).then(n.bind(null,541))),Z=()=>_(n.e(2).then(n.bind(null,542))),J=()=>_(n.e(4).then(n.bind(null,540))),Y=()=>_(n.e(5).then(n.bind(null,539))),X=()=>_(n.e(6).then(n.bind(null,547))),tt=()=>_(n.e(7).then(n.bind(null,503))),et=()=>_(n.e(22).then(n.bind(null,534))),st=()=>_(n.e(23).then(n.bind(null,532))),it=()=>_(n.e(24).then(n.bind(null,530))),nt=()=>_(n.e(25).then(n.bind(null,549))),ot=()=>_(n.e(26).then(n.bind(null,529))),at=()=>_(n.e(33).then(n.bind(null,528))),lt=()=>_(n.e(36).then(n.bind(null,546))),ct=()=>_(n.e(38).then(n.bind(null,526))),ut=()=>_(n.e(40).then(n.bind(null,550))),pt=()=>_(n.e(39).then(n.bind(null,525))),ht=()=>_(n.e(41).then(n.bind(null,524))),mt=()=>_(n.e(42).then(n.bind(null,523))),ft=()=>_(n.e(43).then(n.bind(null,501))),gt=()=>_(n.e(44).then(n.bind(null,521))),_t=()=>_(n.e(45).then(n.bind(null,520))),vt=()=>_(n.e(46).then(n.bind(null,504))),bt=()=>_(n.e(3).then(n.bind(null,513))),yt=()=>_(n.e(8).then(n.bind(null,505))),$t=()=>_(n.e(9).then(n.bind(null,492))),xt=()=>_(n.e(11).then(n.bind(null,551))),wt=()=>_(n.e(10).then(n.bind(null,497))),kt=()=>_(n.e(12).then(n.bind(null,507))),Ct=()=>_(n.e(13).then(n.bind(null,506))),St=()=>_(n.e(14).then(n.bind(null,544))),Et=()=>_(n.e(15).then(n.bind(null,499))),It=()=>_(n.e(16).then(n.bind(null,536))),Nt=()=>_(n.e(17).then(n.bind(null,491))),Tt=()=>_(n.e(18).then(n.bind(null,500))),Ot=()=>_(n.e(31).then(n.bind(null,494))),jt=()=>_(n.e(32).then(n.bind(null,490))),qt=()=>_(n.e(34).then(n.bind(null,512))),At=()=>_(n.e(35).then(n.bind(null,511))),Mt=()=>_(n.e(37).then(n.bind(null,488))),Ut=()=>_(n.e(48).then(n.bind(null,509))),Bt=()=>_(n.e(49).then(n.bind(null,498))),Lt=()=>_(n.e(52).then(n.bind(null,552))),Rt=()=>_(n.e(50).then(n.bind(null,543))),Pt=()=>_(n.e(51).then(n.bind(null,533))),Dt=()=>_(n.e(53).then(n.bind(null,522))),zt=()=>_(n.e(54).then(n.bind(null,519))),Ft=()=>_(n.e(55).then(n.bind(null,496))),Gt=()=>_(n.e(56).then(n.bind(null,510))),Wt=()=>_(n.e(57).then(n.bind(null,508))),Ht=()=>_(n.e(58).then(n.bind(null,527))),Qt=()=>_(n.e(59).then(n.bind(null,531))),Kt=()=>_(n.e(60).then(n.bind(null,495))),Vt=()=>_(n.e(27).then(n.bind(null,545)));l.a.use(U.a);const Zt=function(t,e,n){if(n)return n;let r={x:0,y:0};return t.hash&&(r={selector:t.hash}),r};var Jt=n(77),Yt={...n.n(Jt).a,name:"NoSsr"},Xt={name:"NuxtChild",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0}},render(t,{parent:e,data:data,props:n}){data.nuxtChild=!0;const r=e,o=e.$nuxt.nuxt.transitions,l=e.$nuxt.nuxt.defaultTransition;let c=0;for(;e;)e.$vnode&&e.$vnode.data.nuxtChild&&c++,e=e.$parent;data.nuxtChildDepth=c;const d=o[c]||l,h={};te.forEach(t=>{void 0!==d[t]&&(h[t]=d[t])});const m={};ee.forEach(t=>{"function"==typeof d[t]&&(m[t]=d[t].bind(r))});const f=m.beforeEnter;m.beforeEnter=(t=>{if(window.$nuxt.$nextTick(()=>{window.$nuxt.$emit("triggerScroll")}),f)return f.call(r,t)});let _=[t("router-view",data)];return n.keepAlive&&(_=[t("keep-alive",{props:n.keepAliveProps},_)]),t("transition",{props:h,on:m},_)}};const te=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],ee=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"];var se=n(51),ie={name:"nuxt-error",components:{vFooter:se.a},props:{error:{type:Object,default:null}},head(){return{title:this.message,meta:[{name:"viewport",content:"width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"}]}},computed:{statusCode(){return this.error&&this.error.statusCode||500},message(){return this.error.message||"Error"}},mounted(){this.$store.dispatch("initAuth")}},ne=n(0);var re=Object(ne.a)(ie,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"error-page"}},[n("v-header"),t._ssrNode(" "),t._ssrNode('<div class="error-message">',"</div>",[t._ssrNode('<img src="https://image.calibur.tv/owner/error/404.jpeg?imageMogr2/auto-orient/strip|imageView2/1/w/500/h/500" class="error-img"> '),t._ssrNode('<div class="error-show">',"</div>",[t._ssrNode('<div class="error-config">',"</div>",[401===t.statusCode?[t._ssrNode("<p>继续操作前请先登录</p> "),n("el-button",{attrs:{type:"primary",size:"mini",round:""},on:{click:function(e){return t.$channel.$emit("sign-in")}}},[t._v("登录")])]:403===t.statusCode?[t._ssrNode("<p>您没有足够的操作权限</p> <p>可能您已经登录了，但没有权限；或者需要登录后再尝试</p> "),n("router-link",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""}},[t._v("回首页")])],1)]:404===t.statusCode?[t._ssrNode("<p>您查找的页面不存在</p> <p>可能它从未出现过，也有可能是已经被删除</p> "),n("router-link",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""}},[t._v("回首页")])],1)]:423===t.statusCode?[t._ssrNode("<p>你访问的资源正在审核中，请不要重复发表相同内容</p> <p>\n            如果已经过了很久了它仍然在审核中，那么可以尝试加入我们的QQ群进行反馈\n          </p> "),n("router-link",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""}},[t._v("回首页")])],1)]:429===t.statusCode?[t._ssrNode("<p>您的访问频率太高了</p> <p>请不要以超越凡人的速度来访问该网站，休息一下再来吧</p> "),n("router-link",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""}},[t._v("回首页")])],1)]:[t._ssrNode("<p>您访问的页面出现了错误</p> <p>\n            可以尝试加入我们的QQ群，将这个错误反馈给无能的站长，说不定他能修复呢\n          </p> "),n("router-link",{attrs:{to:"/"}},[n("el-button",{attrs:{type:"primary",size:"mini",round:""}},[t._v("回首页")])],1)]],2),t._ssrNode(' <div class="error-log"><p>'+t._ssrEscape("错误信息："+t._s(t.message))+"</p></div>")],2)],2),t._ssrNode(" "),n("v-footer")],2)},[],!1,function(t){var e=n(118);e.__inject__&&e.__inject__(t)},null,"7812ff72").exports,oe={name:"Nuxt",components:{NuxtChild:Xt,NuxtError:re},props:{nuxtChildKey:{type:String,default:void 0},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0},name:{type:String,default:"default"}},computed:{routerViewKey(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||S(this.$route.matched[0].path)(this.$route.params);const t=this.$route.matched[0]&&this.$route.matched[0].components.default;return t&&t.options&&t.options.key?"function"==typeof t.options.key?t.options.key(this.$route):t.options.key:this.$route.path}},beforeCreate(){l.a.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},render(t){return this.nuxt.err?t("NuxtError",{props:{error:this.nuxt.err}}):t("NuxtChild",{key:this.routerViewKey,props:this.$props})}},ae={name:"NuxtLoading",data:()=>({percent:0,show:!1,canSucceed:!0,reversed:!1,skipTimerCount:0,rtl:!1,throttle:200,duration:5e3,continuous:!1}),computed:{left(){return!(!this.continuous&&!this.rtl)&&(this.rtl?this.reversed?"0px":"auto":this.reversed?"auto":"0px")}},beforeDestroy(){this.clear()},methods:{clear(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start(){return this.clear(),this.percent=0,this.reversed=!1,this.skipTimerCount=0,this.canSucceed=!0,this.throttle?this._throttle=setTimeout(()=>this.startTimer(),this.throttle):this.startTimer(),this},set(t){return this.show=!0,this.canSucceed=!0,this.percent=Math.min(100,Math.max(0,Math.floor(t))),this},get(){return this.percent},increase(t){return this.percent=Math.min(100,Math.floor(this.percent+t)),this},decrease(t){return this.percent=Math.max(0,Math.floor(this.percent-t)),this},pause(){return clearInterval(this._timer),this},resume(){return this.startTimer(),this},finish(){return this.percent=this.reversed?0:100,this.hide(),this},hide(){return this.clear(),setTimeout(()=>{this.show=!1,this.$nextTick(()=>{this.percent=0,this.reversed=!1})},500),this},fail(){return this.canSucceed=!1,this},startTimer(){this.show||(this.show=!0),void 0===this._cut&&(this._cut=1e4/Math.floor(this.duration)),this._timer=setInterval(()=>{this.skipTimerCount>0?this.skipTimerCount--:(this.reversed?this.decrease(this._cut):this.increase(this._cut),this.continuous&&(this.percent>=100?(this.skipTimerCount=1,this.reversed=!this.reversed):this.percent<=0&&(this.skipTimerCount=1,this.reversed=!this.reversed)))},100)}},render(t){let e=t(!1);return this.show&&(e=t("div",{staticClass:"nuxt-progress",class:{"nuxt-progress-notransition":this.skipTimerCount>0,"nuxt-progress-failed":!this.canSucceed},style:{width:this.percent+"%",left:this.left}})),e}};var le=Object(ne.a)(ae,void 0,void 0,!1,function(t){var e=n(119);e.__inject__&&e.__inject__(t)},null,"76bc14b2").exports;n(120),n(121);let ce=!1;var ue={name:"VRange",props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:0},disabled:{type:Boolean,default:!1},value:{type:Number,default:0},loading:{type:Number,default:0},barsize:{type:Number,default:6},tailsize:{type:Number,default:14},vertical:{type:Boolean,default:!1}},data(){return{curRange:this.value,dragState:null,offset:0}},computed:{containerStyle(){let style={},t=this.tailsize?(this.tailsize-this.barsize)/2+"px":"0px";return this.vertical?(style.paddingLeft=t,style.paddingRight=t,style.height="100%",style.width=(this.tailsize||this.barsize)+"px"):(style.paddingTop=t,style.paddingBottom=t,style.width="100%",style.height=(this.tailsize||this.barsize)+"px"),style},progressStyle(){this.getOffset();let style={},t=this.progress();return this.vertical?(style.width=this.barsize+"px",style.height=t+"%",style.top=100-t+"%"):(style.width=t+"%",style.height=this.barsize+"px",style.left=0),style},loadingStyle(){return this.getOffset(),this.vertical?{height:this.loading/this.max*100+"%",width:this.barsize+"px"}:{width:this.loading/this.max*100+"%",height:this.barsize+"px"}},thumbStyle(){if(!this.tailsize)return{};this.getOffset();let style={};return style.width=this.tailsize+"px",style.height=this.tailsize+"px",this.vertical?style.top=100-this.progress()-this.offset+"%":style.left=this.progress()-this.offset+"%",style}},watch:{value(t){this.curRange=t},curRange(t){this.$emit("input",t)}},mounted(){this.getOffset(),function(element,t){const e=function(e){t.drag&&t.drag(e)},n=function(r){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",n),document.onselectstart=null,document.ondragstart=null,ce=!1,t.end&&t.end(r)};element.addEventListener("mousedown",r=>{ce||(r.preventDefault(),document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",e),document.addEventListener("mouseup",n),ce=!0,t.start&&t.start(r))})}(this.$refs.thumb,{start:()=>{this.disabled||this.getThumbPosition()},drag:t=>{this.handleClick(t)},end:()=>{this.disabled||(this.dragState=null)}}),window.addEventListener("resize",()=>{this.getOffset()})},methods:{progress(){const t=this.value;return null==t||t-this.min==0?0:Math.floor((t-this.min)/(this.max-this.min)*100)},getOffset(){this.$refs.content&&(this.offset=this.tailsize/(this.vertical?this.$refs.content.offsetHeight:this.$refs.content.offsetWidth)*50)},handleClick(t){this.disabled||(this.getOffset(),this.getPosition(t))},getPosition(t){const e=this.$refs.content.getBoundingClientRect();let n,r,o,l;if(this.dragState||this.getThumbPosition(),this.vertical?(o=this.dragState.y,l=e.height,n=t.pageY-e.top-o-window.scrollY):(o=this.dragState.x,l=e.width,n=t.pageX-e.left-o-window.scrollX),this.step){r=o+n-(o+n)%(l/Math.ceil((this.max-this.min)/this.step))}else r=o+n;let c=r/l;c<0?c=0:c>1&&(c=1),this.vertical&&(c=1-c);const d=Math.round(this.min+c*(this.max-this.min));this.$emit("rangeChangeEvent",d),this.curRange=d},getThumbPosition(){const t=this.$refs.content.getBoundingClientRect(),e=this.$refs.thumb.getBoundingClientRect();this.dragState={x:e.left-t.left,y:e.top-t.top}}}};var de={components:{vRange:Object(ne.a)(ue,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"vue-pwa-range-container",class:{"vue-pwa-range-disabled":t.disabled},style:t.containerStyle,on:{touchmove:function(t){t.stopPropagation()},click:function(t){t.stopPropagation()}}},[t._ssrNode('<div class="vue-pwa-range"><div class="vue-pwa-range-runway"></div> '+(t.loading?'<div class="vue-pwa-range-loading"'+t._ssrStyle(null,t.loadingStyle,null)+"></div>":"\x3c!----\x3e")+' <div class="vue-pwa-range-progress"'+t._ssrStyle(null,t.progressStyle,null)+'></div></div> <div class="vue-pwa-range-thumb"'+t._ssrStyle(null,t.thumbStyle,null)+"></div>")])},[],!1,function(t){var e=n(122);e.__inject__&&e.__inject__(t)},null,"32ceeb57").exports},data:()=>({source:[{id:1,src:"https://image.calibur.tv/owner/music/1.mp3",name:"Life Is Like A Boat",player:"Rie Fu",selected:!0,playing:!1,img:"https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=4251145607,2531835868&fm=85&s=A8036E93E24A56EE1AE5A153030010F3"},{id:2,src:"https://image.calibur.tv/owner/music/2.mp3",name:"だんご大家族",player:"茶太",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2980366584,2187856484&fm=171&s=15982F77831E40694CD1DC7E03001039&w=121&h=91&img.JPEG&bpow=448&bpoh=252"},{id:3,src:"https://image.calibur.tv/owner/music/3.mp3",name:"Memories",player:"大槻マキ",selected:!0,playing:!1,img:"https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=3414694364,2917711924&fm=85&s=5402FABE5E1261F5DA2E41640300F061"},{id:4,src:"https://image.calibur.tv/owner/music/4.mp3",name:"残酷な天使のテーゼ",player:"高橋洋子",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2570708825,3778744992&fm=58&bpow=932&bpoh=1067"},{id:5,src:"https://image.calibur.tv/owner/music/5.mp3",name:"Theme of ONE PUNCH MAN",player:"宮崎誠",selected:!0,playing:!1,img:"https://ss0.baidu.com/73x1bjeh1BF3odCf/it/u=3502363312,3220031789&fm=85&s=15C3FDA65EF29DF51C3CF938030010C3"},{id:6,src:"https://image.calibur.tv/owner/music/6.mp3",name:"Butter-Fly",player:"和田光司",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3750807320,2770026803&fm=58"},{id:7,src:"https://image.calibur.tv/owner/music/7.mp3",name:"時代を越える想い",player:"和田薫",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=3085520176,2847306273&fm=58&bpow=644&bpoh=768"},{id:8,src:"https://image.calibur.tv/owner/music/8.mp3",name:"Continued Story",player:"黒石ひとみ",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=3073230744,4164198060&fm=58"},{id:9,src:"https://image.calibur.tv/owner/music/9.mp3",name:"あなたがいた森",player:"樹海",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2475402386,230787783&fm=58"},{id:10,src:"https://image.calibur.tv/owner/music/10.mp3",name:"翼をください ",player:"林原めぐみ",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1225371658,1348139348&fm=172&app=19&f=JPEG?w=121&h=91&s=DB9503C64E4636515857D7B20300D00F&bpow=400&bpoh=250"},{id:11,src:"https://image.calibur.tv/owner/music/11.mp3",name:"secret base ~君がくれたもの~ ",player:"茅野愛衣",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3257225204,3825220231&fm=58"},{id:12,src:"https://image.calibur.tv/owner/music/12.mp3",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=4023072402,3220604678&fm=58&bpow=1280&bpoh=1254",player:"平野绫",name:"God knows..."},{id:13,src:"https://image.calibur.tv/owner/music/13.mp3",name:"Gamble Rumble",player:"日本群星",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=898061995,2496832578&fm=58"},{id:14,src:"https://image.calibur.tv/owner/music/14.mp3",name:"遠い空へ",player:"三輪学",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=840459020,736145682&fm=58"},{id:15,src:"https://image.calibur.tv/owner/music/15.mp3",name:"雪どけのあの川の流れのように",player:"三枝夕夏 IN db",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2108051172,1763104311&fm=58"},{id:16,src:"https://image.calibur.tv/owner/music/16.mp3",name:"One more time, One more chance",player:"山崎まさよし",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1618533673,3779234904&fm=58"},{id:17,src:"https://image.calibur.tv/owner/music/17.mp3",name:"ヒカリ",player:"樹海",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3633046244,4153138975&fm=58"},{id:18,src:"https://image.calibur.tv/owner/music/18.mp3",name:"地球ぎ",player:"松澤由美",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=3923877014,165725923&fm=58&bpow=480&bpoh=728"},{id:19,src:"https://image.calibur.tv/owner/music/19.mp3",name:"Wind",player:"Akeboshi",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=3287911437,3680177977&fm=58&bpow=571&bpoh=421"},{id:20,src:"https://image.calibur.tv/owner/music/20.mp3",name:"Brothers",player:"群星",selected:!0,playing:!1,img:"https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=1079743037,4016790706&fm=85&s=80006FB706434AED2C29256303007078"},{id:21,src:"https://image.calibur.tv/owner/music/21.mp3",name:"コネクト",player:"ClariS",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1043104536,2579742317&fm=58"},{id:22,src:"https://image.calibur.tv/owner/music/22.mp3",name:"Glassy Sky",player:"Donna Burke",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=2790305043,3258702299&fm=58"},{id:23,src:"https://image.calibur.tv/owner/music/23.mp3",name:"My Song",player:"Yui",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1802538637,158839725&fm=171&app=20&f=JPEG?w=121&h=91&s=C41AC43951767C39DC7918DA030080B4&bpow=480&bpoh=270"},{id:24,src:"https://image.calibur.tv/owner/music/24.mp3",name:"NEXT TO YOU",player:"Ken Arai",selected:!0,playing:!1,img:"https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=1307757296,4262664801&fm=179&app=42&f=JPEG?w=150&h=150"},{id:25,src:"https://image.calibur.tv/owner/music/25.mp3",name:"町, 時の流れ, 人",player:"Key Sounds Label",selected:!0,playing:!1,img:"https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=1488271269,3385060447&fm=58"},{id:26,src:"https://image.calibur.tv/owner/music/26.mp3",name:"Dear Friends",player:"TRIPLANE",selected:!0,playing:!1,img:"https://ss1.bdstatic.com/70cFvXSh_Q1YnxGkpoWK1HF6hhy/it/u=2627866346,475109417&fm=27&gp=0.jpg"},{id:27,src:"https://image.calibur.tv/owner/music/27.mp3",name:"世界が終るまでは…",player:"WANDS",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=712966633,2295645920&fm=58"},{id:28,src:"https://image.calibur.tv/owner/music/28.mp3",name:"again",player:"Yui",selected:!0,playing:!1,img:"https://ss0.baidu.com/73t1bjeh1BF3odCf/it/u=3860908664,40817184&fm=85&s=EA9B6E8FC66366B45E3125670300C042"},{id:29,src:"https://image.calibur.tv/owner/music/29.mp3",name:"潮鳴り",player:"Key Sounds Label",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=351792085,464043388&fm=179&app=42&f=JPEG?w=121&h=140"},{id:30,src:"https://image.calibur.tv/owner/music/30.mp3",name:"想い出は遠くの日々",player:"天門",selected:!0,playing:!1,img:"https://ss1.baidu.com/6ONXsjip0QIZ8tyhnq/it/u=1618533673,3779234904&fm=58"}],open:!1,needInit:!0,status:{playing:!1,silent:!1,menuShow:!1,voice:50,current:0,duration:0},time:{cur:"00:00",all:"00:00"},now:{},player:null}),computed:{musics(){const t=this.source.map(t=>t);for(let i=t.length;i;i--){let e=Math.floor(Math.random()*i);[t[i-1],t[e]]=[t[e],t[i-1]]}return t}},mounted(){const audio=this.$refs.audio;this.player=audio,audio.volume=.5,audio.addEventListener("ended",()=>{this.status.playing=!1,this.next(!0)}),audio.addEventListener("durationchange",()=>{const t=audio.duration,e=this.formatSeconds(t);this.status.duration=t,this.time.all=e[0]?`${e[0]}:${e[1]}:${e[2]}`:`${e[1]}:${e[2]}`}),audio.addEventListener("timeupdate",()=>{const t=audio.currentTime,e=this.formatSeconds(t);this.status.current=t,this.time.cur=e[0]?`${e[0]}:${e[1]}:${e[2]}`:`${e[1]}:${e[2]}`}),audio.addEventListener("error",()=>{this.next(!0)})},methods:{musicToggle(){this.open=!this.open,this.needInit&&(this.needInit=!1,this.loadSource(this.musics[0],!1))},next(t){const e=this.musics.length;if(!e)return;const n=this.now.id;let r=-1;this.musics.forEach((o,l)=>{o.id===n&&(r=t?l===e-1?0:l+1:l?l-1:e-1)}),-1!==r&&this.loadSource(this.musics[r])},volume(t){this.player.muted=!t,this.status.voice=t,this.player.volume=t/100},loadSource(t,e=!0){if(void 0!==this.now.playing){if(this.now.id===t.id)return;this.now.playing=!1}t.playing=!0,this.now=t,this.player.setAttribute("src",this.now.src),e&&(this.player.play(),this.status.playing=!0)},formatSeconds(t){let[e,n,s]=[0,0,0];return t>60?(n=parseInt(t/60),s=(t%60).toFixed(0),n>60&&(e=parseInt(n/60),n=parseInt(n%60))):s=parseInt(t),[e,n=n<10?"0"+n:n,s=s<10?"0"+s:s]},handleMuteBtnClick(){this.status.silent=!this.status.silent,this.player.muted=!this.player.muted},handlePlayBtnClick(){this.status.playing=!this.status.playing,this.player.paused?this.player.play():this.player.pause()}}};var pe=Object(ne.a)(de,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:[t.open?"M-open":"M-close"],attrs:{id:"music"}},[t._ssrNode('<audio></audio> <button class="toggle"><i class="iconfont icon-yinle"></i></button> '),t._ssrNode('<div class="M-main">',"</div>",[t._ssrNode('<div class="M-warp">',"</div>",[t._ssrNode("<img"+t._ssrAttr("src",t.now.img)+' class="M-face"> '),t._ssrNode('<div class="M-control">',"</div>",[t._ssrNode('<div class="header"><div class="left"><a>'+t._ssrEscape(t._s(t.now.name))+'</a> <span class="M-dot"></span> <a>'+t._ssrEscape(t._s(t.now.player))+"</a></div> <button"+t._ssrClass("menu-btn",{"menu-click":t.status.menuShow})+'><i class="iconfont icon-liebiao"></i></button></div> '),t._ssrNode('<div class="center">',"</div>",[t._ssrNode('<div class="M-play-control"><button class="sm-btn"><i class="iconfont icon-svgprevious"></i></button> <button class="lg-btn"><i'+t._ssrClass("iconfont",[t.status.playing?"icon-paused":"icon-bofang"])+'></i></button> <button class="sm-btn"><i class="iconfont icon-iconfontsvgnext"></i></button></div> '),t._ssrNode('<div class="M-voice-control">',"</div>",[t._ssrNode('<button class="sm-btn"><i'+t._ssrClass("iconfont",[t.status.silent?"icon-jingyin":"icon-zengdayinliang"])+"></i></button> "),t._ssrNode('<span class="M-all-voice">',"</span>",[n("v-range",{attrs:{barsize:3,tailsize:9},on:{rangeChangeEvent:t.volume},model:{value:t.status.voice,callback:function(e){t.$set(t.status,"voice",e)},expression:"status.voice"}})],1)],2)],2),t._ssrNode(' <div class="footer"><span>'+t._ssrEscape(t._s(t.time.cur)+" / "+t._s(t.time.all))+"</span></div>")],2)],2),t._ssrNode(" "),t._ssrNode('<span class="M-allBar">',"</span>",[n("v-range",{attrs:{max:t.status.duration,barsize:3,tailsize:0,disabled:!0},model:{value:t.status.current,callback:function(e){t.$set(t.status,"current",e)},expression:"status.current"}})],1)],2),t._ssrNode(" <div"+t._ssrClass("M-menu",{"menu-show":t.status.menuShow})+'><div class="M-menu-wrap"><div class="header"><h3 class="list">歌曲列表</h3> <button class="close">\n          ×\n        </button></div> <div class="body"><div class="title item"><div class="item-right">歌手</div> <div class="item-left">歌曲</div></div> '+t._ssrList(t.musics,function(e,n){return'<div class="item"><div class="item-right oneline">'+t._ssrEscape(t._s(e.player))+'</div> <div class="item-left"><div><span'+t._ssrClass(null,["icon",t.status.playing?"icon-play":"icon-pause"])+t._ssrStyle(null,null,{display:e.playing?"":"none"})+"></span> <a>"+t._ssrEscape(t._s(e.name))+'</a></div> <div class="hover"><button title="点击播放" class="sm-btn play"><i class="iconfont icon-tongji"></i></button></div></div></div>'})+"</div></div></div>")],2)},[],!1,function(t){var e=n(123);e.__inject__&&e.__inject__(t)},null,"533aa591").exports,he={name:"MtPaletteButton",props:{offset:{type:Number,default:Math.PI/5},direction:{type:String,default:"lt"},radius:{type:Number,default:90},mainButtonStyle:{type:String,default:""}},data:function(){return{transforming:!1,expanded:!1}},mounted(){this.slotChildren=[];for(let i=0;i<this.$slots.default.length;i++)3!==this.$slots.default[i].elm.nodeType&&this.slotChildren.push(this.$slots.default[i]);let t="",e=Math.PI*(3+Math.max(["lt","t","rt","r","rb","b","lb","l"].indexOf(this.direction),0))/4;for(let i=0;i<this.slotChildren.length;i++){const n=(Math.PI-2*this.offset)/(this.slotChildren.length-1)*i+this.offset+e,r=(Math.cos(n)*this.radius).toFixed(2),o=(Math.sin(n)*this.radius).toFixed(2);t+=".expand .palette-button-"+this._uid+"-sub-"+i+"{transform:translate("+r+"px,"+o+"px) rotate(720deg);transition-delay:"+.03*i+"s}",this.slotChildren[i].elm.className+=" palette-button-"+this._uid+"-sub-"+i}this.styleNode=document.createElement("style"),this.styleNode.type="text/css",this.styleNode.rel="stylesheet",this.styleNode.title="palette button style",this.styleNode.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(this.styleNode)},destroyed(){this.styleNode&&this.styleNode.parentNode.removeChild(this.styleNode)},methods:{toggle(t){this.transforming||(this.expanded?this.collapse(t):this.expand(t))},onMainAnimationEnd(){this.transforming=!1,this.$emit("expanded")},expand(t){this.$backdrop.show({ele:this.$el,click:()=>{this.collapse()}}),this.expanded=!0,this.transforming=!0,this.$emit("expand",t)},collapse(t){this.$backdrop.hide(),this.expanded=!1,this.$emit("collapse",t)}}};var me=Object(ne.a)(he,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"creator-button-wrap"}},[t._ssrNode('<div class="creator-button-box">',"</div>",[t._ssrNode("<div"+t._ssrClass("mint-palette-button",{expand:t.expanded,"mint-palette-button-active":t.transforming})+">","</div>",[t._ssrNode('<div class="mint-sub-button-container">',"</div>",[t._t("default")],2),t._ssrNode(" "),n("el-tooltip",{attrs:{placement:"right",effect:"dark",content:"创作"}},[n("button",{staticClass:"mint-main-button",style:t.mainButtonStyle,on:{click:t.toggle}},[n("i",{staticClass:"el-icon-edit-outline"})])])],2)])])},[],!1,function(t){var e=n(124);e.__inject__&&e.__inject__(t)},null,"58715718").exports,fe=n(3),ge={name:"CreateFeedback",props:{value:{type:Boolean,default:!1}},data(){return{show:this.value,placeholder:"",preContent:"",options:[{label:"功能建议",value:1},{label:"遇到错误",value:2},{label:"资源报错",value:4},{label:"求资源",value:5},{label:"求偶像",value:6},{label:"求漫画",value:7},{label:"其它问题",value:3}],forms:{type:"",desc:""},rules:{type:[{type:"number",required:!0,message:"请选择反馈类型",trigger:"change"}],desc:[{required:!0,max:100,message:"请填写反馈内容，最多100字",trigger:"submit"}]}}},watch:{value(t){this.show=t},show(t){this.$emit("input",t)}},mounted(){this.$channel.$on("open-feedback",({type:t,desc:desc,placeholder:e})=>{this.forms.type=t||"",this.preContent=desc||"{?}",this.placeholder=e||"非常感谢您的反馈，请填写详细信息方便我们解决",this.show=!0})},methods:{submit(){this.$refs.forms.validate(async t=>{if(!t)return!1;await Object(fe.c)(this,{type:this.forms.type,desc:this.preContent.replace("{?}",this.forms.desc.trim()),ua:navigator.userAgent}),this.show=!1,this.$refs.forms.resetFields(),this.$toast.success("反馈成功，感谢您的反馈！")})}}},_e=Object(ne.a)(ge,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{title:"用户反馈","submit-text":"提交","cancel-text":""},on:{submit:t.submit},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("el-form",{ref:"forms",attrs:{model:t.forms,rules:t.rules,"label-width":"55px"}},[n("el-form-item",{attrs:{label:"类型",prop:"type"}},[n("el-select",{attrs:{placeholder:"反馈类型"},model:{value:t.forms.type,callback:function(e){t.$set(t.forms,"type",e)},expression:"forms.type"}},t._l(t.options,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),n("el-form-item",{attrs:{label:"详情",prop:"desc"}},[n("el-input",{attrs:{rows:6,placeholder:t.placeholder,type:"textarea"},model:{value:t.forms.desc,callback:function(e){t.$set(t.forms,"desc",e)},expression:"forms.desc"}})],1)],1)],1)},[],!1,null,null,"4999d6fb").exports,ve=n(74),be=n(72),ye={name:"CreateImageDialog",components:{UploadImageForm:ve.a,CreateAlbumForm:be.a},data:()=>({selectedAlbumId:"",createdAlbum:[],uploadHeaders:{token:""},bangumiRoles:{},bangumis:[],options:[],roles:[],loadingUserBangumiFetch:!1,loadingUploadTypeFetch:!1,loadingUserAlbumFetch:!1,show:!1,submitting:!1,form:{bangumiId:"",size:"",tags:"",roleId:"",albumId:"",creator:!1,images:[]},albumForm:{name:"",bangumiId:"",poster:[],isCartoon:!1,creator:!1},action:"上传图片",exceed:10,pendingUpload:0}),computed:{albums(){return this.$store.state.image.albums},user(){return this.$store.state.user},zone(){return this.user.zone}},mounted(){this.$channel.$on("show-upload-image-modal",()=>{this.show=!0})},methods:{handleAlbumCreated(t){this.createdAlbum.unshift(t),this.selectedAlbumId=t.id,this.action="上传图片"}}},$e=Object(ne.a)(ye,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"create-image-modal",attrs:{loading:t.submitting,"click-close":!1,footer:!1,title:"上传图片"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[n("el-radio-group",{staticStyle:{"margin-bottom":"30px"},attrs:{size:"mini"},model:{value:t.action,callback:function(e){t.action=e},expression:"action"}},[n("el-radio-button",{attrs:{label:"上传图片"}}),t._v(" "),n("el-radio-button",{attrs:{label:"创建相册"}})],1),t._v(" "),"上传图片"===t.action?n("upload-image-form",{attrs:{"selected-album-id":t.selectedAlbumId,"append-albums":t.createdAlbum}}):"创建相册"===t.action?n("create-album-form",{on:{success:t.handleAlbumCreated}}):t._e()],1)},[],!1,null,null,"b2aeafb6").exports,xe=n(6),we=n(65),ke={name:"CreateQuestionDialog",mixins:[xe.a],data:()=>({showQuestionModal:!1,form:{title:"",tags:[],content:""},rules:{title:[{validator:(t,e,n)=>{e||n(new Error("请输入问题标题")),e.length>30&&n(new Error("标题最多 30 个字")),n()},trigger:"change"}],tags:[{validator:(t,e,n)=>{e.length||n(new Error("至少选择一个相关番剧")),e.length>5&&n(new Error("最多 5 个话题")),n()},trigger:"submit"}]},images:[],exceed:7,submitting:!1}),mounted(){this.$channel.$on("show-create-question-modal",()=>{this.$store.state.login?this.showQuestionModal=!0:this.$channel.$emit("sign-in")})},methods:{beforeUpload(t){return this.uploadConfig.max=5,this.uploadConfig.pathPrefix=`user/${this.$store.state.user.id}/question`,this.beforeImageUpload(t)},handleError(t,e){console.log(t),this.images.forEach((t,n)=>{t.id===e.uid&&this.images.splice(n,1)}),this.$toast.error(`图片：${e.name} 上传失败`)},handleRemove(t){this.images.forEach((e,n)=>{e.id===t.uid&&this.images.splice(n,1)})},handleExceed(){this.$toast.error(`最多可上传 ${this.exceed} 张图片!`)},handleSuccess(t,e){this.images.push({id:e.uid,img:t.data})},submit(){this.$refs.form.validate(t=>{if(!t)return!1;this.submitting||(this.submitting=!0,this.$captcha({ctx:this,success:async({data:data})=>{try{const t=await Object(we.a)(this,{title:this.form.title,tags:this.form.tags,intro:this.form.content.trim().substring(0,120),content:this.form.content.trim(),images:this.images.map(t=>t.img),geetest:data});this.images=[],this.$refs.form.resetFields(),this.$emit("submit"),this.submitting=!1,this.$toast.success(t.message).then(()=>{window.location=this.$alias.question(t.data)})}catch(t){this.$toast.error(t),this.submitting=!1}},close:()=>{this.submitting=!1}}))})}}};var Ce={name:"SideTools",components:{vCreator:me,vFeedback:_e,CreateImageDialog:$e,CreateQuestionDialog:Object(ne.a)(ke,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{footer:!1,"click-close":!1,title:"写下你的问题"},model:{value:t.showQuestionModal,callback:function(e){t.showQuestionModal=e},expression:"showQuestionModal"}},[n("el-form",{ref:"form",attrs:{id:"create-question-form",model:t.form,rules:t.rules,disabled:t.submitting,"label-width":"42px"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{attrs:{maxlength:"30",placeholder:"问题标题"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title","string"==typeof e?e.trim():e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"番剧",prop:"tags"}},[n("bangumi-search",{attrs:{multiple:!0,followed:!0,limit:5,placeholder:"添加番剧标签"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述",prop:"content"}},[n("el-input",{attrs:{rows:5,placeholder:"问题背景，条件等详细信息",type:"textarea",maxlength:"1000"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"图片"}},[n("el-upload",{ref:"uploader",attrs:{data:t.uploadHeaders,"on-error":t.handleError,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"on-exceed":t.handleExceed,limit:t.exceed,"before-upload":t.beforeUpload,action:t.imageUploadAction,accept:t.imageUploadAccept,multiple:"","list-type":"picture-card"}},[n("i",{staticClass:"el-icon-plus"})])],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{loading:t.submitting,type:"primary"},on:{click:t.submit}},[t._v("提交问题")])],1)],1)],1)},[],!1,function(t){var e=n(128);e.__inject__&&e.__inject__(t)},null,"2f636025").exports},data:()=>({showToTop:!1,showCoinDialog:!1}),computed:{isGuest(){return!this.$store.state.login},show(){return-1===["index","about-invite-id","app-download"].indexOf(this.$route.name)},userLevel(){return this.isGuest?0:this.$store.state.user.exp.level}},mounted(){this.computeShow(),document.addEventListener("scroll",this.$utils.throttle(()=>{this.computeShow()},500)),window.addEventListener("resize",this.$utils.throttle(()=>{this.computeShow()},500))},methods:{handlePostClick(){if(!this.$store.state.login)return this.$toast.info("继续操作前请先登录"),void this.$channel.$emit("sign-in");window.location="/post/create"},handleQuestionClick(){if(!this.$store.state.login)return this.$toast.info("继续操作前请先登录"),void this.$channel.$emit("sign-in");this.userLevel<3?this.$toast.info("3级以后才能提问"):this.$channel.$emit("show-create-question-modal")},handleScoreClick(){this.userLevel<3?this.$toast.info("3级以后才能写漫评"):window.location=this.$alias.createScore},handleImageClick(){if(!this.$store.state.login)return this.$toast.info("继续操作前请先登录"),void this.$channel.$emit("sign-in");this.$channel.$emit("show-upload-image-modal")},handleFeedbackClick(){this.$channel.$emit("open-feedback",{type:"",desc:"{?}",placeholder:"非常感谢您的反馈，请填写详细信息方便我们解决"})},computeShow(){this.showToTop=window.scrollY>window.innerHeight}}};var Se=Object(ne.a)(Ce,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],attrs:{id:"side-tools"}},[n("v-creator",[n("el-tooltip",{attrs:{placement:"left",effect:"dark",content:"传图片"}},[n("button",{staticClass:"creator-btn el-icon-picture-outline",on:{click:t.handleImageClick}})]),t._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"dark",content:"发帖"}},[n("button",{staticClass:"creator-btn el-icon-edit",on:{click:t.handlePostClick}})]),t._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"dark",content:"写漫评"}},[n("button",{staticClass:"creator-btn el-icon-edit-outline",on:{click:t.handleScoreClick}})]),t._v(" "),n("el-tooltip",{attrs:{placement:"top",effect:"dark",content:"提问"}},[n("button",{staticClass:"creator-btn el-icon-printer",on:{click:t.handleQuestionClick}})])],1),t._ssrNode(" "),t._ssrNode('<div class="creator-button-box">',"</div>",[n("el-tooltip",{attrs:{placement:"right",effect:"dark",content:"反馈"}},[n("button",{staticClass:"tool-btn feedback-btn",on:{click:t.handleFeedbackClick}},[n("i",{staticClass:"el-icon-service"})])]),t._ssrNode(" "),n("transition",{attrs:{name:"el-fade-in"}},[t.showToTop?n("el-tooltip",{attrs:{placement:"right",effect:"dark",content:"返回"}},[n("button",{staticClass:"tool-btn top-btn",on:{click:function(e){return t.$scrollToY(0)}}},[n("i",{staticClass:"el-icon-arrow-up"})])]):n("el-tooltip",{attrs:{placement:"right",effect:"dark",content:"团子"}},[n("button",{staticClass:"tool-btn coin-intro-btn",on:{click:function(e){t.showCoinDialog=!0}}},[n("i",{staticClass:"iconfont icon-fantuan"})])])],1)],2),t._ssrNode(" "),t.isGuest?t._e():[n("create-question-dialog"),t._ssrNode(" "),n("create-image-dialog")],t._ssrNode(" "),n("v-feedback"),t._ssrNode(" "),n("v-dialog",{staticClass:"intro-coin-dialog",attrs:{header:!1,footer:!1,close:!1,width:"450px",title:"什么是团子和光玉？"},model:{value:t.showCoinDialog,callback:function(e){t.showCoinDialog=e},expression:"showCoinDialog"}},[n("div",{staticClass:"intro-slide"},[n("div",{staticClass:"bg"})]),t._v(" "),n("div",{staticClass:"intro-content"},[n("p",[t._v("什么是团子？")]),t._v(" "),n("ul",[n("li",[t._v("团子是 calibur 站内的一种虚拟币")]),t._v(" "),n("li",[t._v("大家可通过每日签到、邀请注册、站内活跃来获得团子")]),t._v(" "),n("li",[t._v("团子是无法提现的，现阶段团子可以用来：")]),t._v(" "),n("li",[t._v("—— 观看最新一集的新番")]),t._v(" "),n("li",[t._v("—— 为自己喜欢的偶像应援")]),t._v(" "),n("li",[t._v("—— 给其他人发表的原创内容投食")]),t._v(" "),n("li",[t._v("未来会开发出电商系统，到时候团子可以用来购买商品")])]),t._v(" "),n("p",[t._v("什么是光玉？")]),t._v(" "),n("ul",[n("li",[t._v("光玉就是可提现的团子")]),t._v(" "),n("li",[t._v("1光玉 = 1人民币")]),t._v(" "),n("li",[t._v("目前获得光玉的途径只能是获得其他人的投食")]),t._v(" "),n("li",[t._v("只有原创内容才能给开启投食功能")]),t._v(" "),n("li",[t._v("如果你集齐了100个光玉，就来召唤站长提现吧！")])])])])],2)},[],!1,function(t){var e=n(129);e.__inject__&&e.__inject__(t)},null,"22ec40b0").exports,Ee=(n(130),n(2),n(78)),Ie={name:"SignInForm",components:{"el-checkbox":n.n(Ee).a},data:()=>({form:{access:"",secret:"",remember:!0},rule:{access:[{validator:(t,e,n)=>e?11!==e.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(t,e,n)=>""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},loading:!1,watchPwd:!1,showOAuth:!0}),methods:{submitForm(){this.$refs.form.validate(t=>{if(!t)return!1;this.login()})},login(){this.loading||(this.loading=!0,this.$captcha({ctx:this,success:({data:data})=>{Object(fe.l)(this,{access:this.form.access,secret:this.form.secret,remember:this.form.remember,geetest:data}).then(t=>{this.$cookie.set("JWT-TOKEN",t,{expires:this.form.remember?365:1}),window.location.reload()}).catch(t=>{this.$toast.error(t),this.loading=!1})},close:()=>{this.loading=!1}}))},showReset(){this.$emit("to-reset"),this.$refs.form.resetFields()},showRegister(){this.$emit("to-register"),this.$refs.form.resetFields()}}};var Ne=Object(ne.a)(Ie,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-in-form"},[t._ssrNode("<img"+t._ssrAttr("src",t.$resize("https://image.calibur.tv/owner/logo/calibur-blue-new.png",{width:600,height:200}))+' alt="sign-logo" class="logo"> '),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机（填写常用手机号，用于登录）"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access","string"==typeof e?e.trim():e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:t.watchPwd?"text":"password",placeholder:"密码（6-16个字符组成，区分大小写）"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret","string"==typeof e?e.trim():e)},expression:"form.secret"}}),t._v(" "),t.form.secret.length>5?n("button",{staticClass:"watch-pwd",attrs:{type:"button"},on:{click:function(e){t.watchPwd=!t.watchPwd}}},[n("i",{staticClass:"iconfont icon-ai-eye"})]):t._e()],1),t._v(" "),n("el-form-item",{staticClass:"sign-in-opt"},[n("div",{staticClass:"opt-container"},[n("el-checkbox",{model:{value:t.form.remember,callback:function(e){t.$set(t.form,"remember",e)},expression:"form.remember"}},[t._v("记住我")]),t._v(" "),t.showOAuth?n("div",{staticClass:"provider"},[n("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/qq?from=sign"}},[n("i",{staticClass:"iconfont icon-qq"})]),t._v(" "),n("a",{attrs:{href:"https://api.calibur.tv/callback/oauth2/wechat?from=sign"}},[n("i",{staticClass:"iconfont icon-v-chat"})])]):n("button",{attrs:{type:"button"},on:{click:function(e){t.showOAuth=!0}}},[t._v("\n          社交账号登录\n        ")])],1)]),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.loading,type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1)],1),t._ssrNode(' <div class="others"><a>忘记密码?&gt;</a> <a>点击注册»</a></div>')],2)},[],!1,function(t){var e=n(131);e.__inject__&&e.__inject__(t)},null,"e81e61c8").exports,Te=n(52),Oe={name:"ResetPasswordForm",data:()=>({form:{access:"",secret:"",authCode:""},rule:{access:[{validator:(t,e,n)=>e?11!==e.length?n(new Error("请填写11位手机号")):void n():n(new Error("请填写手机号")),trigger:"blur"}],secret:[{validator:(t,e,n)=>""===e?n(new Error("请填写登录密码")):e.length<6?n(new Error("密码不能小于6位")):e.length>16?n(new Error("密码不能大于16位")):void n(),trigger:"blur"}]},step:0,timeout:0}),computed:{submitBtnText(){return 0===this.step?"立即重置":1===this.step?"提交中...":2===this.step?"短信已发送":3===this.step?"已重置":"立即重置"},submitBtnLoading(){return 1===this.step||3===this.step},submitBtnDisabled(){return 0!==this.timeout&&0===this.step||3===this.step}},methods:{submitForm(){this.$refs.form.validate(t=>{if(!t)return!1;0===this.step&&this.getResetAuthCode(),2===this.step&&this.openConfirmModal()})},getResetAuthCode(){this.step=1,this.$captcha({ctx:this,success:async({data:data})=>{try{await Object(fe.t)(this,{type:"forgot_password",phone_number:this.form.access,geetest:data}),this.step=2,this.openConfirmModal()}catch(t){this.$toast.error(t),this.step=0}finally{this.timeout=60;const t=setInterval(()=>{--this.timeout||(this.step=0,clearInterval(t))},1e3)}},close:()=>{this.step=0}})},openConfirmModal(){this.$prompt("请输入收到的验证码","短信已发送",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/^\d{6}$/,inputErrorMessage:"验证码格式不正确"}).then(({value:t})=>{this.form.authCode=t,this.step=3,this.signReset()}).catch(()=>{})},async signReset(){try{const t=await Object(fe.s)(this,{access:this.form.access,authCode:this.form.authCode,secret:this.form.secret});this.$toast.success(t),this.showLogin()}catch(t){this.$toast.error(t)}finally{this.step=0}},showLogin(){this.$emit("to-login"),this.$refs.form.resetFields()},showRegister(){this.$emit("to-register"),this.$refs.form.resetFields()}}};var je=Object(ne.a)(Oe,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reset-password-form"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule}},[n("el-form-item",{attrs:{prop:"access"}},[n("el-input",{attrs:{type:"text",placeholder:"手机号","auto-complete":"off"},model:{value:t.form.access,callback:function(e){t.$set(t.form,"access","string"==typeof e?e.trim():e)},expression:"form.access"}})],1),t._v(" "),n("el-form-item",{attrs:{prop:"secret"}},[n("el-input",{attrs:{type:"text",placeholder:"新密码","auto-complete":"off"},model:{value:t.form.secret,callback:function(e){t.$set(t.form,"secret","string"==typeof e?e.trim():e)},expression:"form.secret"}})],1),t._v(" "),n("el-form-item",[n("el-button",{staticClass:"submit-btn",attrs:{loading:t.submitBtnLoading,disabled:t.submitBtnDisabled,type:"primary"},on:{click:t.submitForm}},[t._v("\n        "+t._s(t.submitBtnText)+"\n        "),t.timeout?[t._v("\n          （"+t._s(t.timeout)+"s 后可重新获取）\n        ")]:t._e()],2)],1)],1),t._ssrNode(' <div class="others"><a>返回登录&gt;</a> <a>点击注册»</a></div>')],2)},[],!1,function(t){var e=n(133);e.__inject__&&e.__inject__(t)},null,"48c25ae8").exports,qe={name:"VSign",components:{SignUpForm:Te.a,SignInForm:Ne,ResetPasswordForm:je},data:()=>({showModal:!1,showSignIn:!1,showSignUp:!1,showReset:!1}),computed:{isGuest(){return!this.$store.state.login}},watch:{showModal(t){t?this.$backdrop.show({ele:this.$refs.wrap}):this.$backdrop.hide()}},beforeMount(){this.$channel.$on("sign-in",()=>{this.showLogin()}),this.$channel.$on("sign-up",()=>{this.showRegister()})},methods:{showLogin(){this.showReset=!1,this.showModal=!0,this.showSignIn=!0,this.showSignUp=!1},showRegister(){this.showModal=!0,this.showSignUp=!0,this.showSignIn=!1},hiddenSign(){this.showModal=!1,this.showSignIn=!1,this.showSignUp=!1,this.showReset=!1}}};var Ae=Object(ne.a)(qe,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"sign-container"},[t.isGuest?t._ssrNode('<div id="space3D"'+t._ssrClass(null,[t.showModal?"space-enter":"space-leave"])+">","</div>",[t._ssrNode('<div class="sign-modal-wrap abs">',"</div>",[t._ssrNode("<div"+t._ssrClass("sign-modal sign-in-modal",{"sign-in-init":!t.showSignIn&&!t.showSignUp,"sign-in-show":t.showSignIn&&!t.showSignUp,"sign-in-turn":!t.showSignIn&&t.showSignUp})+">","</div>",[t._ssrNode('<div class="form-container"'+t._ssrStyle(null,null,{display:t.showReset?"":"none"})+">","</div>",[t._ssrNode("<img"+t._ssrAttr("src",t.$resize("https://image.calibur.tv/owner/logo/calibur-blue-new.png",{width:600,height:200}))+' alt="sign-logo" class="logo" style="margin-top: -13px"> '),n("reset-password-form",{on:{"to-login":function(e){t.showReset=!1},"to-register":t.showRegister}})],2),t._ssrNode(" "),t._ssrNode('<div class="form-container"'+t._ssrStyle(null,null,{display:t.showReset?"none":""})+">","</div>",[n("sign-in-form",{on:{"to-reset":function(e){t.showReset=!0},"to-register":t.showRegister}})],1)],2),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass("sign-modal sign-up-modal",{"sign-up-init":!t.showSignUp&&!t.showSignIn,"sign-up-show":t.showSignUp&&!t.showSignIn,"sign-up-turn":!t.showSignUp&&t.showSignIn})+">","</div>",[t._ssrNode('<div class="slogan"></div> '),t._ssrNode('<div class="form-container">',"</div>",[n("sign-up-form",{on:{"to-login":t.showLogin}})],1)],2)],2)]):t._e()])},[],!1,function(t){var e=n(134);e.__inject__&&e.__inject__(t)},null,"3db79001").exports,Me={name:"GiftModal",components:{SignUpForm:Te.a},data:()=>({user:null,showDialog:!1}),computed:{query(){return this.$route.query},paramsIsOK(){return!!(this.query.uid&&/^\d+$/.test(this.query.uid)&&this.query.time&&/^\d+$/.test(this.query.time)&&Date.now()<=1e3*this.query.time&&this.query.key===this.$md5(`${this.query.uid}-the-world-${this.query.time}`))},isGuest(){return!this.$store.state.haveAuthToken}},mounted(){this.paramsIsOK&&this.isGuest&&this.getGiftUser()},methods:{getGiftUser(){Object(fe.j)(this,{id:this.query.uid}).then(data=>{this.user=data,this.showDialog=!0})}}};var Ue=Object(ne.a)(Me,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"invite-gift-modal",attrs:{header:!1,footer:!1,close:!1,width:"500px"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[t.user?n("div",{staticClass:"content"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.user.avatar}})]),t._v(" "),n("div",{staticClass:"tips"},[n("p",[n("span",[t._v("这个页面是")]),t._v(" "),n("a",{attrs:{href:t.$alias.user(t.user.zone),target:"_blank"},domProps:{textContent:t._s(t.user.nickname)}}),t._v(" "),n("span",[t._v("分享给你的")])]),t._v(" "),n("p",[t._v("\n        在这里注册，你们都将会获得\n        "),n("a",{attrs:{href:"/app/notice/1",target:"_blank"}},[t._v("\n          「团子」\n        ")]),t._v("\n        奖励\n      ")]),t._v(" "),n("p",[t._v("团子可以用来看视频，或经过转化之后提现，1团子相当于1人民币")]),t._v(" "),n("p",[t._v("更重要的是，calibur 的发展需要你，请加入我们吧")])]),t._v(" "),n("sign-up-form",{attrs:{"invite-code":t.user.id}}),t._v(" "),n("p",{staticClass:"expired"},[n("span",[t._v("该邀请将于")]),t._v(" "),n("v-time",{model:{value:t.query.time,callback:function(e){t.$set(t.query,"time",e)},expression:"query.time"}}),t._v(" "),n("span",[t._v("失效")])],1)],1):t._e()])},[],!1,function(t){var e=n(135);e.__inject__&&e.__inject__(t)},null,"6e96b077").exports,Be={name:"DefaultLayout",components:{vFooter:se.a,SideTools:Se,vMusic:pe,GiftModal:Ue,vSign:Ae},mounted(){this.$store.dispatch("initAuth"),this.$store.dispatch("bangumi/getAllBangumi")}};var Le=Object(ne.a)(Be,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default-layout"},[e("nuxt",{staticClass:"main-view"}),this._ssrNode(" "),e("v-footer"),this._ssrNode(" "),e("v-music"),this._ssrNode(" "),e("not-ssr",[e("side-tools")],1),this._ssrNode(" "),e("not-ssr",[e("v-sign")],1),this._ssrNode(" "),e("not-ssr",[e("gift-modal")],1)],2)},[],!1,function(t){var e=n(136);e.__inject__&&e.__inject__(t)},null,"0a757240").exports,Re=(n(137),n(79)),Pe=n.n(Re),De=n(62),ze={name:"WriteLayout",directives:{Loading:Pe.a},components:{JsonContent:De.a},data:()=>({submitting:!1,preview:!1,saving:null}),computed:{id(){return this.$route.params.id},isAuth(){return this.$store.state.isAuth},user(){return this.$store.state.user},sections(){return this.$store.state.editor.sections},published(){return!!this.$store.state.editor.resource&&!!this.$store.state.editor.resource.published_at}},mounted(){this.$store.dispatch("initAuth"),this.$store.dispatch("bangumi/getAllBangumi"),this.$channel.$on("write-submit",t=>{this.submitting=t}),this.$channel.$on("auto-save",t=>{this.saving=t})},methods:{emitPublish(){this.$channel.$emit("write-publish")},emitSave(){this.$channel.$emit("write-save")},emitPreview(){this.preview=!0},emitDestroy(){this.$channel.$emit("write-destroy")}}};const Fe={_default:Le,_write:Object(ne.a)(ze,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.submitting,expression:"submitting"}],attrs:{id:"layout-write"}},[t._ssrNode("<header>","</header>",[t._ssrNode('<div class="header-container">',"</div>",[t._ssrNode("<img"+t._ssrAttr("src",t.$resize("https://image.calibur.tv/owner/logo-new/logo.png",{width:80}))+' alt="logo" class="logo"> <div class="slogan"><p>calibur.tv</p> <p>天下漫友是一家</p></div> '),t.user?[n("el-tooltip",{attrs:{content:t.user.nickname,placement:"bottom",effect:"dark"}},[n("button",{staticClass:"avatar"},[n("v-img",{attrs:{src:t.user.avatar,avatar:!0,width:30,height:30}})],1)]),t._ssrNode(" "),n("el-button",{staticClass:"primary",attrs:{size:"small",icon:"el-icon-share",round:"",plain:""},on:{click:t.emitPublish}},[t._v(t._s(t.id?"发布更新":"发布"))]),t._ssrNode(" "),t.published?t._e():n("el-button",{staticClass:"warning",attrs:{size:"small",icon:"el-icon-upload2",plain:"",round:""},on:{click:t.emitSave}},[t._v("保存")]),t._ssrNode(" "),n("el-button",{staticClass:"success",attrs:{size:"small",icon:"el-icon-view",plain:"",round:""},on:{click:t.emitPreview}},[t._v("预览")]),t._ssrNode(' <span class="saving-flag">'+t._ssrEscape("\n          "+t._s(!1===t.saving?"已保存":!0===t.saving?"正在保存中...":"")+"\n        ")+"</span>")]:t._e()],2)]),t._ssrNode(" "),t.isAuth?[t.user?[n("nuxt",{staticClass:"main-view"}),t._ssrNode(" "),n("v-dialog",{attrs:{fullscreen:!0,header:!1,footer:!1},model:{value:t.preview,callback:function(e){t.preview=e},expression:"preview"}},[n("div",{staticStyle:{"max-width":"700px",margin:"20px auto"}},[n("json-content",{attrs:{show:t.preview,content:t.sections}})],1)])]:t._ssrNode('<div class="main-view not-login">',"</div>",[n("el-button",{attrs:{type:"primary",round:""},on:{click:function(e){return t.$channel.$emit("sign-in")}}},[t._v("\n        继续操作前请先登录\n      ")])],1)]:t._e()],2)},[],!1,function(t){var e=n(143);e.__inject__&&e.__inject__(t)},null,"5c7f429e").exports};var Ge={head:{htmlAttrs:{lang:"zh-CN"},bodyAttrs:{id:"calibur-tv"},meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1"},{"http-equiv":"X-UA-Compatible",content:"IE=edge,chrome=1"},{name:"force-rendering",content:"webkit"},{hid:"description",name:"description",content:"calibur.tv - 二次元股市"},{hid:"keywords",name:"keywords",content:"calibur，C站, 二次元股市"}],link:[{rel:"shortcut icon",type:"image/x-icon",href:"https://image.calibur.tv/favicon.ico"}],script:[{innerHTML:'var _hmt=_hmt||[];(function (){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?c10304a2f70ee2ddf8d2818551d37a4b";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s)})();',type:"text/javascript",async:!0},{innerHTML:"(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js'}else{bp.src='http://push.zhanzhang.baidu.com/push.js'}var s=document.getElementsByTagName(\"script\")[0];s.parentNode.insertBefore(bp,s)})();",type:"text/javascript",async:!0}],__dangerouslyDisableSanitizers:"script",style:[]},render(t,e){const n=t("NuxtLoading",{ref:"loading"}),r=t(this.layout||"nuxt"),o=t("div",{domProps:{id:"__layout"},key:this.layoutName},[r]),l=t("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter(t){window.$nuxt.$nextTick(()=>{window.$nuxt.$emit("triggerScroll")})}}},[o]);return t("div",{domProps:{id:"__nuxt"}},[n,l])},data:()=>({isOnline:!0,layout:null,layoutName:""}),beforeCreate(){l.a.util.defineReactive(this,"nuxt",this.$options.nuxt)},created(){l.a.prototype.$nuxt=this,this.error=this.nuxt.error},mounted(){this.$loading=this.$refs.loading},watch:{"nuxt.err":"errorChanged"},computed:{isOffline(){return!this.isOnline}},methods:{refreshOnlineStatus(){0},errorChanged(){this.nuxt.err&&this.$loading&&(this.$loading.fail&&this.$loading.fail(),this.$loading.finish&&this.$loading.finish())},setLayout(t){return t&&Fe["_"+t]||(t="default"),this.layoutName=t,this.layout=Fe["_"+t],this.layout},loadLayout:t=>(t&&Fe["_"+t]||(t="default"),Promise.resolve(Fe["_"+t]))},components:{NuxtLoading:le}},We=n(58),He=n.n(We);l.a.use(He.a);const Qe=console,Ke=["state","getters","actions","mutations"];let Ve,Ze={};!function(){const t=(Ve=n(144)).keys().sort((t,e)=>{let n=t.split("/").length-e.split("/").length;return 0===n&&t.includes("/index.")?n=-1:0===n&&e.includes("/index.")&&(n=1),n}),e=t.find(path=>path.includes("./index."));if(e&&(Ze=Ye(e,{isRoot:!0})),"function"==typeof Ze)return Qe.warn("Classic mode for store/ is deprecated and will be removed in Nuxt 3.");Ze.modules=Ze.modules||{};for(const path of t){const t=path.replace(/^\.\//,"").replace(/\.(js|mjs|ts)$/,"");if("index"===t)continue;const e=t.split("/");let n=e[e.length-1];const r=Ye(path,{isState:"state"===n});if(Ke.includes(n)){const t=n;ts(Xe(Ze,e,{isProperty:!0}),r,t);continue}"index"===n&&(e.pop(),n=e[e.length-1]);const o=Xe(Ze,e);for(const t of Ke)ts(o,r[t],t)}}();const Je=Ze instanceof Function?Ze:()=>new He.a.Store(Object.assign({strict:!1},Ze));function Ye(path,{isRoot:t=!1,isState:e=!1}={}){const n=Ve(path);let r=n.default||n;if(e&&"function"!=typeof r){Qe.warn(`${path} should export a method that returns an object`);const t=Object.assign({},r);return()=>t}if(t&&r.commit)throw new Error("[nuxt] store/"+path.replace("./","")+" should export a method that returns a Vuex instance.");if(t&&"function"!=typeof r&&(r=Object.assign({},r)),r.state&&"function"!=typeof r.state){Qe.warn(`'state' should be a method that returns an object in ${path}`);const t=Object.assign({},r.state);r=Object.assign({},r,{state:()=>t})}return r}function Xe(t,e,{isProperty:n=!1}={}){if(!e.length||n&&1===e.length)return t;const r=e.shift();return t.modules[r]=t.modules[r]||{},t.modules[r].namespaced=!0,t.modules[r].modules=t.modules[r].modules||{},Xe(t.modules[r],e,{isProperty:n})}function ts(t,e,n){e&&("state"===n?t.state=e||t.state:t[n]=Object.assign({},t[n],e))}var es=n(80),ss=n.n(es);const is={setHeader(t,e,n="common"){for(let r of Array.isArray(n)?n:[n]){if(!e)return void delete this.defaults.headers[r][t];this.defaults.headers[r][t]=e}},setToken(t,e,n="common"){const r=t?(e?e+" ":"")+t:null;this.setHeader("Authorization",r,n)},onRequest(t){this.interceptors.request.use(e=>t(e)||e)},onResponse(t){this.interceptors.response.use(e=>t(e)||e)},onRequestError(t){this.interceptors.request.use(void 0,e=>t(e)||Promise.reject(e))},onResponseError(t){this.interceptors.response.use(void 0,e=>t(e)||Promise.reject(e))},onError(t){this.onRequestError(t),this.onResponseError(t)}};for(let t of["request","delete","get","head","options","post","put","patch"])is["$"+t]=function(){return this[t].apply(this,arguments).then(t=>t&&t.data)};var ns=(t,e)=>{const n={baseURL:process.env._AXIOS_BASE_URL_||"http://localhost:3000/",headers:{common:{Accept:"application/json, text/plain, */*"},delete:{},get:{},head:{},post:{},put:{},patch:{}}};n.headers.common=t.req&&t.req.headers?Object.assign({},t.req.headers):{},delete n.headers.common.accept,delete n.headers.common.host,delete n.headers.common["cf-ray"],delete n.headers.common["cf-connecting-ip"],n.headers.common["Accept-Encoding"]="gzip, deflate";const r=ss.a.create(n);(t=>{for(let e in is)t[e]=is[e].bind(t)})(r),t.$axios=r,e("axios",r)},rs=(n(150),n(81)),os=n.n(rs),as=n(82),ls=n.n(as),cs=n(54),us=({$axios:t,app:e})=>{const n="undefined"!=typeof window;t.setHeader("Accept","application/x.api.latest+json"),e.store.state.login?t.setToken(e.store.state.user.token,"Bearer"):t.setToken(Object(cs.a)(n?"":e.context.req),"Bearer"),t.onRequest(t=>{t.baseURL=n?"https://api.calibur.tv/":"http://localhost/",t.timeout=1e4;const e=t.method.toLocaleUpperCase();n&&M.sentry.setRequestStack({url:t.url,params:"GET"===e?t.params:t.data,method:e})}),t.onResponse(t=>{n&&M.sentry.setResponseStack({url:t.request.responseURL,requestId:t.headers["x-request-id"],viaId:t.headers["x-via"]||"none",code:200});const e=t.headers.authorization;return e&&Object.assign(t.data.data,{token:e.split("Bearer ").pop()}),t.data}),t.onError(t=>{const e=(t=>/timeout of/.test(t.message)?(t.statusCode=504,t.message="网络请求超时，请稍候再试！",t):t.response?(t.statusCode=t.response.status,t.message=t.response.data.message,t):(t.statusCode=502,t.message="网络错误，请刷新网页重试！",t))(t);return n&&(M.sentry.setResponseStack({url:e.request&&e.request.responseURL||"unknown",code:e.statusCode,message:e.message}),/\/door\/refresh/.test(e.config.url)&&(ls.a.remove("JWT-TOKEN"),setTimeout(()=>{window.location.reload()},1500)),os.a.error(e.message)),Promise.reject(e)})},ds=(n(151),n(83)),ps=n.n(ds),hs=(n(152),n(84)),ms=n.n(hs),fs=(n(153),n(85)),gs=n.n(fs),_s=(n(154),n(86)),vs=n.n(_s),bs=(n(155),n(87)),ys=n.n(bs),$s=(n(156),n(88)),xs=n.n($s),ws=(n(157),n(89)),ks=n.n(ws),Cs=(n(158),n(90)),Ss=n.n(Cs),Es=(n(159),n(91)),Is=n.n(Es),Ns=(n(160),n(92)),Ts=n.n(Ns),Os=(n(161),n(93)),js=n.n(Os),qs=(n(162),n(94)),As=n.n(qs),Ms=(n(163),n(95)),Us=n.n(Ms),Bs=(n(164),n(96)),Ls=n.n(Bs),Rs=(n(165),n(97)),Ps=n.n(Rs),Ds=(n(166),n(98)),zs=n.n(Ds),Fs=(n(167),n(99)),Gs=n.n(Fs),Ws=(n(168),n(100)),Hs=n.n(Ws),Qs=(n(169),n(101)),Ks=n.n(Qs),Vs=(n(170),n(102)),Zs=n.n(Vs),Js=(n(171),n(103)),Ys=n.n(Js),Xs=(n(172),n(104)),ti=n.n(Xs),ei=(n(173),n(105)),si=n.n(ei),ii=(n(174),n(106)),ni=n.n(ii),ri=(n(175),n(107)),oi=n.n(ri),ai=n(59),ci=n.n(ai);l.a.component(ci.a.name,ci.a),l.a.use(oi.a),l.a.use(ni.a),l.a.use(si.a),l.a.use(ti.a),l.a.use(Ys.a),l.a.use(Zs.a),l.a.use(Ks.a),l.a.use(Hs.a),l.a.use(Gs.a),l.a.use(zs.a),l.a.use(Ps.a),l.a.use(Ls.a),l.a.use(Us.a),l.a.use(As.a),l.a.use(js.a),l.a.use(Ts.a),l.a.use(Is.a),l.a.use(Ss.a),l.a.use(ks.a),l.a.use(xs.a),l.a.use(ys.a),l.a.use(vs.a),l.a.use(gs.a),l.a.use(ms.a),l.a.use(ps.a);var ui={index:"/",__query(t,e){if(!e)return t;let n="?";return Object.keys(e).forEach(t=>{n+=`${t}=${e[t]}&`}),`${t.split("?").shift()}${n.substring(0,n.length-1)}`},url(t,e){return this.__query(t,e)},user:(t,path="")=>`/user/${t}/${path}`,bangumi:(t,path="")=>`/bangumi/${t}/${path}`,video:t=>`/video/${t}`,score:t=>`/review/${t}`,image:t=>`/pin/${t}`,post(t,e){return this.__query(`/post/${t}`,e)},bangumiTag:t=>t?`/bangumi/tags?id=${t}`:"/bangumi/tags",bangumiNews:"/bangumi/news",bangumiTimeline:"/bangumi/timeline",cartoonRole:t=>`/role/${t}`,editScore:t=>`/review/create?id=${t}`,world:t=>`/world/${t}`,question:t=>`/qaq/${t}`,answer:t=>`/soga/${t}`,createScore:"/review/create",roleTrending:"/role/trending"},di=n(108),pi=n.n(di),hi=n(53),mi={shortenNumber:t=>t>1e3?`${Math.floor(t/1e3*10)/10}k`:t,camelize(t,e=!0){const n=t.replace(/(?:^|[-])(\w)/g,(t,e)=>e?e.toUpperCase():"");return e?n:n[0].toLowerCase()+n.substring(1)},setStyle(element,t,e){if(element&&t)if("object"==typeof t)for(const e in t)t.hasOwnProperty(e)&&this.setStyle(element,e,t[e]);else"opacity"===(t=this.camelize(t,!1))&&Number(document.documentMode)<9?element.style.filter=isNaN(e)?"":`alpha(opacity=${100*e})`:element.style[t]=e},orderBy:n.n(hi).a,throttle:pi.a,timeLong(time){const t=/^\d+$/.test(time)?13===time.toString().length?parseInt((time-0)/1e3,10):1e3*time:time.replace(/-/g,"/"),e=new Date(t);return`${e.getFullYear()}-${`0${e.getMonth()+1}`.substr(-2)}-${`0${e.getDate()}`.substr(-2)} ${`0${e.getHours()}`.substr(-2)}:${`0${e.getMinutes()}`.substr(-2)}:${`0${e.getSeconds()}`.substr(-2)}`},truncate:(t="",e=200,n=0)=>t.substring(n,e),createFileName:({userId:t,type:e,file:n})=>`user/${t}/${e}/${(new Date).getTime()}-${Math.random().toString(36).substring(3,6)}.${n.type.split("/").pop()}`,getOffsetTop(t){let e=0;do{isNaN(t.offsetTop)||(e+=t.offsetTop)}while(t=t.offsetParent);return e}};l.a.use({install(t){t.prototype.$utils=mi,t.prototype.$alias=ui,t.prototype.$resize=((e,n={})=>{if(!e)return"";if(/imageMogr2/.test(e))return e;const link=/^http/.test(e)?e:`https://image.calibur.tv/${e}`,r=n.format?`/format/${n.format}`:(()=>{if(t.prototype.$isServer)return!1;if(void 0!==window.supportWebP)return window.supportWebP;const e=document.createElement("canvas");if(e.getContext&&e.getContext("2d")){const t=0===e.toDataURL("image/webp").indexOf("data:image/webp");return window.supportWebP=t,t}return!1})()?"/format/webp":"",o=void 0===n.mode?1:n.mode;if(1===o&&!n.width||!n.width&&!n.height)return`${link}?imageMogr2/auto-orient/strip${r}`;let l,c;return 1===o?(l=`/w/${n.width}`,c=n.height?`/h/${n.height}`:`/h/${n.width}`):(l=n.width?`/w/${n.width}`:"",c=n.height?`/h/${n.height}`:""),`${link}?imageMogr2/auto-orient/strip|imageView2/${o}${l}${c}${r}`})}});var fi=n(60),gi=n.n(fi);const _i=gi()();var vi={name:"v-time",props:{value:{default:parseInt(Date.now()/1e3,10).toString()}},render(t){return t("time",{attrs:{datetime:this.$utils.timeLong(this.value)}})},mounted(){_i.render(this.$el,"zh_CN")},beforeDestroy(){gi.a.cancel(this.$el)}},bi={name:"not-ssr",props:["placeholder"],data:()=>({canRender:!1}),mounted(){this.canRender=!0},render(t){return this.canRender?this.$slots.default&&this.$slots.default[0]:t("div",{class:["no-ssr-placeholder"]},this.$slots.placeholder||this.placeholder)}},yi={name:"VHr",props:{text:{required:!0,type:String}}};var $i=Object(ne.a)(yi,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"hr"},[this._ssrNode("<span></span> <p>"+this._ssrEscape(this._s(this.text))+"</p>")])},[],!1,function(t){var e=n(176);e.__inject__&&e.__inject__(t)},null,"64505840").exports,xi=(n(111),n(66)),wi=n.n(xi),ki=n(64),Ci={name:"VSearchHistory",data:()=>({cacheKey:"search-history",list:[],maxLen:5}),mounted(){this.$channel.$on("search-action",({text:text,type:t})=>{this.set(text)}),this.list=this.get()},methods:{query(q){this.set(q),this.$router.push({name:"search",query:{q:q,type:"all"}})},set(q){setTimeout(()=>{const t=this.get(),e=t.indexOf(q);-1!==e&&t.splice(e,1),t.unshift(q),t.length>this.maxLen&&t.pop(),this.list=t;try{localStorage.setItem(this.cacheKey,JSON.stringify(t))}catch(t){}},0)},get(){try{return JSON.parse(localStorage.getItem(this.cacheKey))||[]}catch(t){return[]}},clear(){try{localStorage.removeItem(this.cacheKey)}catch(t){}this.list=[]},del(q){const t=this.get(),e=t.indexOf(q);t.splice(e,1);try{localStorage.setItem(this.cacheKey,JSON.stringify(t))}catch(t){}this.list.splice(e,1)}}};var Si=Object(ne.a)(Ci,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.list.length?n("div",{staticClass:"search-history"},[n("v-hr",{attrs:{text:"历史搜索"}}),t._ssrNode(" <ul>"+t._ssrList(t.list,function(e,n){return'<li><a class="oneline">'+t._ssrEscape(t._s(e))+'</a> <span class="del">×</span></li>'})+"</ul>")],2):t._e()},[],!1,function(t){var e=n(178);e.__inject__&&e.__inject__(t)},null,"606c22eb").exports,Ei={name:"VHeader",components:{vSearch:ki.a,vSearchHistory:Si,"el-badge":wi.a},props:{type:{type:String,default:"banner",validator:t=>~["mask","pure","banner"].indexOf(t)},banner:{type:String,default:""},height:{type:String,default:"200px"},marginBottom:{type:String,default:"35px"}},data:()=>({scrollFlag:!1}),computed:{defaultBanner(){return this.$store.state.pageData?this.$store.state.pageData.page_banner:""},navClassList(){const t=[this.$style.nav],e=this.type;return this.scrollFlag?(t.push(this.$style.navFixed),t.push(this.$style.navPure),t.push("nav-pure")):(t.push("banner"===e?this.$style.navAbs:this.$style.navFixed),t.push("mask"===e?this.$style.navMask:"banner"===e?this.$style.navBanner:this.$style.navPure),t.push(`nav-${e}`)),t},bannerImage(){return{backgroundImage:`url(${this.$resize("banner"===this.type?this.banner||this.defaultBanner:this.banner,{width:2048,mode:0})})`}},convertBannerHeight(){const t=this.height.match(/(\d+)px$/);return t?+t[1]:+this.height.replace("%","")},normalBannerBgStyle(){let t,e;const n=this.convertBannerHeight;return this.height.match(/(\d+)px$/)?(t=`${1.25*n}px`,e=`${.125*-n}px`):(t=`${1.25*n}%`,e=`${.125*-n}%`),Object.assign({},this.bannerImage,{height:t,top:e})},isLogin(){return this.$store.state.login},isAuth(){return this.$store.state.isAuth},haveAuthToken(){return this.$store.state.haveAuthToken},user(){return this.$store.state.user},notificationsCount(){if(!this.isLogin)return 0;const t=this.user.notification-this.$store.state.users.notifications.checked;return t<0?0:t}},mounted(){document.addEventListener("scroll",this.handleScroll)},beforeDestroy(){document.removeEventListener("scroll",this.handleScroll)},methods:{signIn(){this.$channel.$emit("sign-in")},signUp(){this.$channel.$emit("sign-up")},signOut(){this.$cookie.remove("JWT-TOKEN"),Object(fe.m)(this),window.location.href="/"},handleScroll(){this.scrollFlag=window.scrollY>("mask"===this.type?this.convertBannerHeight-100:this.convertBannerHeight)}}};var Ii=Object(ne.a)(Ei,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.$style.header,attrs:{id:"page-header"}},[t._ssrNode("<div"+t._ssrClass(null,t.navClassList)+">","</div>",[t._ssrNode("<div"+t._ssrClass(null,t.$style.text)+">","</div>",[n("v-layout",["pure"===t.type||t.scrollFlag?n("nuxt-link",{class:t.$style.logo,attrs:{to:"/"}},[n("img",{attrs:{src:t.$resize("owner/logo-new/logo.png",{width:80})}})]):n("nuxt-link",{class:[t.$style.navLink,t.$style.first],attrs:{to:"/"}},[n("span",[t._v("首页")])]),t._v(" "),n("nuxt-link",{class:t.$style.navLink,attrs:{to:t.$alias.roleTrending}},[n("span",[t._v("股市")])]),t._v(" "),n("nuxt-link",{class:t.$style.navLink,attrs:{to:"/world"}},[n("span",[t._v("社区")])]),t._v(" "),n("nuxt-link",{class:t.$style.navLink,attrs:{to:t.$alias.bangumiNews}},[n("span",[t._v("番剧")])]),t._v(" "),n("nuxt-link",{class:t.$style.navLink,attrs:{to:"/app/download"}},[n("span",[t._v("下载APP")])]),t._v(" "),n("nuxt-link",{class:t.$style.navLink,attrs:{to:"/about/reward"}},[n("span",[t._v("捐赠")])])],1),t._ssrNode(" "),t._ssrNode("<div"+t._ssrClass(null,t.$style.right)+">","</div>",[t._ssrNode('<div class="search-container">',"</div>",[n("v-search",{attrs:{"show-suggestion":!1}},[n("i",{staticClass:"iconfont icon-sousuo",attrs:{slot:"submit-btn"},slot:"submit-btn"})]),t._ssrNode(" "),n("v-search-history")],2),t._ssrNode(" "),t.haveAuthToken?[t.isLogin?[n("el-badge",{staticClass:"item",attrs:{value:t.notificationsCount,hidden:!t.notificationsCount,max:99}},[n("a",{class:t.$style.navLink,attrs:{target:"_blank",href:"/my/notification"}},[n("span",[t._v("消息")])])]),t._ssrNode(" "),n("el-dropdown",{class:t.$style.userSection,attrs:{placement:"bottom"}},[n("a",{staticClass:"el-dropdown-link",attrs:{href:t.$alias.user(t.user.zone),target:"_blank"}},[n("v-img",{class:t.$style.avatar,attrs:{src:t.user.avatar,avatar:!0,lazy:!1,width:34,height:34}})],1),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("button",{on:{click:t.signOut}},[t._v("退出")])])],1)],1)]:t._ssrNode('<a href="javascript:;"'+t._ssrClass(null,t.$style.navLink)+"><span>消息</span></a> <span"+t._ssrClass(null,t.$style.fakerUserSection)+"></span>")]:t._ssrNode("<button"+t._ssrClass("sign-in",[t.$style.signBtn,t.$style.signIn])+"><span>登录</span></button> <button"+t._ssrClass("sign-up",[t.$style.signBtn,t.$style.signUp])+"><span>注册</span></button>")],2)],2),t._ssrNode(" "+("pure"===t.type||t.scrollFlag?"\x3c!----\x3e":("banner"===t.type?"<div"+t._ssrClass(null,t.$style.bannerBgContainer)+"><div"+t._ssrClass(null,t.$style.bannerBgImg)+t._ssrStyle(null,t.normalBannerBgStyle,null)+"></div></div>":"\x3c!----\x3e")+" "+("mask"===t.type?"<div"+t._ssrClass(null,t.$style.maskBg)+"></div>":"\x3c!----\x3e")))],2),t._ssrNode(" "),"banner"===t.type?t._ssrNode("<div"+t._ssrClass(null,t.$style.normalBanner)+t._ssrStyle(null,[{height:t.height,marginBottom:t.marginBottom},t.bannerImage],null)+">","</div>",[t._ssrNode('<div class="container"><div'+t._ssrClass(null,t.$style.calibur)+"></div></div> "),t._t("default")],2):"mask"===t.type?[t.banner?t._ssrNode("<div"+t._ssrClass(null,t.$style.maskBanner)+t._ssrStyle(null,{height:t.height,marginBottom:t.marginBottom},null)+">","</div>",[t._ssrNode("<div"+t._ssrClass(null,t.$style.maskBannerImg)+t._ssrStyle(null,[{height:t.height},t.bannerImage],null)+"></div> "),t._t("default")],2):t._e()]:t._ssrNode("<div"+t._ssrClass(null,t.$style.navShim)+t._ssrStyle(null,{marginBottom:t.marginBottom},null)+"></div>")],2)},[],!1,function(t){var e=n(179);e.__inject__&&e.__inject__(t),this.$style=e.locals||e;var r=n(180);r.__inject__&&r.__inject__(t)},null,"89d25c5e").exports,Ni=(n(181),n(109)),Ti={name:"VDialog",components:{"el-dialog":n.n(Ni).a},props:{value:{type:Boolean,default:!1,required:!0},customClass:{type:String,default:""},close:{type:Boolean,default:!0},width:{type:String,default:"720px"},height:{type:String,default:""},title:{type:String,default:"提示"},header:{type:Boolean,default:!0},footer:{type:Boolean,default:!0},submitText:{type:String,default:"确定"},cancelText:{type:String,default:"取消"},scroll:{type:Function,default:null},fullscreen:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},noMore:{type:Boolean,default:!1},clickClose:{type:Boolean,default:!0},theme:{type:String,validator:t=>~["success","danger"].indexOf(t),default:"success"}},data(){return{dialogVisible:this.value}},computed:{computeDialogHeight(){return this.height?{height:this.height}:this.scroll?{height:"600px"}:{height:"auto"}}},mounted(){this.$watch("value",t=>{this.dialogVisible=t,window.__closeImageLazy__=t}),this.$watch("dialogVisible",t=>{this.$emit("input",t),window.__closeImageLazy__=t})},methods:{beforeClose(t){t(),this.$emit("cancel"),this.dialogVisible=!1},cancel(){this.$emit("cancel"),this.dialogVisible=!1},submit(){this.$emit("submit")},handleScroll(t){if(!this.scroll||this.loading||this.noMore)return;if(!this.$refs.ul)return;const main=t.currentTarget||t.target;this.$refs.ul.clientHeight-main.clientHeight-main.scrollTop<30&&this.scroll()}}};var Oi=Object(ne.a)(Ti,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("not-ssr",[n("el-dialog",{attrs:{width:t.width,"custom-class":t.customClass,"append-to-body":!0,"show-close":!1,visible:t.dialogVisible,"before-close":t.beforeClose,fullscreen:t.fullscreen,"close-on-click-modal":t.clickClose,"close-on-press-escape":t.clickClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("section",{class:t.$style.container},[t.header?n("header",{class:t.$style.header,attrs:{slot:"header"},slot:"header"},[t._t("title",[n("h4",{class:t.$style.title,domProps:{textContent:t._s(t.title)}})])],2):t._e(),t._v(" "),!t.clickClose||t.close?n("button",{class:t.$style.close,on:{click:t.cancel}},[t._v("\n        ×\n      ")]):t._e(),t._v(" "),n("main",{class:t.$style.content,style:t.computeDialogHeight,on:{scroll:t.handleScroll}},[t.scroll?[n("ul",{ref:"ul"},[t._t("default")],2),t._v(" "),t.loading?t._t("loading",[n("p",{class:t.$style.loading},[t._v("加载中...")])]):t.noMore?t._t("nomore",[n("p",{class:t.$style.noMore},[t._v("没有更多了")])]):t._e()]:t._t("default")],2),t._v(" "),t.footer?n("footer",{class:t.$style.footer},[t._t("footer",[t.cancelText?n("button",{class:t.$style.cancel,domProps:{textContent:t._s(t.cancelText)},on:{click:t.cancel}}):t._e(),t._v(" "),n("button",{class:[t.$style.submit,"btn-"+t.theme],attrs:{loading:t.loading},domProps:{textContent:t._s(t.submitText)},on:{click:t.submit}})])],2):t._e()])])],1)},[],!1,function(t){var e=n(182);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"4350a61e").exports,ji={name:"VLayout",props:{left:{type:Boolean,default:!0},affixTop:{type:Number,default:85},customClass:{type:String,default:""},fixed:{type:Boolean,default:!0}}};var qi=Object(ne.a)(ji,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{class:[t.$style.container,t.customClass]},[t.left?[t._ssrNode("<aside"+t._ssrClass(null,t.$style.asideRight)+">","</aside>",[t._t("aside")],2),t._ssrNode(" "),t._ssrNode("<main"+t._ssrClass(null,t.$style.mainLeft)+">","</main>",[t._t("default")],2)]:[t._ssrNode("<aside"+t._ssrClass(null,t.$style.asideLeft)+">","</aside>",[t.fixed?n("v-affix",{attrs:{"offset-top":t.affixTop}},[t._t("aside")],2):t._t("aside")],2),t._ssrNode(" "),t._ssrNode("<main"+t._ssrClass(null,t.$style.mainRight)+">","</main>",[t._t("default")],2)]],2)},[],!1,function(t){var e=n(183);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"599553ee").exports,Ai=n(4),Mi={name:"VImg",props:{src:{required:!0,type:String,default:""},width:{type:[Number,String],default:0},height:{type:[Number,String],default:0},full:{type:Boolean,default:!1},mime:{type:String,default:""},lazy:{type:Boolean,default:!0},blur:{type:Boolean,default:!1},poster:{type:Boolean,default:!1},avatar:{type:Boolean,default:!1}},data:()=>({loaded:!1,error:!1,toggleClick:!1,displayGifMask:!1,retrying:!1,containerWidth:0,placeholderImage:"",errorPlaceholder:"",errorMessage:"",retryMessage:"",heightLimit:0}),computed:{blockModeWrapStyle(){return{width:`${this.width}px`}},blockModeClasses(){const t=[];return this.error&&t.push(this.$style.retry),this.poster&&t.pust(this.$style.poster),this.loaded||(this.gifNeedClickToLoad?t.push(this.$style.cssGif):this.blur?t.push(this.$style.cssBlur):t.push(this.$style.cssFade)),t},computeContainerHeight(){return this.$isServer?0:this.width>this.containerWidth?parseInt(this.height/this.width*this.containerWidth,10):this.height},blockModeShimPadding(){return{paddingTop:`${100*parseFloat(this.height/this.width).toFixed(3)}%`}},computePlaceholder(){if(!this.blur)return this.placeholderImage;if(this.full){const{width:t,height:e}=this.blockModeImageDisplaySize,n=this.gifNeedClickToLoad?.5:5;return this.$resize(this.src,{width:parseInt(t/n),height:parseInt(e/n),format:"png"})}return this.$resize(this.src,"auto"===this.width?{height:parseInt(this.height/5),mode:2,format:"png"}:{width:parseInt(this.inlineModeImageDisplayWidth/5),height:parseInt(this.height/5),format:"png"})},inlineModeImageDisplayWidth(){const t=+this.width.toString().replace("px","").replace("%","");return parseInt(/%$/.test(this.width)?this.containerWidth/50*t:2*t,10)},inlineModeWrapStyle(){return{width:this.width?this.convertSizeToPx(this.width):"auto",height:this.height?this.convertSizeToPx(this.height):"auto"}},inlineImageStyle(){if("auto"===this.width)return{height:"100%",width:"auto"};const t=this.width>this.height;return this.width&&this.height?{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)","-webkit-transform":"translate(-50%, -50%)",width:t?"auto":"100%",height:t?"100%":"auto"}:{}},gifNeedClickToLoad(){return!(!this.mime||!/gif/i.test(this.mime))},blockModeImageDisplaySize(){let t,e;return this.width>2*this.containerWidth?(t=2*this.containerWidth,e=2*this.computeContainerHeight):(t=this.width,e=this.height),t>9999&&(e=parseInt(9999/t*e,10),t=9999),e>9999&&(t=parseInt(9999/e*t,10),e=9999),{width:t,height:e}},blockModeImageSrc(){return this.$resize(this.src,this.blockModeImageDisplaySize)},inlineModeImageSrc(){return this.$resize(this.src,"auto"===this.width?{height:2*+this.height,mode:2}:{width:this.inlineModeImageDisplayWidth,height:2*+this.height})}},mounted(){this.containerWidth=this.$el.parentNode.offsetWidth,this.gifNeedClickToLoad?this.displayGifMask=!0:this.$nextTick(()=>{!this.lazy||window.__closeImageLazy__||Ai.a.checkInView(this.$el)?this.loaded=!0:this.bindLazyEvent()})},methods:{bindLazyEvent(){const t=Ai.a.on(document,"scroll",this.$utils.throttle(()=>{Ai.a.checkInView(this.$el)&&(this.loaded=!0,Ai.a.off(t))},200),!1)},bindRetryEvent(){const t=Ai.a.on(this.$el,"click",e=>{this.loaded=!0,this.retrying=!0,this.error=!1,Ai.a.off(t),e.stopPropagation()},!1)},convertSizeToPx:t=>/auto/.test(t)?t:/px$/.test(t)?t:/%$/.test(t)?t:`${t}px`,handleImageLoadSuccess(){this.error=!1,this.retrying=!1,this.toggleClick&&(this.toggleClick=!1,this.displayGifMask=!1,this.bindStopGifEvent())},bindStopGifEvent(){const t=Ai.a.on(this.$el,"click",e=>{this.displayGifMask=!0,this.loaded=!1,Ai.a.off(t),e.stopPropagation()},!1)},handleImageLoadError(){this.error=!0,this.retrying=!1,this.full&&this.bindRetryEvent()},clickToLoadGIF(){this.toggleClick||(this.toggleClick=!0,this.loaded=!0)}}};var Ui=Object(ne.a)(Mi,function(){var t,e,n=this,r=n.$createElement,o=n._self._c||r;return n.full?o("div",{class:[n.$style.block,n.blockModeClasses],style:n.blockModeWrapStyle},[n._ssrNode("<div"+n._ssrClass(null,n.$style.paddingShim)+n._ssrStyle(null,n.blockModeShimPadding,null)+"></div> <div"+n._ssrClass(null,n.$style.imageWrap)+">"+(n.error?"\x3c!----\x3e":"<img"+n._ssrAttr("src",n.$isServer?n.placeholderImage:n.loaded?n.blockModeImageSrc:n.computePlaceholder)+">")+"</div> "+(n.error?"<span"+n._ssrClass(null,n.$style.message)+">"+n._ssrEscape(n._s(n.errorMessage))+"</span>":"\x3c!----\x3e")+" "+(n.retrying?"<span"+n._ssrClass(null,n.$style.message)+">"+n._ssrEscape(n._s(n.retryMessage))+"</span>":"\x3c!----\x3e")+" "),o("transition",{attrs:{name:"img-zoom"}},[n.displayGifMask?o("div",{class:n.$style.loadGif,on:{click:n.clickToLoadGIF}},[o("span",{class:(t={},t[n.$style.rolling]=n.toggleClick,t)},[n._v("GIF")])]):n._e()])],2):o("span",{class:[n.$style.inline,(e={},e[n.$style.cssFade]=!n.loaded&&!n.blur,e[n.$style.cssBlur]=!n.loaded&&n.blur,e[n.$style.avatar]=n.avatar,e[n.$style.poster]=n.poster,e)],style:n.inlineModeWrapStyle},[n._ssrNode("<div"+n._ssrClass(null,n.$style.imageWrap)+"><img"+n._ssrAttr("src",n.error?n.errorPlaceholder:n.$isServer?"":n.loaded?n.inlineModeImageSrc:n.computePlaceholder)+n._ssrStyle(null,n.inlineImageStyle,null)+"></div>")])},[],!1,function(t){var e=n(184);e.__inject__&&e.__inject__(t),this.$style=e.locals||e;var r=n(185);r.__inject__&&r.__inject__(t)},null,"5aef02d5").exports;const Bi="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";Ui.install=function(t,e={}){t.component(Ui.name,{extends:Ui,data:()=>({heightLimit:e.heightLimit||0,placeholderImage:e.placeholderImage||Bi,errorPlaceholder:e.errorPlaceholder||Bi,errorMessage:e.errorMessage||"图片加载失败，请点击重试",retryMessage:e.retryMessage||"加载中..."})})};var Li=Ui,Ri=n(110),Pi=n.n(Ri);function Di(t,e){const n=e?"scrollTop":"scrollLeft";let r=t[e?"pageYOffset":"pageXOffset"];return"number"!=typeof r&&(r=window.document.documentElement[n]),r}var zi={name:"VAffix",props:{offsetTop:{type:Number,default:0},offsetBottom:{type:Number}},data:()=>({affix:!1,styles:{},slot:!1,slotStyle:{},eventIds:[]}),computed:{offsetType(){let t="top";return this.offsetBottom>=0&&(t="bottom"),t},classes(){return[{"ivu-affix":this.affix}]}},mounted(){this.eventIds=Ai.a.on(window,["scroll","resize"],this.handleScroll)},beforeDestroy(){Ai.a.off(this.eventIds)},methods:{handleScroll(){const t=this.$refs.point;if(!t)return;const e=this.affix,n=Di(window,!0),r=function(element){const rect=element.getBoundingClientRect(),t=Di(window,!0),e=Di(window),n=window.document.body,r=n.clientTop||0,o=n.clientLeft||0;return{top:rect.top+t-r,left:rect.left+e-o}}(this.$el),o=window.innerHeight,l=this.$el.getElementsByTagName("div")[0].offsetHeight;r.top-this.offsetTop<n&&"top"===this.offsetType&&!e?(this.affix=!0,this.slotStyle={width:t.clientWidth+"px",height:t.clientHeight+"px"},this.slot=!0,this.styles={top:`${this.offsetTop}px`,left:`${r.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):r.top-this.offsetTop>n&&"top"===this.offsetType&&e&&(this.slot=!1,this.slotStyle={},this.affix=!1,this.styles=null,this.$emit("on-change",!1)),r.top+this.offsetBottom+l>n+o&&"bottom"===this.offsetType&&!e?(this.affix=!0,this.styles={bottom:`${this.offsetBottom}px`,left:`${r.left}px`,width:`${this.$el.offsetWidth}px`},this.$emit("on-change",!0)):r.top+this.offsetBottom+l<n+o&&"bottom"===this.offsetType&&e&&(this.affix=!1,this.styles=null,this.$emit("on-change",!1))}}};var Fi=Object(ne.a)(zi,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",[t._ssrNode("<div"+t._ssrClass(null,t.classes)+t._ssrStyle(null,t.styles,null)+">","</div>",[t._t("default")],2),t._ssrNode(" <div"+t._ssrStyle(null,t.slotStyle,{display:t.slot?"":"none"})+"></div>")],2)},[],!1,function(t){var e=n(186);e.__inject__&&e.__inject__(t)},null,"8225fb2c").exports,Gi={name:"VShare",props:{image:{type:String,default:""},title:{type:String,default:""},desc:{type:String,default:""},type:{type:String,required:!0,validator:t=>~["button","panel"].indexOf(t)},url:{type:String,default:""},showText:{type:Boolean,default:!0}},data:()=>({weiboKey:"",canRender:!1}),computed:{shareUrl(){return this.url?`${window.location.origin}${this.url}${this.query}`:`${window.location.origin}${this.$route.path}${this.query}`},query(){if(!this.$store.state.login)return"";const t=this.$store.state.user.id,time=parseInt(Date.now()/1e3)+3600;return`?uid=${t}&time=${time}&key=${this.$md5(t+"-the-world-"+time)}`}},mounted(){this.canRender=!0,this.makeWechatQrCode()},methods:{shareTitle(){return`${this.title||document.title} - ${document.querySelector("meta[name=description]").content}`},shareDesc(){return`${(this.desc||document.querySelector("meta[name=description]").content).substring(0,100)}...`},shareImage(){if(this.image)return this.image;const t=document.querySelectorAll(".share-img");return t.length?t[t.length-1]:""},shareSource:()=>document.querySelector("meta[name=site]")&&document.querySelector("meta[name=site]").content||document.title,makeUrl(t){let e="/";"weibo"===t?e=`https://service.weibo.com/share/share.php?url=${this.shareUrl}&title=${this.shareTitle()}&pic=${this.shareImage()}&appkey=${this.weiboKey}`:"qq"===t?e=`http://connect.qq.com/widget/shareqq/index.html?url=${this.shareUrl}&title=${this.shareTitle()}&source=${this.shareSource()}&desc=${this.shareDesc()}&pics=${this.shareImage()}&summary="${this.shareDesc()}"`:"douban"===t?e=`http://shuo.douban.com/!service/share?href=${this.shareUrl}&name=${this.shareTitle()}&text=${this.shareDesc()}&image=${this.shareImage()}&starid=0&aid=0&style=11`:"qzone"===t&&(e=`http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=${this.shareUrl}&title=${this.shareTitle()}&desc=${this.shareDesc()}&summary=${this.shareDesc()}&site=${this.shareSource()}`),window.open(e)},makeWechatQrCode(){"button"!==this.type&&this.$nextTick(()=>{this.$QRCode(this.$refs.qr,this.shareUrl,{width:105,height:105})})},handleCopySuccess(){this.$toast.success("复制成功")}}};var Wi=Object(ne.a)(Gi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return"button"===t.type?n("div",{staticClass:"fen-think"},[n("el-popover",{ref:"popover2",attrs:{placement:"top",width:"120",trigger:"click","popper-class":"fen-think button-type"}},[t.canRender?n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.shareUrl,expression:"shareUrl"}],on:{click:t.handleCopySuccess}},[n("i",{staticClass:"iconfont ic-link"}),t._v(" "),n("span",[t._v("复制链接")])]):t._e(),t._v(" "),n("button",{on:{click:function(e){return t.makeUrl("weibo")}}},[n("i",{staticClass:"iconfont ic-weibo"}),t._v(" "),n("span",[t._v("微博")])]),t._v(" "),n("button",{on:{click:function(e){return t.makeUrl("qq")}}},[n("i",{staticClass:"iconfont ic-qq"}),t._v(" "),n("span",[t._v("QQ")])]),t._v(" "),n("button",{on:{click:function(e){return t.makeUrl("douban")}}},[n("i",{staticClass:"iconfont ic-douban"}),t._v(" "),n("span",[t._v("豆瓣")])]),t._v(" "),n("button",{on:{click:function(e){return t.makeUrl("qzone")}}},[n("i",{staticClass:"iconfont ic-qzone"}),t._v(" "),n("span",[t._v("QQ空间")])])]),t._ssrNode(" "),t._t("default",[n("button",{directives:[{name:"popover",rawName:"v-popover:popover2",arg:"popover2"}],staticClass:"fen-think-btn"},[n("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" "),t.showText?n("span",[t._v("分享")]):t._e()])])],2):"panel"===t.type?n("div",{staticClass:"fen-think panel-type"},[n("el-popover",{ref:"popover",attrs:{placement:"top",title:"微信扫一扫：分享",width:"200",trigger:"hover","popper-class":"share-popover"}},[n("div",[n("div",{ref:"qr",staticClass:"qr-code"}),t._v(" "),n("div",{staticClass:"help"},[n("p",[t._v("微信里点“发现”，扫一下")]),t._v(" "),n("p",[t._v("二维码便可将本页面分享至朋友圈")])])])]),t._ssrNode(' <button class="fen-think-icon ic-weibo"></button> <button class="fen-think-icon ic-qq"></button> '),n("button",{directives:[{name:"popover",rawName:"v-popover:popover",arg:"popover"}],staticClass:"fen-think-icon ic-wechat"},[]),t._ssrNode(' <button class="fen-think-icon ic-douban"></button> <button class="fen-think-icon ic-qzone"></button> '),t.canRender?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"复制链接",placement:"top"}},[n("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.shareUrl,expression:"shareUrl"}],staticClass:"fen-think-icon ic-link",on:{click:t.handleCopySuccess}})]):t._e()],2):t._e()},[],!1,function(t){var e=n(187);e.__inject__&&e.__inject__(t)},null,"014fe0f9").exports,Hi={name:"AvaDialog",props:{type:{required:!0,type:String},id:{required:!0,type:[Number,String]},action:{required:!0,type:String},displayCount:{type:Number,default:7},title:{type:String,default:"用户列表"}},data:()=>({showDialog:!1}),computed:{source(){return this.$store.getters["social/getState"](this.type,this.id)[`${this.action}_users`]},users(){return this.source.list},displayUsers(){return this.users.slice(0,this.displayCount)}},methods:{getMoreUser(){this.$store.dispatch("social/getUsers",{type:this.type,id:this.id,key:this.action})}}};var Qi=Object(ne.a)(Hi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"avatar-dialog-wrap"},[t._ssrNode("<ul>","</ul>",[t._l(t.displayUsers,function(e){return t._ssrNode('<li class="user-face">',"</li>",[n("el-tooltip",{staticClass:"item",attrs:{content:e.nickname,effect:"dark",placement:"top"}},[n("a",{attrs:{href:t.$alias.user(e.zone),target:"_blank"}},[n("img",{attrs:{src:t.$resize(e.avatar,{width:80})}})])])],1)}),t._ssrNode(" "+(t.users.length>t.displayCount?'<button class="el-icon-more"></button>':"\x3c!----\x3e"))],2),t._ssrNode(" "),t.users.length>t.displayCount?n("v-dialog",{staticClass:"likes-modal",attrs:{title:t.title,footer:!1,loading:t.source.loading,"no-more":t.source.noMore,scroll:t.getMoreUser},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},t._l(t.users,function(e){return n("li",{key:e.id},[n("a",{staticClass:"user",attrs:{href:t.$alias.user(e.zone),target:"_blank"}},[n("img",{staticClass:"avatar",attrs:{src:t.$resize(e.avatar,{width:120})}}),t._v(" "),n("span",{staticClass:"nickname",domProps:{textContent:t._s(e.nickname)}}),t._v(" "),e.created_at?n("v-time",{staticClass:"score",model:{value:e.created_at,callback:function(n){t.$set(e,"created_at",n)},expression:"user.created_at"}}):e.score?n("v-time",{staticClass:"score",model:{value:e.score,callback:function(n){t.$set(e,"score",n)},expression:"user.score"}}):t._e()],1)])}),0):t._e()],2)},[],!1,function(t){var e=n(188);e.__inject__&&e.__inject__(t)},null,"656fae64").exports,Ki={name:"LoadMoreBtn",props:{noMore:{required:!0,type:Boolean},loading:{required:!0,type:Boolean},auto:{default:!1,type:Boolean}},mounted(){if(this.auto&&!this.noMore){const t=Ai.a.on(document,"scroll",this.$utils.throttle(()=>{Ai.a.checkInView(this.$el)&&this.$emit("fetch"),this.noMore&&Ai.a.off(t)},200),!1)}},methods:{loadMore(){this.loading||this.noMore||this.$emit("fetch")}}};var Vi=Object(ne.a)(Ki,function(){var t=this,e=t.$createElement;return(t._self._c||e)("button",{staticClass:"load-more-btn",on:{click:t.loadMore}},[t._ssrNode('<i class="el-icon-loading"'+t._ssrStyle(null,null,{display:t.loading?"":"none"})+" data-v-5a2a59c0></i>"+t._ssrEscape("\n  "+t._s(t.noMore?"没有更多了，休息一下吧ヾ(*￣▽￣*)/":t.loading?"加载中":"加载更多")+"\n"))])},[],!1,function(t){var e=n(189);e.__inject__&&e.__inject__(t)},"5a2a59c0","de434cca").exports,Zi={name:"ReportDialog",props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String},title:{type:String,default:"违规举报"},org:{type:Boolean,default:!1},isCreator:{type:Boolean,default:!1}},data:()=>({showDialog:!1,selectedType:-1,content:"",loading:!1}),computed:{needContent(){return 0===this.selectedType||6===this.selectedType}},watch:{},created(){},mounted(){},methods:{async submit(){if(this.selectedType<0)return void this.$toast.error("请选择正确的分类");const content=this.content.trim();if(!this.needContent||content){if(!this.loading){this.loading=!0;try{Object(fe.r)(this,{id:this.id,message:content,type:this.selectedType,model:this.type})}finally{this.loading=!1,this.$toast.success("感谢您的反馈！"),this.showDialog=!1,this.content="",this.selectedType=-1}}}else this.$toast.error("请填写具体情况")}}};var Ji=Object(ne.a)(Zi,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"report-dialog-wrap"},[n("v-dialog",{attrs:{title:t.title,loading:t.loading,"submit-text":"提交","custom-class":"report-dialog"},on:{submit:t.submit},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[n("h3",[t._v("违反法律法规")]),t._v(" "),n("el-radio-group",{model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},[n("el-radio",{attrs:{label:1}},[t._v("违法违规")]),t._v(" "),n("el-radio",{attrs:{label:2}},[t._v("色情低俗")]),t._v(" "),n("el-radio",{attrs:{label:3}},[t._v("赌博诈骗")])],1),t._v(" "),n("h3",[t._v("侵犯个人权益")]),t._v(" "),n("el-radio-group",{model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},[n("el-radio",{attrs:{label:4}},[t._v("人身攻击")]),t._v(" "),n("el-radio",{attrs:{label:5}},[t._v("侵犯隐私")]),t._v(" "),t.isCreator?n("el-radio",{attrs:{label:6}},[t._v("内容抄袭")]):t._e()],1),t._v(" "),n("h3",[t._v("有害社区环境")]),t._v(" "),n("el-radio-group",{model:{value:t.selectedType,callback:function(e){t.selectedType=e},expression:"selectedType"}},[n("el-radio",{attrs:{label:7}},[t._v("垃圾广告")]),t._v(" "),n("el-radio",{attrs:{label:8}},[t._v("恶意引战")]),t._v(" "),n("el-radio",{attrs:{label:9}},[t._v("重复内容/刷屏")]),t._v(" "),n("el-radio",{attrs:{label:10}},[t._v("内容不相关")]),t._v(" "),n("el-radio",{attrs:{label:11}},[t._v("互刷团子")]),t._v(" "),n("el-radio",{attrs:{label:0}},[t._v("其它")])],1),t._v(" "),t.needContent?[n("h3",[t._v("留言：")]),t._v(" "),n("el-input",{attrs:{rows:3,resize:"none",type:"textarea",placeholder:"请说明情况"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})]:t._e()],2),t._ssrNode(" "),t._ssrNode('<span class="report-btn">',"</span>",[t._t("default")],2)],2)},[],!1,function(t){var e=n(190);e.__inject__&&e.__inject__(t)},null,"3033bff2").exports,Yi=(n(112),n(67)),Xi=n.n(Yi),tn=n(71),en=n(70),sn={name:"UserCard",components:{UserSex:tn.a,UserBadge:en.a,"mt-spinner":Xi.a},props:{id:{required:!0,type:[Number,String]},zone:{required:!0,type:String},customClass:{type:String,default:""}},data:()=>({user:null,loading:!1}),methods:{handleHover(){this.user||(this.getUserFromLocal(),this.user||this.getUserFromServer())},getUserFromLocal(){try{this.user=JSON.parse(sessionStorage.getItem(`user-card-${this.id}`))}catch(t){}},async getUserFromServer(){if(!this.loading){this.loading=!0;try{const data=await Object(fe.j)(this,{id:this.id});this.user=data,sessionStorage.setItem(`user-card-${this.id}`,JSON.stringify(data))}finally{this.loading=!1}}}}};var nn=Object(ne.a)(sn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{"popper-class":t.loading?"user-card-loading":"user-card",width:375,"open-delay":400,trigger:"hover"},on:{show:t.handleHover}},[n("div",{staticClass:"content"},[t.loading?n("mt-spinner",{attrs:{type:"triple-bounce"}}):t.user?[n("div",{staticClass:"background",style:{backgroundImage:"url("+t.$resize(t.user.banner,{width:750,height:240})+")"}}),t._v(" "),n("div",{staticClass:"profile"},[n("a",{staticClass:"avatar",attrs:{href:t.$alias.user(t.zone),target:"_blank"}},[n("v-img",{attrs:{src:t.user.avatar,width:55,height:55,lazy:!1,avatar:!0}})],1),t._v(" "),n("div",{staticClass:"info"},[n("p",{staticClass:"nickname"},[n("a",{attrs:{href:t.$alias.user(t.zone),target:"_blank"},domProps:{textContent:t._s(t.user.nickname)}}),t._v(" "),n("user-sex",{attrs:{sex:t.user.sex,secret:t.user.sexSecret}}),t._v(" "),n("span",{staticClass:"level"},[t._v(" Lv"+t._s(t.user.level)+" ")]),t._v(" "),n("span",{staticClass:"power"},[t._v("- 战斗力："+t._s(t.user.power))])],1),t._v(" "),n("p",{staticClass:"signature",domProps:{textContent:t._s(t.user.signature)}}),t._v(" "),t.user.badge.length?n("ul",{staticClass:"user-badges"},t._l(t.user.badge,function(e){return n("user-badge",{key:e.id,attrs:{item:e,"user-id":t.user.id}})}),1):t._e()])])]:t._e()],2),t._v(" "),n("a",{staticClass:"avatar-slot",class:t.customClass,attrs:{slot:"reference",href:t.$alias.user(t.zone),target:"_blank"},slot:"reference"},[t._t("default")],2)])},[],!1,function(t){var e=n(192);e.__inject__&&e.__inject__(t)},null,"fb98041e").exports,rn={name:"NoContent"};var on=Object(ne.a)(rn,function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"no-content"}},[this._ssrNode("<img"+this._ssrAttr("src",n(193))+' alt="no-content"> '),this._ssrNode("<div>","</div>",[this._ssrNode("<h3>暂无内容</h3> <p>抱歉，该页面暂无内容，请看看其他页面</p> "),this._t("default")],2)],2)},[],!1,function(t){var e=n(194);e.__inject__&&e.__inject__(t)},null,"06a5632c").exports,an={name:"BangumiPanel",props:{id:{required:!0,type:Number},avatar:{required:!0,type:String},name:{required:!0,type:String},summary:{required:!0,type:String}},computed:{source(){return this.$store.getters["social/getState"]("bangumi",this.id)}},methods:{toggleFollow(){this.$store.dispatch("social/toggleAction",{id:this.id,type:"bangumi",action:"follow"})}}};var ln=Object(ne.a)(an,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bangumi-panel",class:t.$style.bangumiPanel},[t._ssrNode("<a"+t._ssrAttr("href",t.$alias.bangumi(t.id))+' target="_blank">',"</a>",[n("v-img",{class:t.$style.avatar,attrs:{src:t.avatar,poster:!0,width:90,height:90}})],1),t._ssrNode(" <a"+t._ssrAttr("href",t.$alias.bangumi(t.id))+' target="_blank"'+t._ssrClass(null,t.$style.name)+">"+t._ssrEscape(t._s(t.name))+"</a> <p"+t._ssrClass(null,t.$style.summary)+">"+t._ssrEscape(t._s(t.summary))+"</p> "),n("el-button",{attrs:{loading:t.source.follow_loading,plain:t.source.follow,type:"danger",icon:"iconfont icon-follow",round:""},on:{click:t.toggleFollow}},[t._v("\n    "+t._s(t.source.follow?"已关注":"关注")+"\n  ")])],2)},[],!1,function(t){var e=n(195);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"4838361f").exports,cn=n(55),un={name:"VLazy",data:()=>({init:!1}),mounted(){this.renderComp()},methods:{renderComp(){if(Ai.a.checkInView(this.$el,1.5))this.init=!0;else{const t=Ai.a.on(document,["scroll","resize"],this.$utils.throttle(()=>{(Ai.a.checkInView(this.$el,1.5)||this.init)&&(this.init=!0,Ai.a.off(t))},200))}}}},dn=Object(ne.a)(un,function(){var t=this.$createElement,e=this._self._c||t;return e("not-ssr",[this.init?this._t("default"):e("div",{staticClass:"v-lazy-shim"})],2)},[],!1,null,null,"4187a603").exports,pn={name:"BangumiSearch",props:{value:{type:[String,Number,Array],default:""},multiple:{type:Boolean,default:!1},limit:{type:Number,default:0},clear:{type:Boolean,default:!0},placeholder:{type:String,default:"输入番剧名称搜索"},disabled:{type:Boolean,default:!1},followed:{type:Boolean,default:!1},size:{type:String,default:""}},data(){return{searchId:this.value,filteredOptions:[]}},computed:{bangumis(){return this.$store.state.bangumi.all}},mounted(){this.$watch("value",t=>{this.searchId=t,this.disabled&&(this.filteredOptions=this.bangumis.filter(option=>!(option.id-this.value)))}),this.$watch("searchId",t=>{this.$emit("input",t),t&&this.$emit("search",t)})},methods:{handleEnter(t){this.filteredOptions=t?this.bangumis.filter(option=>option.alias&&option.alias.indexOf(t)>-1||option.name.indexOf(t)>-1):[]}}};var hn=Object(ne.a)(pn,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{staticStyle:{width:"100%"},attrs:{"remote-method":t.handleEnter,filterable:!0,clearable:t.clear,disabled:t.disabled,multiple:t.multiple,"multiple-limit":t.limit,remote:!0,size:t.size,placeholder:t.placeholder},model:{value:t.searchId,callback:function(e){t.searchId=e},expression:"searchId"}},t._l(t.filteredOptions,function(e){return n("el-option",{key:e.id,staticClass:"bangumi-search-item",attrs:{label:e.name,value:e.id}},[n("img",{attrs:{src:t.$resize(e.avatar,{width:48})}}),t._v(" "),n("span",{domProps:{textContent:t._s(e.name)}})])}),1)},[],!1,function(t){var e=n(197);e.__inject__&&e.__inject__(t)},"052fb80a","31c6d338").exports;l.a.use(Pi.a),l.a.use(Li,{}),l.a.component(dn.name,dn),l.a.component(bi.name,bi),l.a.component(hn.name,hn),l.a.component(Ii.name,Ii),l.a.component(qi.name,qi),l.a.component(vi.name,vi),l.a.component($i.name,$i),l.a.component(Oi.name,Oi),l.a.component(Fi.name,Fi),l.a.component(Wi.name,Wi),l.a.component(Qi.name,Qi),l.a.component(Vi.name,Vi),l.a.component(Ji.name,Ji),l.a.component(nn.name,nn),l.a.component(on.name,on),l.a.component(ln.name,ln),l.a.component(cn.a.name,cn.a);n(68);l.a.component(Yt.name,Yt),l.a.component(Xt.name,Xt),l.a.component("NChild",Xt),l.a.component(oe.name,oe),l.a.use(j.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});const mn={name:"page",mode:"out-in",appear:!1,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"};async function fn(t){const e=await new U.a({mode:"history",base:"/",linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:Zt,routes:[{path:"/bangumi",component:B,props:!1,name:"bangumi",children:[{path:"news",component:L,props:!1,name:"bangumi-index-news"},{path:"tags",component:R,props:!1,name:"bangumi-index-tags"}]},{path:"/my",component:P,props:!1,name:"my",children:[{path:"notice",component:D,props:!1,name:"my-notice"},{path:"notification",component:z,props:!1,name:"my-notification"}]},{path:"/search",component:F,props:!1,name:"search"},{path:"/world",component:G,props:!1,children:[{path:"",component:W,props:!1,name:"world"},{path:"pins",component:H,props:!1,name:"world-pins"},{path:"post",component:Q,props:!1,name:"world-post"},{path:"qaq",component:K,props:!1,name:"world-qaq"},{path:"review",component:V,props:!1,name:"world-review"}]},{path:"/about/hello",component:Z,props:!1,name:"about-hello"},{path:"/about/license",component:J,props:!1,name:"about-license"},{path:"/about/reward",component:Y,props:!1,name:"about-reward"},{path:"/about/thanks",component:X,props:!1,name:"about-thanks"},{path:"/app/download",component:tt,props:!1,name:"app-download"},{path:"/callback/auth-error",component:et,props:!1,name:"callback-auth-error"},{path:"/callback/auth-redirect",component:st,props:!1,name:"callback-auth-redirect"},{path:"/callback/auth-success",component:it,props:!1,name:"callback-auth-success"},{path:"/dev/sitemap",component:nt,props:!1,name:"dev-sitemap"},{path:"/error/404",component:ot,props:!1,name:"error-404"},{path:"/post/create",component:at,props:!1,name:"post-create"},{path:"/review/create",component:lt,props:!1,name:"review-create"},{path:"/role/trending",component:ct,props:!1,children:[{path:"",component:ut,props:!1,name:"role-trending"},{path:"hall",component:pt,props:!1,name:"role-trending-hall"},{path:"intro",component:ht,props:!1,name:"role-trending-intro"},{path:"listed",component:mt,props:!1,name:"role-trending-listed"},{path:"mine",component:ft,props:!1,name:"role-trending-mine"},{path:"newbie",component:gt,props:!1,name:"role-trending-newbie"},{path:"product",component:_t,props:!1,name:"role-trending-product"},{path:"register",component:vt,props:!1,name:"role-trending-register"}]},{path:"/about/invite/:id?",component:bt,props:!0,name:"about-invite-id"},{path:"/app/notice/:id?",component:yt,props:!0,name:"app-notice-id"},{path:"/bangumi/:id",component:$t,props:!0,children:[{path:"",component:xt,props:!0,name:"bangumi-id"},{path:"cartoon",component:wt,props:!0,name:"bangumi-id-cartoon"},{path:"pins",component:kt,props:!0,name:"bangumi-id-pins"},{path:"post",component:Ct,props:!0,name:"bangumi-id-post"},{path:"qaq",component:St,props:!0,name:"bangumi-id-qaq"},{path:"review",component:Et,props:!0,name:"bangumi-id-review"},{path:"role",component:It,props:!0,name:"bangumi-id-role"},{path:"setting",component:Nt,props:!0,name:"bangumi-id-setting"},{path:"video",component:Tt,props:!0,name:"bangumi-id-video"}]},{path:"/pin/:id?",component:Ot,props:!0,name:"pin-id"},{path:"/post/:id?",component:jt,props:!0,name:"post-id"},{path:"/qaq/:id?",component:qt,props:!0,name:"qaq-id"},{path:"/review/:id?",component:At,props:!0,name:"review-id"},{path:"/role/:id?",component:Mt,props:!0,name:"role-id"},{path:"/soga/:id?",component:Ut,props:!0,name:"soga-id"},{path:"/user/:zone?",component:Bt,props:!0,children:[{path:"",component:Lt,props:!0,name:"user-zone"},{path:"bangumi",component:Rt,props:!0,name:"user-zone-bangumi"},{path:"draft",component:Pt,props:!0,name:"user-zone-draft"},{path:"mark",component:Dt,props:!0,name:"user-zone-mark"},{path:"pins",component:zt,props:!0,name:"user-zone-pins"},{path:"post",component:Ft,props:!0,name:"user-zone-post"},{path:"qaq",component:Gt,props:!0,name:"user-zone-qaq"},{path:"review",component:Wt,props:!0,name:"user-zone-review"},{path:"role",component:Ht,props:!0,name:"user-zone-role"},{path:"setting",component:Qt,props:!0,name:"user-zone-setting"}]},{path:"/video/:id?",component:Kt,props:!0,name:"video-id"},{path:"/",component:Vt,props:!1,name:"index"},{path:"*",component:ot,name:"error-fallback"}],fallback:!1}),n=Je(t);n.$router=e;const r=n.registerModule;n.registerModule=((path,t,e)=>r.call(n,path,t,Object.assign({preserveState:!1},e)));const o={router:e,store:n,nuxt:{defaultTransition:mn,transitions:[mn],setTransitions(t){return Array.isArray(t)||(t=[t]),t=t.map(t=>t=t?"string"==typeof t?Object.assign({},mn,{name:t}):Object.assign({},mn,t):mn),this.$options.nuxt.transitions=t,t},err:null,dateErr:null,error(e){e=e||null,o.context._errored=!!e,e=e?function(t){let e;if(t.message||"string"==typeof t)e=t.message||t;else try{e=JSON.stringify(t,null,2)}catch(n){e=`[${t.constructor.name}]`}return{...t,message:e,statusCode:t.statusCode||t.status||t.response&&t.response.status||500}}(e):null;const n=this.nuxt||this.$options.nuxt;return n.dateErr=Date.now(),n.err=e,t&&(t.nuxt.error=e),e}},...Ge};n.app=o;const c=t?t.next:t=>o.router.push(t);let d;if(t)d=e.resolve(t.url).route;else{const path=function(base,t){let path=window.location.pathname;return"hash"===t?window.location.hash.replace(/^#\//,""):(base&&0===path.indexOf(base)&&(path=path.slice(base.length)),decodeURI(path||"/")+window.location.search+window.location.hash)}(e.options.base);d=e.resolve(path).route}await w(o,{route:d,next:c,error:o.nuxt.error.bind(o),store:n,payload:t?t.payload:void 0,req:t?t.req:void 0,res:t?t.res:void 0,beforeRenderFns:t?t.beforeRenderFns:void 0});const h=function(t,e){if(!t)throw new Error("inject(key, value) has no key provided");if(void 0===e)throw new Error("inject(key, value) has no value provided");o[t="$"+t]=e,n[t]=o[t];const r="__nuxt_"+t+"_installed__";l.a[r]||(l.a[r]=!0,l.a.use(()=>{l.a.prototype.hasOwnProperty(t)||Object.defineProperty(l.a.prototype,t,{get(){return this.$root.$options[t]}})}))};return"function"==typeof ns&&await ns(o.context,h),"function"==typeof us&&await us(o.context,h),t&&t.url&&await new Promise((n,r)=>{e.push(t.url,n,()=>{const r=e.afterEach(async(e,l,c)=>{t.url=e.fullPath,o.context.route=await x(e),o.context.params=e.params||{},o.context.query=e.query||{},r(),n()})})}),{app:o,store:n,router:e}}var gn={name:"NuxtLink",extends:l.a.component("RouterLink"),props:{noPrefetch:{type:Boolean,default:!1}}};l.a.component(gn.name,gn),l.a.component("NLink",gn);const _n=n(198)("nuxt:render");_n.color=4;const vn=()=>new l.a({render:t=>t("div")}),bn=t=>e=>{if(t.redirected=e,!t.res)return void(t.nuxt.serverRendered=!1);e.query=Object(r.stringify)(e.query),e.path=e.path+(e.query?"?"+e.query:"");e.path.startsWith("http"),e.path!==t.url?(t.res.writeHead(e.status,{Location:e.path}),t.res.end()):t.redirected=!1};e.default=(async t=>{t.redirected=!1,t.next=bn(t),t.beforeRenderFns=[],t.nuxt={layout:"default",data:[],error:null,state:null,serverRendered:!0};const{app:e,router:n,store:r}=await fn(t),o=new l.a(e);t.meta=o.$meta(),t.asyncData={};const c=async()=>{await Promise.all(t.beforeRenderFns.map(e=>C(e,{Components:m,nuxtState:t.nuxt}))),t.nuxt.state=r.state},d=async()=>{const n="function"==typeof re.layout?re.layout(e.context):re.layout;return t.nuxt.layout=n||"default",await o.loadLayout(n),o.setLayout(n),await c(),o},h=()=>(e.context.error({statusCode:404,path:t.url,message:"This page could not be found"}),d()),m=y(n.match(t.url));if(r._actions&&r._actions.nuxtServerInit)try{await r.dispatch("nuxtServerInit",e.context)}catch(t){throw _n("error occurred when calling nuxtServerInit: ",t.message),t}if(t.redirected)return vn();if(t.nuxt.error)return d();let _=["route-change"];if(_=_.map(t=>"function"==typeof t?t:("function"!=typeof f[t]&&e.context.error({statusCode:500,message:"Unknown middleware "+t}),f[t])),await k(_,e.context),t.redirected)return vn();if(t.nuxt.error)return d();let $=m.length?m[0].options.layout:re.layout;if("function"==typeof $&&($=$(e.context)),await o.loadLayout($),t.nuxt.error)return d();if($=o.setLayout($),t.nuxt.layout=o.layoutName,_=[],($=v($)).options.middleware&&(_=_.concat($.options.middleware)),m.forEach(t=>{t.options.middleware&&(_=_.concat(t.options.middleware))}),_=_.map(t=>"function"==typeof t?t:("function"!=typeof f[t]&&e.context.error({statusCode:500,message:"Unknown middleware "+t}),f[t])),await k(_,e.context),t.redirected)return vn();if(t.nuxt.error)return d();let x=!0;try{for(const t of m)if("function"==typeof t.options.validate&&!(x=await t.options.validate(e.context)))break}catch(t){return e.context.error({statusCode:t.statusCode||"500",message:t.message}),d()}if(!x)return t._generate&&(t.nuxt.serverRendered=!1),h();if(!m.length)return h();const w=await Promise.all(m.map(n=>{const r=[];if(n.options.asyncData&&"function"==typeof n.options.asyncData){const o=C(n.options.asyncData,e.context);o.then(e=>(t.asyncData[n.cid]=e,function(t,e){if(!e&&t.options.__hasNuxtData)return;const n=t.options._originDataFn||t.options.data||function(){return{}};t.options._originDataFn=n,t.options.data=function(){const data=n.call(this);return this.$ssrContext&&(e=this.$ssrContext.asyncData[t.cid]),{...data,...e}},t.options.__hasNuxtData=!0,t._Ctor&&t._Ctor.options&&(t._Ctor.options.data=t.options.data)}(n),e)),r.push(o)}else r.push(null);return n.options.fetch?r.push(n.options.fetch(e.context)):r.push(null),Promise.all(r)}));return t.nuxt.data=w.map(t=>t[0]||{}),t.redirected?vn():t.nuxt.error?d():(await c(),o)})},function(t,e,n){"use strict";n.r(e);const r=(t,{q:q,type:e,page:n})=>t.$axios.$get("search/new",{params:{q:q,type:e,page:n}});n.d(e,"state",function(){return l}),n.d(e,"mutations",function(){return c}),n.d(e,"actions",function(){return d});const o={all:"综合",bangumi:"番剧",video:"视频",post:"帖子",score:"漫评",role:"股市",user:"用户"},l=()=>({tabs:o,lastSearchKeywords:"",resource:Object.assign({},...Object.keys(o).map(t=>({[t]:{list:[],page:0,total:0,noMore:!1,loading:!1}}))),bangumis:[]}),c={RESET_DATA(t){t.lastSearchKeywords="",t.resource=Object.assign({},...Object.keys(o).map(t=>({[t]:{list:[],page:0,total:0,noMore:!1,loading:!1}})))},SET_LOADING(t,{type:e,value:n}){t.resource[e].loading=n},SET_RESOURCE(t,{type:e,q:q,data:data}){t.lastSearchKeywords=q,t.resource[e].list=t.resource[e].list.concat(data.list),t.resource[e].page=t.resource[e].page+1,t.resource[e].noMore=data.noMore,t.resource[e].total=data.total,t.resource[e].loading=!1},SET_BANGUMIS(t,data){t.bangumis=data}},d={async fetchData({state:t,commit:e},{q:q,type:n}){if(!q)return;t.lastSearchKeywords&&t.lastSearchKeywords!==q&&e("RESET_DATA");const o=t.resource[n];o.list.length||o.noMore||o.loading||(e("SET_LOADING",{type:n,value:!0}),e("SET_RESOURCE",{q:q,type:n,data:await r(this,{q:q,type:n,page:o.page})}))},async fetchMore({state:t,commit:e},{type:n}){const q=t.lastSearchKeywords;if(!q)return;const o=t.resource[n];o.noMore||o.loading||(e("SET_LOADING",{type:n,value:!0}),e("SET_RESOURCE",{q:q,type:n,data:await r(this,{q:q,type:n,page:o.page})}))}}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"meta",function(){return meta}),n.d(r,"getWorldPost",function(){return d}),n.d(r,"getWorldImage",function(){return h}),n.d(r,"getWorldScore",function(){return m}),n.d(r,"getWorldQAQ",function(){return f}),n.d(r,"getRoleTrending",function(){return _}),n.d(r,"getBangumiPost",function(){return v}),n.d(r,"getBangumiImage",function(){return y}),n.d(r,"getBangumiRole",function(){return $}),n.d(r,"getBangumiScore",function(){return x}),n.d(r,"getBangumiQAQ",function(){return w}),n.d(r,"getBangumiCartoon",function(){return k}),n.d(r,"getUserFollowBangumis",function(){return C}),n.d(r,"getUserPost",function(){return S}),n.d(r,"getUserPostReply",function(){return E}),n.d(r,"getUserImage",function(){return I}),n.d(r,"getUserScore",function(){return N}),n.d(r,"getUserQAQ",function(){return T}),n.d(r,"getUserAnswer",function(){return O}),n.d(r,"getUserRole",function(){return j}),n.d(r,"getUserScoreDrafts",function(){return A}),n.d(r,"getUserAnswerDrafts",function(){return M}),n.d(r,"getUserBookmarks",function(){return U}),n.d(r,"getQuestionAnswers",function(){return B}),n.d(r,"cartoonRoleFans",function(){return L}),n.d(r,"virtualIdolOwners",function(){return R}),n.d(r,"virtualIdolList",function(){return P}),n.d(r,"getVirtualIdolDealList",function(){return D}),n.d(r,"myVirtualIdolDeals",function(){return z}),n.d(r,"getRecentDealList",function(){return F}),n.d(r,"getRecentBuyList",function(){return G}),n.d(r,"getIdolDraftList",function(){return W}),n.d(r,"getIdolProductOrders",function(){return H}),n.d(r,"getUserProductOrders",function(){return Q}),n.d(r,"getIdolProducts",function(){return K});var o=n(1),l=n.n(o);const c=(t,{sort:e,type:n,take:r,page:o,minId:l,seenIds:c,bangumiId:d,userZone:h})=>t.$axios.$get("flow/list",{params:{sort:e,type:n,take:r,page:o,minId:l,seenIds:c,bangumiId:d,userZone:h}}),meta=(t,{type:e})=>t.$axios.$get("flow/meta",{params:{type:e}}),d=({ctx:t,seen_ids:e,count:n,max_id:r,order_by:o})=>c(t,{type:"post",sort:o,seenIds:e,minId:r,take:n}),h=({ctx:t,seen_ids:e,count:n,max_id:r,order_by:o})=>c(t,{type:"image",sort:o,seenIds:e,minId:r,take:n}),m=({ctx:t,seen_ids:e,count:n,max_id:r,order_by:o})=>c(t,{type:"score",sort:o,seenIds:e,minId:r,take:n}),f=({ctx:t,seen_ids:e,count:n,max_id:r,order_by:o})=>c(t,{type:"question",sort:o,seenIds:e,minId:r,take:n}),_=({ctx:t,seen_ids:e,count:n,max_id:r,order_by:o})=>c(t,{type:"role",sort:o,seenIds:e,minId:r,take:n}),v=({ctx:t,id:e,seen_ids:n,count:r,max_id:o,order_by:l})=>c(t,{type:"post",bangumiId:e,sort:l,seenIds:n,minId:o,take:r}),y=({ctx:t,id:e,seen_ids:n,count:r,max_id:o,order_by:l})=>c(t,{type:"image",bangumiId:e,sort:l,seenIds:n,minId:o,take:r}),$=({ctx:t,id:e,seen_ids:n,page:r,count:o,order_by:l})=>c(t,{type:"role",bangumiId:e,sort:l,take:o,page:r,seenIds:n}),x=({ctx:t,id:e,seen_ids:n,count:r,max_id:o,order_by:l})=>c(t,{type:"score",bangumiId:e,sort:l,seenIds:n,minId:o,take:r}),w=({ctx:t,id:e,seen_ids:n,count:r,max_id:o,order_by:l})=>c(t,{type:"question",bangumiId:e,sort:l,seenIds:n,minId:o,take:r}),k=({ctx:t,id:e,page:n,count:r,order_by:o})=>t.$axios.$get(`bangumi/${e}/cartoon`,{params:{page:n,take:r,sort:o}}),C=({ctx:t,id:e})=>t.$axios.$get(`user/${e}/followed/bangumi`),S=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"post",userZone:e,sort:o,take:r,page:n}),E=({ctx:t,id:e,count:n,page:r})=>t.$axios.$get(`user/${e}/posts/reply`,{params:{count:n,page:r}}),I=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"image",userZone:e,sort:o,take:r,page:n}),N=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"score",userZone:e,sort:o,take:r,page:n}),T=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"question",userZone:e,sort:o,take:r,page:n}),O=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"answer",userZone:e,sort:o,take:r,page:n}),j=({ctx:t,id:e,page:n,count:r,order_by:o})=>c(t,{type:"role",userZone:e,sort:o,take:r,page:n}),A=({ctx:t})=>t.$axios.$get("score/drafts"),M=({ctx:t})=>t.$axios.$get("question/soga/drafts"),U=({ctx:t,page:e,take:n,order_by:r})=>t.$axios.$get("user/bookmarks",{params:{page:e,take:n,type:r}}),B=({ctx:t,id:e,count:n,seen_ids:r,order_by:o})=>c(t,{type:"answer",bangumiId:e,sort:o,take:n,seenIds:r}),L=({ctx:t,id:e,seen_ids:n,max_id:r,order_by:o})=>t.$axios.$get(`cartoon_role/${e}/fans`,{params:{seenIds:n,minId:r,sort:o}}),R=({ctx:t,id:e,seen_ids:n,max_id:r,order_by:o})=>t.$axios.$get(`cartoon_role/${e}/owners`,{params:{seenIds:n,minId:r,sort:o}}),P=({ctx:t,id:e,seen_ids:n,order_by:r})=>{const o=r.split("-");return t.$axios.$get("cartoon_role/list/idols",{params:{seenIds:n,type:o[0],sort:o[1],state:o[2],id:e}})},D=({ctx:t,seen_ids:e})=>t.$axios.$get("cartoon_role/deal_list",{params:{seenIds:e}}),z=({ctx:t})=>t.$axios.$get("cartoon_role/my_deal"),F=({ctx:t})=>t.$axios.$get("cartoon_role/recent_deal"),G=({ctx:t})=>t.$axios.$get("cartoon_role/recent_buy"),W=({ctx:t,page:e,count:n,id:r})=>t.$axios.$get("cartoon_role/market_price_draft_list",{params:{page:e,count:n,idol_id:r}}),H=({ctx:t,page:e,count:n,id:r})=>t.$axios.$get("cartoon_role/get_idol_request_list",{params:{page:e,take:n,idol_id:r}}),Q=({ctx:t,page:e,count:n})=>t.$axios.$get("cartoon_role/get_my_product_request_list",{params:{page:e,take:n}}),K=({ctx:t,max_id:e,id:n})=>t.$axios.$get("cartoon_role/products",{params:{last_id:e,idol_id:n}});n.d(e,"state",function(){return Z}),n.d(e,"actions",function(){return J}),n.d(e,"mutations",function(){return Y}),n.d(e,"getters",function(){return X});const V={list:[],page:0,noMore:!1,nothing:!1,loading:!1,error:!1,init:!1,total:0},Z=()=>({}),J={async initData({state:t,commit:e},{id:n="",type:o,func:l,count:c=12,sort:d,refresh:h=!1,force:m=!1}){const f=`${l}-${n}-${d}`,_=t[f];if(_&&_.error&&!m)return;if(_&&_.loading)return;if(_&&_.init&&!h)return;e("INIT_STATE",f),e("SET_LOADING",f);const v={count:c,ctx:this};"page"===o?v.page=0:"seenIds"===o?v.seen_ids="":"lastId"===o&&(v.max_id=""),n&&(v.id=n),d&&(v.order_by=d);try{e("SET_DATA",{data:await r[l](v),fieldName:f,count:c})}catch(t){e("SET_ERROR",f)}},async loadMore({state:t,commit:e},{type:n,changing:o="id",id:l="",func:c,sort:d,count:h=12}){const m=`${c}-${l}-${d}`,f=t[m];if(f.loading||f.noMore)return;e("SET_LOADING",m);const _={count:h,ctx:this};if("page"===n)_.page=f.page;else if("lastId"===n){const t=f.list[f.list.length-1];let e;/\./.test(o)?(e=t,o.split(".").forEach(t=>{e=e[t]})):e=t[o],_.max_id=e}else"seenIds"===n&&(_.seen_ids=f.list.map(t=>{if(!/\./.test(o))return t[o];let e=t;return o.split(".").forEach(t=>{e=e[t]}),e}).toString());l&&(_.id=l),d&&(_.order_by=d);try{e("SET_DATA",{data:await r[c](_),fieldName:m,count:h})}catch(t){e("SET_ERROR",m)}}},Y={SET_ERROR(t,e){t[e].error=!0,t[e].loading=!1},INIT_STATE(t,e){l.a.set(t,e,Object.assign({},V))},SET_LOADING(t,e){t[e].loading=!0},SET_DATA(t,{data:data,fieldName:e,count:n}){if(!t[e])return;const r=(data=>!Array.isArray(data))(data);t[e].init?t[e].list=r?t[e].list.concat(data.list):t[e].list.concat(data):(t[e].init=!0,t[e].list=r?data.list:data,t[e].nothing=r?0===data.total:0===data.length),t[e].page++,t[e].noMore=r?data.noMore:"seenIds"===t.type?0===data.length:data.length<n,t[e].total=data.total||0,t[e].loading=!1,t[e].error=!1}},X={getFlow:t=>(e,n,r="")=>t[`${e}-${r}-${n}`]}},function(t,e,n){"use strict";n.r(e);var r=n(53),o=n.n(r);n.d(e,"state",function(){return l}),n.d(e,"mutations",function(){return c}),n.d(e,"actions",function(){return d}),n.d(e,"getters",function(){return h});const l=()=>({type:"",sort:"desc",fetchId:0,list:[],total:0,noMore:!1,submitting:!1,id:0}),c={RESET_STATE(t,{type:e}){t.type=e,t.sort="post"===e?"asc":"desc",t.fetchId=0,t.list=[],t.total=0,t.noMore=!1,t.submitting=!1,t.id=0},INIT_FETCH_TYPE(t,{type:e}){t.type=e,"post"===e&&(t.sort="asc")},SET_MAIN_COMMENTS(t,{comments:e,seeReplyId:n,id:r}){if(t.id=+r,!e.list.length)return t.noMore=e.noMore,void(t.total=e.total);const l=e.list.map(t=>{const e=t.comments.list,n=e.length,r=Object.assign(t.comments,{maxId:n?e[n-1].id:0});return Object.assign(t,{comments:r})});t.fetchId=l[l.length-1].id,!t.list.length&&n&&(t.fetchId=l.map(t=>t.id).filter(t=>t!==parseInt(n,10)).pop());const c=l.map(t=>t.id),d=t.list,h=!!c.filter(t=>-1===d.map(t=>t.id).indexOf(t)).length;t.list=t.list.filter(t=>-1===c.indexOf(t.id)),t.list=o()(t.list.concat(l),"id",t.sort),t.noMore=!h||e.noMore,t.total=h?e.total:t.list.length},SET_SUB_COMMENTS(t,{comments:e,id:n}){let r=null,o=0;if(t.list.forEach((t,e)=>{t.id===n&&(r=t,o=e)}),!r)return;t.list[o].comments.maxId=e.list[e.list.length-1].id;const l=e.list.map(t=>t.id),c=r.comments.list,d=!!l.filter(t=>-1===c.map(t=>t.id).indexOf(t)).length;t.list[o].comments.list=c.filter(t=>-1===l.indexOf(t.id)),t.list[o].comments.list=t.list[o].comments.list.concat(e.list),t.list[o].comments.noMore=!d||e.noMore,t.list[o].comments.total=d?e.total:t.list[o].comments.list.length},CREATE_MAIN_COMMENT(t,e){"asc"===t.sort?t.list.push(e):t.list.unshift(e),t.total=t.total+1},CREATE_SUB_COMMENT(t,{id:e,comment:n}){t.list.forEach((r,o)=>{r.id===e&&(t.list[o].comments.list.push(n),t.list[o].comments.total=t.list[o].comments.total+1)})},SET_SUBMITTING(t,{result:e}){t.submitting=e},DELETE_SUB_COMMENT(t,{parentId:e,id:n}){t.list.forEach((r,o)=>{r.id===e&&r.comments.list.forEach((e,r)=>{e.id===n&&(t.list[o].comments.list.splice(r,1),t.list[o].comments.total=t.list[o].comments.total-1)})})},DELETE_MAIN_COMMENT(t,{id:e}){t.list.forEach((n,r)=>{n.id===e&&(t.list.splice(r,1),t.total=t.total-1)})},TOGGLE_LIKE_SUB_COMMENT(t,{id:e,parentId:n}){t.list.forEach((r,o)=>{r.id===n&&r.comments.list.forEach((n,r)=>{if(n.id===e){const e=!t.list[o].comments[r].liked;t.list[o].comments[r].liked=e,t.list[o].comments[r].like_count=t.list[o].comments[r].like_count+(e?1:-1)}})})},TOGGLE_LIKE_MAIN_COMMENT(t,{id:e}){t.list.forEach((n,r)=>{if(n.id===e){const e=!t.list[r].liked;t.list[r].liked=e,t.list[r].like_count=t.list[r].like_count+(e?1:-1)}})}},d={async getMainComments({state:t,commit:e},{type:n,id:r,onlySeeMaster:o,seeReplyId:l,firstRequest:c}){if(t.type)if(t.type===n)if(t.id!==+r)e("RESET_STATE",{type:n});else{if(t.noMore)return;if(t.list.length&&c)return;c&&e("RESET_STATE",{type:n})}else e("RESET_STATE",{type:n});else e("INIT_FETCH_TYPE",{type:n});const d=await((t,{type:e,id:n,fetchId:r,onlySeeMaster:o,seeReplyId:l})=>t.$axios.$get("comment/main/list",{params:{fetchId:r,onlySeeMaster:o,seeReplyId:l,type:e,id:n}}))(this,{type:n,id:r,onlySeeMaster:o,seeReplyId:l,fetchId:t.fetchId});d&&e("SET_MAIN_COMMENTS",{comments:d,seeReplyId:l,id:r})},async getSubComments({state:t,commit:e},{type:n,id:r}){const o=t.list.filter(t=>t.id===r)[0].comments;o.noMore||e("SET_SUB_COMMENTS",{comments:await((t,{type:e,id:n,maxId:r})=>t.$axios.$get("comment/sub/list",{params:{maxId:r,type:e,id:n}}))(this,{type:n,id:r,maxId:o.maxId}),id:r})},async createMainComment({commit:t},{images:e,content:content,type:n,id:r}){const o=await((t,{type:e,id:n,content:content,images:r})=>t.$axios.$post("comment/main/create",{content:content,images:r,type:e,id:n}))(this,{type:n,id:r,content:content,images:e});return t("CREATE_MAIN_COMMENT",o.data),o},async createSubComment({commit:t},{id:e,type:n,content:content,targetUserId:r}){const o=await((t,{type:e,id:n,content:content,targetUserId:r})=>t.$axios.$post("comment/main/reply",{targetUserId:r,content:content,type:e,id:n}))(this,{id:e,type:n,content:content,targetUserId:r});return t("CREATE_SUB_COMMENT",{id:e,comment:o.data}),o},async deleteSubComment({commit:t},{id:e,type:n,parentId:r}){await((t,{type:e,id:n})=>t.$axios.$post("comment/sub/delete",{type:e,id:n}))(this,{id:e,type:n}),t("DELETE_SUB_COMMENT",{parentId:r,id:e})},async deleteMainComment({commit:t},{id:e,type:n}){await((t,{type:e,id:n})=>t.$axios.$post("comment/main/delete",{type:e,id:n}))(this,{id:e,type:n}),t("DELETE_MAIN_COMMENT",{id:e})},async toggleLikeSubComment({commit:t},{type:e,id:n,parentId:r}){t("TOGGLE_LIKE_SUB_COMMENT",{id:n,parentId:r}),await((t,{type:e,id:n})=>t.$axios.$post("comment/sub/toggleLike",{type:e,id:n}))(this,{type:e,id:n})},async toggleLikeMainComment({commit:t},{type:e,id:n}){t("TOGGLE_LIKE_MAIN_COMMENT",{id:n}),await((t,{type:e,id:n})=>t.$axios.$post("comment/main/toggleLike",{type:e,id:n}))(this,{type:e,id:n})}},h={}},function(t,e){t.exports=require("vuetrend")},function(t,e){t.exports=require("mousetrap")},function(t,e){t.exports=require("element-ui/lib/tag")},function(t,e){t.exports=require("element-ui/lib/collapse-item")},function(t,e){t.exports=require("element-ui/lib/collapse")},function(t,e){t.exports=require("element-ui/lib/table-column")},function(t,e){t.exports=require("element-ui/lib/table")},function(t,e){t.exports=require("element-ui/lib/date-picker")},function(t,e){t.exports=require("numerify")},function(t,e){t.exports=require("utils-lite")},function(t,e){t.exports=require("element-ui/lib/carousel-item")},function(t,e){t.exports=require("element-ui/lib/carousel")},function(t,e){t.exports=require("particles.js")},function(t,e){t.exports=require("element-ui/lib/notification")},function(t,e){t.exports=require("element-ui/lib/step")},function(t,e){t.exports=require("element-ui/lib/steps")},function(t,e){t.exports=require("@antv/f2")},function(t,e){t.exports=require("element-ui/lib/progress")},function(t,e){t.exports=require("vue-croppa")},function(t,e){t.exports=require("chimee")},function(t,e){t.exports=require("chimee-plugin-controlbar")},function(t,e){t.exports=require("chimee-plugin-center-state")},function(t,e){t.exports=require("echarts/lib/chart/radar")},function(t,e){t.exports=require("echarts/lib/echarts")},function(t,e){t.exports=require("echarts/lib/component/tooltip")},function(t,e){t.exports=require("echarts/lib/component/legend")},function(t,e){t.exports=require("vue-waterfall/lib/waterfall")},function(t,e){t.exports=require("vue-waterfall/lib/waterfall-slot")}]);
//# sourceMappingURL=server.js.map