exports.ids=[60],exports.modules={233:function(t,e){},234:function(t,e){},235:function(t,e){},236:function(t,e){},237:function(t,e){},238:function(t,e){},241:function(t,e,r){"use strict";var n={name:"CommentReplyForm",props:{type:{required:!0,type:String},id:{required:!0,type:Number},toUserId:{required:!0,type:Number},value:{type:Boolean,default:!1,required:!0}},data(){return{open:this.value,submitting:!1,content:""}},mounted(){this.$watch("value",t=>{this.open=t,t&&this.$nextTick(()=>{this.$refs.input.focus()})}),this.$watch("open",t=>{this.$emit("input",t)})},methods:{cancel(){this.open=!1},async submit(){if(this.$store.state.login){if(this.content&&!this.submitting){this.submitting=!0;try{const t=await this.$store.dispatch("comment/createSubComment",{id:this.id,ctx:this,type:this.type,content:this.content,targetUserId:this.toUserId});this.open=!1,this.content="",this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp)}catch(t){this.$toast.error(t)}finally{this.submitting=!1}}}else this.$channel.$emit("sign-in")}}},o=r(0);var component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.open?r("div",{staticClass:"comment-reply-form"},[t._ssrNode('<div class="btn-group">',"</div>",[r("el-button",{attrs:{size:"mini",type:"info",plain:""},on:{click:t.cancel}},[t._v("取消")]),t._ssrNode(" "),r("el-button",{attrs:{loading:t.submitting,size:"mini",type:"primary"},on:{click:t.submit}},[t._v("发表")])],2),t._ssrNode(' <div class="input-wrap"><input type="text" placeholder="请缩减至100字以内" maxlength="100"'+t._ssrAttr("value",t.content)+"></div>")],2):t._e()},[],!1,function(t){var e=r(249);e.__inject__&&e.__inject__(t)},null,"f8f6afc8");e.a=component.exports},246:function(t,e){},247:function(t,e,r){"use strict";var n=r(241),o={name:"VSubCommentItem",components:{CommentReplyForm:n.a},props:{comment:{required:!0,type:Object},parentUserId:{required:!0,type:Number},type:{required:!0,type:String,default:""}},data:()=>({showReplyArea:!1,deleting:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},isMine(){return this.currentUserId===this.comment.from_user_id},canDelete(){return this.isMine||this.currentUserId===this.parentUserId},focusThisComment(){return parseInt(this.$route.query["reply-id"])===this.comment.id}},methods:{openReplyForm(){this.currentUserId?this.showReplyArea=!this.showReplyArea:this.$channel.$emit("sign-in")},deleteComment(){this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteSubComment",{ctx:this,type:this.type,id:this.comment.id,parentId:this.comment.parent_id})}).catch(t=>{this.deleting=!1,"cancel"!==t&&this.$toast.error(t)}))}}},l=r(0);var c={name:"VSubCommentList",components:{SubCommentItem:Object(l.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sub-comment-item",class:{"focused-sub-comment":t.focusThisComment},attrs:{id:"sub-comment-"+t.comment.id}},[t._ssrNode('<div class="sub-user">',"</div>",[t._ssrNode('<div class="avatar">',"</div>",[r("user-card",{attrs:{id:t.comment.from_user_id,zone:t.comment.from_user_zone}},[r("v-img",{attrs:{src:t.comment.from_user_avatar,avatar:!0,width:24,height:24}})],1)],1)]),t._ssrNode(" "),t._ssrNode('<div class="sub-body">',"</div>",[r("user-card",{attrs:{id:t.comment.from_user_id,zone:t.comment.from_user_zone,"custom-class":"from-user href-fade-blue"}},[t._v("\n      "+t._s(t.comment.from_user_name)+"\n    ")]),t._ssrNode(" "),t._ssrNode('<span class="sub-text">',"</span>",[t.comment.to_user_id&&t.comment.to_user_id!==t.parentUserId?[t._ssrNode("\n        回复\n        "),r("user-card",{attrs:{id:t.comment.to_user_id,zone:t.comment.to_user_zone,"custom-class":"to-user"}},[t._v("\n          @"+t._s(t.comment.to_user_name)+"\n        ")])]:t._e(),t._ssrNode(t._ssrEscape("\n      "+t._s(t.comment.content)+"\n    "))],2),t._ssrNode(" "),t._ssrNode('<div class="sub-extra">',"</div>",[r("el-tooltip",{attrs:{content:t.comment.created_at,placement:"top",effect:"dark"}},[r("v-time",{model:{value:t.comment.created_at,callback:function(e){t.$set(t.comment,"created_at",e)},expression:"comment.created_at"}})],1),t._ssrNode(' <button class="reply-btn">回复</button> '),t.canDelete?t._ssrNode("<button>","</button>",[t._ssrNode('<i class="iconfont icon-shanchu"></i>')],2):r("report-dialog",{attrs:{id:t.comment.id,type:t.type+"_reply"}},[r("button",{staticClass:"reply-btn"},[t._v("举报")])])],2),t._ssrNode(" "),r("comment-reply-form",{attrs:{id:t.comment.parent_id,type:t.type,"to-user-id":t.comment.from_user_id},model:{value:t.showReplyArea,callback:function(e){t.showReplyArea=e},expression:"showReplyArea"}})],2)],2)},[],!1,function(t){var e=r(250);e.__inject__&&e.__inject__(t)},null,"984d8742").exports},props:{parentComment:{required:!0,type:Object},type:{required:!0,type:String,default:""}},data:()=>({loading:!1,showCollapse:!1,collapsed:!1}),computed:{comments(){return this.parentComment.comments},authorId(){return this.parentComment.from_user_id},filterComments(){if(!this.collapsed)return this.comments.list;const data=this.comments,t=data.list,e=t.slice(0,5);if(t.every(t=>t.id<=data.maxId))return e;const r=e.map(t=>t.id);return e.concat(t.filter(t=>t.id>data.maxId&&-1===r.indexOf(t.id)))}},methods:{async loadMore(){if(!this.loading){this.loading=!0;try{await this.$store.dispatch("comment/getSubComments",{ctx:this,type:this.type,id:this.parentComment.id}),this.showCollapse=!0}catch(t){this.$toast.error(t)}finally{this.loading=!1}}}}};var d={name:"VCommentItem",components:{SubCommentList:Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sub-comment-list-wrap"},[t._l(t.filterComments,function(e){return r("sub-comment-item",{key:e.id,attrs:{comment:e,"parent-user-id":t.authorId,type:t.type}})}),t._ssrNode(" "+(!t.comments.noMore||t.comments.list.length>5?'<div class="view-more">\n    共<strong>'+t._ssrEscape(t._s(t.comments.total))+"</strong>条回复\n    "+(t.comments.noMore?"\x3c!----\x3e":'\n      ，\n      <button class="more-btn">查看更多</button>')+" "+(t.showCollapse?'<button class="collapse-btn">'+t._ssrEscape("\n      "+t._s(t.collapsed?"展开":"收起")+"\n    ")+"</button>":"\x3c!----\x3e")+"</div>":"\x3c!----\x3e"))],2)},[],!1,function(t){var e=r(251);e.__inject__&&e.__inject__(t)},null,"8442972c").exports,CommentReplyForm:n.a},props:{comment:{required:!0,type:Object},masterId:{required:!0,type:[Number,String]},type:{required:!0,type:String,default:""}},data:()=>({deleting:!1,liking:!1,showReplyArea:!1}),computed:{currentUserId(){return this.$store.state.login?this.$store.state.user.id:0},authorId(){return this.comment.from_user_id},isMine(){return this.currentUserId===this.authorId},canDelete(){return this.isMine||this.currentUserId===this.masterId},focusThisComment(){return parseInt(this.$route.query["comment-id"])===this.comment.id}},methods:{async toggleLike(){if(this.currentUserId){if(!this.liking){this.liking=!0;try{await this.$store.dispatch("comment/toggleLikeMainComment",{ctx:this,type:this.type,id:this.comment.id})}catch(t){}finally{this.liking=!1}}}else this.$channel.$emit("sign-in")},deleteComment(){this.deleting||(this.deleting=!0,this.$confirm("删除后无法找回, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.dispatch("comment/deleteMainComment",{ctx:this,type:this.type,id:this.comment.id}),this.$emit("delete")}).catch(t=>{this.deleting=!1,"cancel"!==t&&this.$toast.error(t)}))},replyComment(){this.currentUserId?this.showReplyArea=!this.showReplyArea:this.$channel.$emit("sign-in")}}};var m=Object(l.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"def-comment-item",class:{"focused-main-comment":t.focusThisComment},attrs:{id:"comment-"+t.comment.id}},[t._ssrNode('<div class="user">',"</div>",[r("user-card",{attrs:{id:t.comment.from_user_id,zone:t.comment.from_user_zone}},[r("v-img",{staticClass:"avatar",attrs:{src:t.comment.from_user_avatar,avatar:!0,width:48,height:48}})],1)],1),t._ssrNode(" "),t._ssrNode('<div class="body">',"</div>",[t._ssrNode('<div class="header">',"</div>",[t._ssrNode("<a"+t._ssrAttr("href",t.$alias.user(t.comment.from_user_zone))+' target="_blank" class="blue-link">'+t._ssrEscape(t._s(t.comment.from_user_name))+"</a> "+(t.comment.is_owner?"<span>(楼主)</span>":"\x3c!----\x3e")+" "),t.comment.is_leader?r("el-tooltip",{attrs:{placement:"top",effect:"dark",content:"版主"}},[r("i",{staticClass:"iconfont icon-leader"})]):t.comment.is_master?r("el-tooltip",{attrs:{placement:"top",effect:"dark",content:"代行者"}},[r("i",{staticClass:"iconfont icon-master"})]):t._e()],2),t._ssrNode(' <div class="content">'+t._s(t.comment.content)+"</div> "),t._ssrNode('<div class="footer">',"</div>",[t._ssrNode('<span class="floor-count">'+t._ssrEscape("#"+t._s(t.comment.floor_count-1))+"</span> "),r("el-tooltip",{attrs:{content:t.comment.created_at,placement:"top",effect:"dark"}},[r("v-time",{attrs:{datetime:t.comment.created_at}})],1),t._ssrNode(' <button class="like-btn"><i'+t._ssrClass("iconfont",[t.comment.liked?"icon-dianzan-active":"icon-dianzan"])+"></i> "+(t.comment.like_count?"<span>"+t._ssrEscape(t._s(t.comment.like_count))+"</span>":"\x3c!----\x3e")+'</button> <button class="reply-btn">回复</button> '),t.canDelete?t._ssrNode('<button class="delete-btn">',"</button>",[t._ssrNode('<i class="iconfont icon-shanchu"></i>')],2):r("report-dialog",{attrs:{id:t.comment.id,type:t.type+"_comment"}},[r("button",{staticClass:"reply-btn main-comment-report-btn"},[t._v("举报")])])],2),t._ssrNode(" "),r("comment-reply-form",{attrs:{id:t.comment.id,"to-user-id":t.authorId,type:t.type},model:{value:t.showReplyArea,callback:function(e){t.showReplyArea=e},expression:"showReplyArea"}}),t._ssrNode(" "),r("sub-comment-list",{attrs:{"parent-comment":t.comment,type:t.type}})],2)],2)},[],!1,function(t){var e=r(252);e.__inject__&&e.__inject__(t)},null,"8deb9696").exports,h={name:"CreateCommentForm",props:{type:{type:String,required:!0},id:{type:[Number,String],required:!0},masterId:{type:Number,required:!0}},data:()=>({content:""}),computed:{isGuest(){return!this.$store.state.login},submitting(){return this.$store.state.comment.submitting},userAvatar(){return this.isGuest?"https://image.calibur.tv/default/user-avatar":this.$store.state.user.avatar}},methods:{async submit(){if(this.isGuest)return this.$toast.info("继续操作前请先登录"),void this.$channel.$emit("sign-in");if(this.content&&!this.submitting){this.$store.commit("comment/SET_SUBMITTING",{result:!0});try{const t=await this.$store.dispatch("comment/createMainComment",{content:this.content,images:[],type:this.type,id:this.id,ctx:this});this.content="",this.withImage&&this.$refs.uploader.clearFiles(),this.$toast.success(t.message),this.$store.commit("UPDATE_USER_EXP",t.exp),window.__closeImageLazy__||setTimeout(()=>{const e=document.getElementById(`comment-${t.data.id}`);e&&this.$scrollToY(this.$utils.getOffsetTop(e)-200,600)},400),this.$emit("submit")}catch(t){this.$toast.error(t)}finally{this.$store.commit("comment/SET_SUBMITTING",{result:!1})}}},handleTextAreaFocus(){this.isGuest&&this.$channel.$emit("sign-in")}}};var _={name:"CommentMain",components:{CommentCreateForm:Object(l.a)(h,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"create-comment-form"},[e("v-img",{staticClass:"avatar",attrs:{src:this.userAvatar,width:48,height:48,avatar:!0}}),this._ssrNode(' <div class="main-area"><button class="submit-btn">发表<br>评论</button> <div class="text-wrap"><textarea placeholder="请自觉遵守互联网相关的政策法规，严禁发布色情、暴力、反动的言论。" maxlength="1000"></textarea></div></div>')],2)},[],!1,function(t){var e=r(253);e.__inject__&&e.__inject__(t)},null,"0c39bf82").exports,CommentItem:m},props:{id:{required:!0,type:[Number,String]},type:{required:!0,type:String,validator:t=>~["post","video","image","score","question","answer","role"].indexOf(t)},onlySeeMaster:{type:Boolean,default:!1},masterId:{type:[Number,String],required:!0},emptyText:{type:String,default:"暂无评论，快来抢沙发吧╮(￣▽￣)╭！"},auto:{type:Boolean,default:!1},lazy:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0}},data:()=>({loading:!1}),computed:{store(){return this.$store.state.comment},list(){return this.store.list},noMore(){return this.store.noMore},total(){return this.store.total}},mounted(){this.auto&&this.$channel.$on(`fire-load-comment-${this.type}-${this.id}`,()=>{this.loadMore(!0)}),this.lazyLoadComment()},methods:{async loadMore(t=!1){if(!this.loading){this.loading=!0;try{await this.$store.dispatch("comment/getMainComments",{ctx:this,type:this.type,id:this.id,onlySeeMaster:this.onlySeeMaster?1:0,firstRequest:t})}catch(t){this.$toast.error(t)}finally{this.loading=!1}}},async lazyLoadComment(){if(!this.lazy)return void this.$nextTick(()=>{this.scrollToReply()});const{query:t}=this.$route;await this.$store.dispatch("comment/getMainComments",{id:this.id,type:this.type,seeReplyId:t["comment-id"],onlySeeMaster:t.only&&parseInt(t.only,10)?1:0}),this.$nextTick(()=>{this.scrollToReply()})},scrollToReply(){const t=this.$route.query["comment-id"];if(!t)return;const e=document.getElementById(`comment-${t}`);e&&this.$nextTick(()=>{this.$scrollToY(this.$utils.getOffsetTop(e)-200,400)})}}};var v=Object(l.a)(_,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"comment-wrap"}},[t._t("header",[t.showHeader?r("h3",{staticClass:"sub-title"},[t._v("\n      评论"+t._s(t.total?"("+t.total+")":"")+"\n    ")]):t._e(),t._v(" "),r("comment-create-form",{attrs:{id:t.id,type:t.type,"master-id":t.masterId},on:{submit:function(e){return t.$emit("create-main-comment")}}})]),t._ssrNode(" "),t.list.length?t._ssrNode('<div id="comment-list-wrap">',"</div>",t._l(t.list,function(e){return t._ssrNode('<div class="comment-item-wrap">',"</div>",[t._t("comment-item",[r("comment-item",{attrs:{comment:e,type:t.type,"master-id":t.masterId},on:{delete:function(e){return t.$emit("delete-main-comment")}}})],{comment:e})],2)}),0):t.emptyText?t._ssrNode('<p class="no-content">'+t._ssrEscape(t._s(t.emptyText))+"</p>"):t._e(),t._ssrNode(" "),t._ssrNode('<div id="comment-list-footer">',"</div>",[t._ssrNode('<div class="load-more-btn">',"</div>",[t.noMore?t._e():r("el-button",{attrs:{loading:t.loading,type:"info",plain:"",round:""},on:{click:function(e){return t.loadMore(!1)}}},[t._v(t._s(t.loading?"加载中...":"加载更多"))])],1),t._ssrNode(" "),t._t("reply",[t.list.length>=10?r("comment-create-form",{attrs:{id:t.id,type:t.type,"master-id":t.masterId},on:{submit:function(e){return t.$emit("create-main-comment")}}}):t._e()])],2)],2)},[],!1,function(t){var e=r(254);e.__inject__&&e.__inject__(t)},null,"7259fc5b");e.a=v.exports},249:function(t,e,r){"use strict";r.r(e);var n=r(233),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},250:function(t,e,r){"use strict";r.r(e);var n=r(234),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},251:function(t,e,r){"use strict";r.r(e);var n=r(235),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},252:function(t,e,r){"use strict";r.r(e);var n=r(236),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},253:function(t,e,r){"use strict";r.r(e);var n=r(237),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},254:function(t,e,r){"use strict";r.r(e);var n=r(238),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},277:function(t,e){},278:function(t,e){},279:function(t,e,r){"use strict";r.r(e);var n=r(246),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},283:function(t,e,r){"use strict";var n={name:"SocialPanel",props:{isCreator:{required:!0,type:Boolean},isMine:{required:!0,type:Boolean},id:{required:!0,type:Number},type:{required:!0,type:String,validator:t=>~["post","video","image","score","answer","video"].indexOf(t)}},computed:{isAuth(){return this.$store.state.isAuth},isGuest(){return!this.$store.state.login},source(){return this.$store.getters["social/getState"](this.type,this.id)}},methods:{computeTextByAction:t=>"reward"===t?"投食":"like"===t?"喜欢":"mark"===t?"收藏":"操作",toggleAction(t){if(this.isGuest)this.$channel.$emit("sign-in");else if(this.isMine)this.$toast.info(`不能${this.computeTextByAction(t)}自己的内容`);else if("reward"===t){if(this.source.reward)return void this.$toast.info("已投食过");this.$confirm("向TA投食需要消耗你一个团子，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.submitAction("reward")}).catch(()=>{})}else this.submitAction(t)},async submitAction(t){const data=await this.$store.dispatch("social/toggleAction",{type:this.type,id:this.id,action:t});data.success&&this.$emit(`${t}-callback`,{result:data.result})}}},o=r(0);var component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.source?r("div",{staticClass:"what-the-ad-block-fucked-panel"},[t._ssrNode('<div class="dont-block-me-please-buttons">',"</div>",[t._t("default"),t._ssrNode(" "),t.isCreator?r("el-button",{class:{"is-plain":t.source.reward},attrs:{loading:t.source.reward_loading,type:"warning",icon:"iconfont icon-fantuan",round:""},on:{click:function(e){return t.toggleAction("reward")}}},[t._v("\n      "+t._s(t.source.reward?"已投食":"投食")+t._s(t.source.reward_users.total?"  |  "+t.source.reward_users.total:"")+"\n    ")]):t._e(),t._ssrNode(" "),r("el-button",{class:{"is-plain":t.source.like},attrs:{loading:t.source.like_loading,type:"danger",icon:"iconfont icon-like",round:""},on:{click:function(e){return t.toggleAction("like")}}},[t._v("\n      "+t._s(t.source.like?"已喜欢":"喜欢")+t._s(t.source.like_users.total?"  |  "+t.source.like_users.total:"")+"\n    ")]),t._ssrNode(" "),r("el-button",{class:{"is-plain":t.source.mark},attrs:{loading:t.source.mark_loading,type:"success",icon:"iconfont icon-mark",round:""},on:{click:function(e){return t.toggleAction("mark")}}},[t._v("\n      "+t._s(t.source.mark?"已收藏":"收藏")+t._s(t.source.mark_users.total?"  |  "+t.source.mark_users.total:"")+"\n    ")])],2),t._ssrNode(" "),t._ssrNode('<div class="users">',"</div>",[r("ava-dialog",{attrs:{id:t.id,title:t.isCreator?"投食的人":"喜欢的人",action:t.isCreator?"reward":"like",type:t.type}})],1)],2):t._e()},[],!1,function(t){var e=r(279);e.__inject__&&e.__inject__(t)},null,"7ba00a31");e.a=component.exports},302:function(t,e,r){"use strict";r.d(e,"c",function(){return n}),r.d(e,"d",function(){return o}),r.d(e,"a",function(){return l}),r.d(e,"b",function(){return c}),r.d(e,"e",function(){return d});const n=(t,{id:e})=>t.$axios.$get(`video/${e}/show?refer=web`),o=(t,{id:e})=>t.$axios.$post("video/playing",{id:e}),l=(t,{season_id:e})=>t.$axios.$post("video/buy",{season_id:e}),c=(t,form)=>t.$axios.$post("video/create",form),d=(t,e,form)=>t.$axios.$post(`video/${e}/update`,form)},360:function(t,e,r){"use strict";r.r(e);var n=r(277),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},361:function(t,e,r){"use strict";r.r(e);var n=r(278),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},391:function(t,e){},392:function(t,e){},399:function(t,e,r){"use strict";var n=r(6),o=r(302),l={name:"EditVideoForm",mixins:[n.a],props:{season:{type:Array,default:()=>[]},videoId:{type:[Number,String],default:0},seasonId:{type:[Number,String],default:""},bangumiId:{required:!0,type:[Number,String]},video:{type:Object,default:null}},data(){return{submitting:!1,form:{season_id:this.seasonId?this.seasonId:this.season[this.season.length-1].id,bangumi_id:this.bangumiId,name:this.video?this.video.name:"",episode:this.video?this.video.episode:0,poster:this.video?this.video.poster.split("calibur.tv/")[1]:"",baidu_cloud_src:this.video&&this.video.is_baidu_cloud?this.video.src:"",baidu_cloud_pwd:this.video?this.video.baidu_cloud_pwd:""},rule:{name:[{validator:(t,e,r)=>e?e.length>30?r(new Error("名字最长 30 个字")):void r():r(new Error("请先填名字")),trigger:"submit"}],episode:[{validator:(t,e,r)=>{if(!e)return r(new Error("集数是必填的"));r()},trigger:"submit"}],poster:[{validator:(t,e,r)=>{if(!e)return r(new Error("请选择一个封面"));r()},trigger:"submit"}],baidu_cloud_src:[{validator:(t,e,r)=>""===e?r():/^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i.test(e)?/pan.baidu.com/.test(e)?void r():r(new Error("只支持百度云资源")):r(new Error("请输入合法链接")),trigger:"submit"}],baidu_cloud_pwd:[{validator:(t,e,r)=>{if(e.length>6)return r(new Error("密码长度在6位以内"));r()},trigger:"submit"}]}}},computed:{minPart(){let t=1;return this.season.forEach(e=>{e.id===this.form.season_id&&(t=e.last_part)}),t},currentUserId(){return this.$store.state.user.id}},methods:{submit(){this.$refs.form.validate(t=>{if(!t)return!1;this.submitting||(this.submitting=!0,this.videoId?Object(o.e)(this,this.videoId,Object.assign({},this.form,{baidu_cloud_src:this.form.baidu_cloud_src.split("?")[0]})).then(()=>{window.location.reload()}).catch(t=>{this.$toast.error(t),this.submitting=!1}):Object(o.b)(this,Object.assign({},this.form,{baidu_cloud_src:this.form.baidu_cloud_src.split("?")[0]})).then(t=>{this.$refs.form.resetFields(),this.$refs.upload.clearFiles(),this.submitting=!1,this.$confirm("是否前往视频页面?","提示",{confirmButtonText:"前往查看",cancelButtonText:"留在这里",type:"warning"}).then(()=>{window.location=this.$alias.video(t)}).catch(()=>{})}).catch(t=>{this.$toast.error(t),this.submitting=!1}))})},beforePosterUpload(t){return this.uploadConfig.max=1,this.uploadConfig.pathPrefix=`user/${this.currentUserId}/album`,this.beforeImageUpload(t)},handleAlbumUploadSuccess(t){this.form.poster=t.data.url,this.$toast.success("封面上传成功")},handlePosterRemove(){this.form.poster=null}}},c=r(0);var component=Object(c.a)(l,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"edit-video-form"},[r("el-form",{ref:"form",attrs:{model:t.form,rules:t.rule,disabled:t.submitting,"label-width":"45px"}},[r("el-form-item",{attrs:{label:"名字",prop:"name"}},[r("el-input",{staticStyle:{width:"450px"},attrs:{placeholder:"填写这一话的名字"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"集数",prop:"episode"}},[r("el-input-number",{attrs:{min:t.minPart,step:.5},model:{value:t.form.episode,callback:function(e){t.$set(t.form,"episode",e)},expression:"form.episode"}})],1),t._v(" "),!t.videoId&&t.season.length>1?r("el-form-item",{attrs:{label:"季度",prop:"season_id"}},[r("el-select",{attrs:{placeholder:"请选择季度"},model:{value:t.form.season_id,callback:function(e){t.$set(t.form,"season_id",e)},expression:"form.season_id"}},t._l(t.season,function(t){return r("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})}),1)],1):t._e(),t._v(" "),r("el-form-item",{attrs:{label:"封面",prop:"poster"}},[r("el-upload",{ref:"upload",attrs:{data:t.uploadHeaders,"on-error":t.handleImageUploadError,"on-success":t.handleAlbumUploadSuccess,"before-upload":t.beforePosterUpload,"on-remove":t.handlePosterRemove,action:t.imageUploadAction,accept:t.imageUploadAccept}},[r("el-button",{attrs:{loading:t.submitting,size:"small",round:""}},[t._v("上传封面图")])],1),t._v(" "),t.form.poster?r("div",{staticClass:"preview-poster",style:{backgroundImage:"url("+t.$resize(t.form.poster,{width:400,mode:2})+")"}}):t._e()],1),t._v(" "),r("el-form-item",{attrs:{label:"链接",prop:"baidu_cloud_src"}},[r("el-input",{attrs:{placeholder:"填写百度云视频链接"},model:{value:t.form.baidu_cloud_src,callback:function(e){t.$set(t.form,"baidu_cloud_src",e)},expression:"form.baidu_cloud_src"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"密码",prop:"baidu_cloud_pwd"}},[r("el-input",{attrs:{placeholder:"填写百度云视频密码，最长6位，可空"},model:{value:t.form.baidu_cloud_pwd,callback:function(e){t.$set(t.form,"baidu_cloud_pwd",e)},expression:"form.baidu_cloud_pwd"}})],1),t._v(" "),r("el-form-item",[r("el-button",{attrs:{loading:t.submitting,type:"primary",size:"small"},on:{click:t.submit}},[t._v("确认提交")])],1)],1)],1)},[],!1,function(t){var e=r(360);e.__inject__&&e.__inject__(t)},null,"2c87dd71");e.a=component.exports},400:function(t,e,r){"use strict";var n={name:"VParts",props:{list:{type:Array,required:!0},alias:{type:Function,required:!0},value:{type:Boolean,default:!1},isFirst:{type:Boolean,default:!0},forceAll:{type:Boolean,default:!1},allData:{type:Array,required:!0}},data(){return{maxWidth:0,take:0,part:0,page:0,showAll:this.value}},computed:{id(){return parseInt(this.$route.params.id,10)},filterList(){if(this.forceAll||this.showAll)return this.list;const t=(this.page-1)*this.take;return this.list.slice(t,t+this.take)},showMoreBtn(){return this.forceAll?this.forceAll&&this.isFirst:this.isFirst&&this.take<this.list.length}},watch:{value(t){this.showAll=t},showAll(t){this.$emit("input",t)}},mounted(){this.computeMaxWidth(),this.$watch("list",()=>{this.computeMaxWidth()})},methods:{computeMaxWidth(){let t=0;this.allData.forEach(video=>{const e=video.name.replace(/([\u4e00-\u9fa5])/g,"aa").trim().length;t<e&&(t=e)}),this.maxWidth=46+8*t,this.$nextTick(()=>{this.computePage()})},computePage(){try{this.take=2*Math.floor(this.$el.offsetWidth/(this.maxWidth+8))}catch(t){this.take=5}this.list.forEach((t,e)=>{t.id===this.id&&(this.part=e+1)}),this.page=Math.ceil(this.part/this.take)},handleFilter(){this.showAll=!this.showAll}}},o=r(0);var component=Object(o.a)(n,function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.maxWidth?r("ul",{staticClass:"v-parts"},[t._l(t.filterList,function(e){return t._ssrNode("<li>","</li>",[t._ssrNode("<a"+t._ssrAttr("href",t.alias(e.id))+t._ssrClass("oneline",{active:t.id===e.id})+t._ssrStyle(null,{width:t.maxWidth+"px"},null)+">","</a>",[t._t("default",null,{item:e})],2)])}),t._ssrNode(" "+(t.showMoreBtn?'<button class="more">'+t._ssrEscape("\n    "+t._s(t.showAll?"收起":"展开")+"\n  ")+"</button>":"\x3c!----\x3e"))],2):t._e()},[],!1,function(t){var e=r(361);e.__inject__&&e.__inject__(t)},null,"501cad58");e.a=component.exports},486:function(t,e,r){"use strict";r.r(e);var n=r(391),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},487:function(t,e,r){"use strict";r.r(e);var n=r(392),o=r.n(n);for(var l in n)"default"!==l&&function(t){r.d(e,t,function(){return n[t]})}(l);e.default=o.a},500:function(t,e,r){"use strict";r.r(e);var n=r(223),o=r.n(n),l=r(224),c=r.n(l),d=r(225),m=r.n(d),h={name:"Video",props:{source:{type:[String,Object],default:"",required:!0},otherSrc:{type:Boolean,required:!0},keyboard:{type:Boolean,default:!0},cover:{type:Boolean,default:!1},screenclick:{type:Boolean,default:!0},showvioce:{type:Boolean,default:!0},next:{type:String,default:""},debug:{type:Boolean,default:!1},isGuest:{required:!0,type:Boolean},blocked:{required:!0,type:Boolean},poster:{type:String,default:""},mustReward:{type:Boolean,default:!1},needMinLevel:{type:Number,default:0},isBaiduCloud:{type:Boolean,default:!1},baiduCloudPwd:{type:String,default:""}},data:()=>({player:null,notMove:!1,timer:0,isFull:!1,showRewardBg:!1}),computed:{isFlv(){return"flv"===this.source.split("?")[0].split(".").pop().toLowerCase()},showLevelThrottle(){return!this.$store.state.login||this.$store.state.user.exp.level<this.needMinLevel},isAuth(){return this.$store.state.isAuth}},mounted(){const t=this.$watch("isAuth",()=>{t(),this.isGuest||this.isFlv||this.otherSrc||this.showLevelThrottle||this.$nextTick(()=>{this.initVideo()})})},methods:{initVideo(){o.a.install(c.a),o.a.install(m.a);const t=this;this.player=new o.a({wrapper:"#video-wrap",src:this.source,poster:this.poster,controls:!0,autoplay:!1,noDefaultContextMenu:!0,plugin:[{name:c.a.name,majorColor:"#99a2aa",hoverColor:"#6d757a",children:t.next?{play:!0,next:{tag:"chimee-next",html:'<i class="iconfont icon-skip_next"></i>',event:{click(){window.location=t.next}}},progressBar:{layout:"one-line"},progressTime:!0,volume:!0,playbackrate:{list:[{name:"0.5",value:.5},{name:"1.0",value:1,default:!0},{name:"1.2",value:1.2},{name:"2.0",value:2}]},screen:!0}:{play:!0,progressBar:{layout:"one-line"},progressTime:!0,volume:!0,playbackrate:{list:[{name:"0.5",value:.5},{name:"1.0",value:1,default:!0},{name:"1.2",value:1.2},{name:"2.0",value:2}]},screen:!0}},{name:m.a.name}]}),this.player.on("playing",()=>{this.$emit("playing")}),this.player.on("timeupdate",function(){this.currentTime>300&&t.mustReward&&(t.player.pause(),t.$emit("reward"),t.showRewardBg=!0)}),document.addEventListener("fullscreenchange",()=>{this.handleFullScreen()}),document.addEventListener("mozfullscreenchange",()=>{this.handleFullScreen()}),document.addEventListener("webkitfullscreenchange",()=>{this.handleFullScreen()}),document.addEventListener("msfullscreenchange",()=>{this.handleFullScreen()})},cursorMoveFunc(){this.notMove=!1,document.getElementsByTagName("video")[0].classList.remove("hidden-cursor")},handleFullScreen(){const t=this.checkIsFullScreen();this.isFull=t;const video=document.getElementsByTagName("video")[0];t?(document.body.addEventListener("mousemove",this.cursorMoveFunc),setInterval(()=>{this.notMove=!0,setTimeout(()=>{this.notMove&&this.checkIsFullScreen()&&video.classList.add("hidden-cursor")},1e3)},2e3)):(video.classList.remove("hidden-cursor"),document.body.removeEventListener("mousemove",this.cursorMoveFunc),this.timer&&clearInterval(this.timer))},checkIsFullScreen(){return!!(this.invokeFieldOrMethod(document,"FullScreen")||this.invokeFieldOrMethod(document,"IsFullScreen")||document.IsFullScreen)},invokeFieldOrMethod(t,e){let r;return["webkit","moz","ms","o",""].forEach(function(n){if(r)return;""===n&&(e=e.slice(0,1).toLowerCase()+e.slice(1));let o=typeof t[n+e];o+""!="undefined"&&(r="function"===o?t[n+e]():t[n+e])}),r}}},_=r(0);var v=Object(_.a)(h,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"vue-pwa-video"},[t.isAuth?[t.source?t.isBaiduCloud?t._ssrNode('<div class="baidu-cloud-mask">',"</div>",[t._ssrNode("<p>\n        该资源是百度云链接，点击下方链接跳转播放，如果资源挂了，请发帖反馈\n      </p> "),t.baiduCloudPwd?r("a",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.baiduCloudPwd,expression:"baiduCloudPwd"}],attrs:{href:"javascript:;"},on:{success:function(e){return t.$toast.success("密码已复制到剪贴板")}}},[t._ssrNode(t._ssrEscape("密码："+t._s(t.baiduCloudPwd)))]):t._e(),t._ssrNode(" <a"+t._ssrAttr("href",t.source)+' target="_blank">点击跳转播放</a>')],2):t.isFlv?t._ssrNode('<div class="not-play-screen"><p>暂时关闭了对 flv 视频格式的支持 (´Д｀ )</p></div>'):t.otherSrc?t._ssrNode('<div class="not-play-screen"><p>应版权方要求 (⇀‸↼‶)，该视频暂不提供站内播放</p> <a'+t._ssrAttr("href",t.source)+' target="_blank">播放链接</a></div>'):t.isGuest?t._ssrNode('<div class="not-play-screen"><p>流量压力太大了 (ಥ_ಥ)，需要登录才能看番</p> <a>立即登录</a></div>'):t.blocked?t._ssrNode('<div class="not-play-screen"><p>\n        由于你消耗的视频流量过高，被系统判定为机器人恶意攻击，已被禁止看视频功能\n        <br>\n        如果看到这条信息，代表你不是机器人，那么请加官方QQ群，帮你解禁\n        <br>\n        如果你是因为在站内发表了「无意义」的内容被禁言了，抱歉神也救不了你！\n      </p></div>'):t.showLevelThrottle?t._ssrNode('<div class="not-play-screen"><p>'+t._ssrEscape("\n        由于站内视频流量过大，站长资金难以维持，该视频需要你的等级至少\n        "+t._s(t.needMinLevel)+" 才能播放\n      ")+'</p> <a href="https://www.calibur.tv/post/2282" target="_blank">  为什么要限流？</a> <a href="https://www.calibur.tv/post/2279" target="_blank">  如何升级？</a></div>'):t._ssrNode('<div id="video-wrap"'+t._ssrClass(null,[t.isFull?"":"chimee-control-fixed"])+"></div>"):t._ssrNode('<div class="not-play-screen">',"</div>",[t._ssrNode("<p>这个资源消失了_〆(´Д｀ )</p>")],2),t._ssrNode(" "+(t.showRewardBg?'<div class="not-play-screen"><br> <br> <br> <p>\n        由于站内视频流量过大，站长资金难以维持，该视频需要投食之后才能播放\n      </p></div>':"\x3c!----\x3e"))]:t._e()],2)},[],!1,function(t){var e=r(486);e.__inject__&&e.__inject__(t)},null,"d58d1a26").exports,f=r(400),y=r(247),w=r(283),$=r(302),x=r(399),k={name:"VideoShow",validate:({params:t})=>/^\d+$/.test(t.id),components:{vVideo:v,vPart:f.a,CommentMain:y.a,SocialPanel:w.a,EditVideoForm:x.a},props:{id:{type:String,required:!0}},data(){return{showAll:!1,firstPlay:!0,info:null,upload_user:null,bangumi:null,list:[],ip_blocked:!1,must_reward:!1,need_min_level:0,season_id:0,share_data:{link:`http://calibur.tv/video/${this.id}`},showRewardDialog:!1,buying:!1,is_manager:!1,openEditVideo:!1}},computed:{isGuest(){return!this.$store.state.login},isMine(){return!!this.$store.state.login&&this.info.user_id===this.$store.state.user.id},videos(){let t=[];return this.list.videos.forEach(e=>{t=t.concat(e.data)}),t},nextPartVideo(){let t=0;const e=+this.id;return this.videos.forEach((video,r)=>{video.id===e&&r!==this.videos.length-1&&(t=this.videos[r+1].id)}),t?this.$alias.video(t):""},useOtherSiteSource(){return this.info.other_site},computeVideoSrc(){return this.info.src},user(){return this.$store.state.user},coinCount(){return this.isGuest?0:parseFloat(this.user.banlance.coin_count).toFixed(2)},lightCount(){return this.isGuest?0:parseFloat(this.user.banlance.light_count).toFixed(2)}},async asyncData({app:t,store:e,params:r,error:n}){const{id:o}=r;return Object($.c)(t,{id:o}).then(data=>{const{bangumi:t,info:r}=data;return e.commit("social/SET_STATE",{type:"video",id:o,data:{like:r.liked,reward:r.rewarded,mark:r.marked,like_users:r.like_users,mark_users:r.mark_users,reward_users:r.reward_users}}),e.commit("social/SET_STATE",{type:"bangumi",id:t.id,data:{follow:t.followed}}),data}).catch(t=>{n({statusCode:t.statusCode,message:t.message})})},head(){const{bangumi:t,info:e,list:r}=this,n=r.has_season,o=t.name,l=e.name;let c=e.part,d="",title="";return n&&r.videos.forEach(t=>{t.data.forEach(n=>{n.id===e.id&&(c=n.part-t.base,d=r.name)})}),{title:title=d?d===l?`${o}：${d}`:`${d}：第${c}话 ${l}`:`${o}：第${c}话 ${l}`}},methods:{handlePlaying(){this.firstPlay&&(this.firstPlay=!1,Object($.d)(this,{id:this.id}))},handleVideoReportClick(){this.$channel.$emit("open-feedback",{type:4,desc:`【PC】-《${this.bangumi.name}》视频有错误，视频 id：${this.id}：错误详情为：{?}`,placeholder:"请填写错误详情"})},handleRewardAction(){this.must_reward&&window.location.reload()},handleBuyVideoClick(){this.buyed?this.$toast.success("无需重复购买"):this.buying||this.$confirm("这会消耗你10个虚拟币，确认吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.buying=!0,Object($.a)(this,{season_id:this.season_id}).then(()=>{this.$toast.success("购买成功，正在刷新页面").then(()=>{window.location.reload()})}).catch(()=>{this.buying=!1})}).catch(()=>{})}}};var C=Object(_.a)(k,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"video-show"}},[r("v-header"),t._ssrNode(" "),t._ssrNode('<div id="video-header" class="container">',"</div>",[t._ssrNode("<nav>"+(t.bangumi&&t.info?'<h1 class="breadcrumb"><a'+t._ssrAttr("href",t.$alias.index)+' target="_blank">主站</a> <a'+t._ssrAttr("href",t.$alias.bangumi(t.bangumi.id))+' target="_blank">'+t._ssrEscape(t._s(t.bangumi.name))+"</a>"+t._ssrEscape("\n        第"+t._s(t.info.part)+"话 "+t._s(t.info.name)+"\n      ")+"</h1>":"\x3c!----\x3e")+"</nav> "),t.list.has_season&&t.showAll?t._l(t.list.videos,function(e,n){return t._ssrNode("<div>","</div>",[t._ssrNode('<h6 class="season-title">'+t._ssrEscape(t._s(e.name))+"</h6> "),r("v-part",{attrs:{list:e.data,alias:t.$alias.video,"is-first":0===n,"force-all":!0,"all-data":t.videos},scopedSlots:t._u([{key:"default",fn:function(n){var o=n.item;return[r("span",[t._v(t._s(o.part-e.base))]),t._v(t._s(o.name)+"\n          ")]}}],null,!0),model:{value:t.showAll,callback:function(e){t.showAll=e},expression:"showAll"}})],2)}):r("v-part",{attrs:{list:t.videos,"all-data":t.videos,alias:t.$alias.video},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item;return[r("span",[t._v(t._s(n.part))]),t._v(t._s(n.name)+"\n      ")]}}]),model:{value:t.showAll,callback:function(e){t.showAll=e},expression:"showAll"}})],2),t._ssrNode(" "),r("v-layout",[r("v-video",{attrs:{source:t.computeVideoSrc,"other-src":t.useOtherSiteSource,video:t.bangumi.name+" 第 "+t.info.part+" 话 "+t.info.name,poster:t.$resize(t.info.poster,{width:800}),next:t.nextPartVideo,"is-guest":t.isGuest,"is-baidu-cloud":t.info.is_baidu_cloud,"baidu-cloud-pwd":t.info.baidu_cloud_pwd,blocked:t.ip_blocked,"must-reward":t.must_reward&&!t.info.rewarded,"need-min-level":t.need_min_level},on:{playing:t.handlePlaying,reward:function(e){t.showRewardDialog=!0}}}),t._v(" "),r("div",{staticClass:"video-info"},[r("social-panel",{attrs:{id:t.info.id,"is-creator":!0,"is-mine":t.isMine,type:"video"},on:{"reward-callback":t.handleRewardAction}},[t.useOtherSiteSource?t._e():r("el-button",{attrs:{plain:t.buyed,type:"primary",round:""},on:{click:t.handleBuyVideoClick}},[t._v("\n          "+t._s(t.buyed?"已承包":"10个团子承包本季度")+"\n        ")])],1),t._v(" "),r("v-share",{attrs:{type:"panel"}}),t._v(" "),r("el-button",{staticClass:"video-report",attrs:{type:"warning",size:"medium",round:""},on:{click:t.handleVideoReportClick}},[t._v("资源报错")]),t._v(" "),t.is_manager?[r("el-button",{attrs:{size:"medium",round:""},on:{click:function(e){t.openEditVideo=!0}}},[t._v("编辑视频")]),t._v(" "),r("v-dialog",{attrs:{footer:!1,title:"编辑视频"},model:{value:t.openEditVideo,callback:function(e){t.openEditVideo=e},expression:"openEditVideo"}},[r("edit-video-form",{attrs:{"season-id":t.season_id,"bangumi-id":t.bangumi.id,"video-id":t.id,video:t.info}})],1)]:t._e()],2),t._v(" "),r("v-lazy",[r("comment-main",{attrs:{id:t.id,"master-id":t.info.user_id,lazy:!0,type:"video"}})],1),t._v(" "),r("template",{slot:"aside"},[t.upload_user?r("div",{staticClass:"uploader"},[r("h3",{staticClass:"sub-title"},[t._v("UP主")]),t._v(" "),r("div",[r("div",{staticClass:"avatar"},[r("v-img",{attrs:{src:t.upload_user.avatar,lazy:!1,avatar:!0,width:70,height:70}})],1),t._v(" "),r("div",{staticClass:"info"},[r("p",{staticClass:"nickname",domProps:{textContent:t._s(t.upload_user.nickname)}}),t._v(" "),r("p",{staticClass:"intro",domProps:{textContent:t._s(t.upload_user.signature)}})])])]):t._e(),t._v(" "),t.isGuest?t._e():[r("div",{staticClass:"wallet"},[r("h3",{staticClass:"sub-title"},[t._v("虚拟币")]),t._v(" "),r("div",[r("div",{staticClass:"item"},[r("strong",[t._v(t._s(t.coinCount))]),t._v(" "),r("div",[t._v("团子")])]),t._v(" "),r("div",{staticClass:"item"},[r("strong",[t._v(t._s(t.lightCount))]),t._v(" "),r("div",[t._v("光玉")])])]),t._v(" "),r("div",{staticClass:"intro"},[r("p",[t._v("团子类似于Q币，1团子=1Q币，可在站内流通")]),t._v(" "),r("p",[t._v("光玉就是可提现的团子，只能从别人的投食中获得")])])]),t._v(" "),r("div",{staticClass:"invite-code"},[r("h2",{staticClass:"sub-title"},[t._v("邀请码")]),t._v(" "),r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:t.share_data.link,expression:"share_data.link"}],on:{success:function(e){return t.$toast.success("复制成功~快去发送给好友吧")}}},[t._v("\n            点此复制链接分享本资源\n          ")]),t._v(" "),r("p",[t._v("使用你分享的链接注册，你们都能获得团子奖励")])])],t._v(" "),r("h3",{staticClass:"sub-title"},[t._v("番剧")]),t._v(" "),r("bangumi-panel",{attrs:{id:t.bangumi.id,name:t.bangumi.name,avatar:t.bangumi.avatar,summary:t.bangumi.summary}})],2),t._v(" "),r("v-dialog",{staticClass:"need-coin-modal",attrs:{header:!1,footer:!1,close:!1,width:"560px"},model:{value:t.showRewardDialog,callback:function(e){t.showRewardDialog=e},expression:"showRewardDialog"}},[t.isGuest?t._e():r("div",{staticClass:"content"},[r("h2",[t._v("非常抱歉，为了降低流量压力，需要投食才能看番")]),t._v(" "),r("p",[r("span",[t._v("点击视频下方")]),t._v(" "),r("el-button",{attrs:{type:"warning",size:"mini",round:""}},[t._v("投食")]),t._v(" "),r("span",[t._v("按钮即可继续观看")])],1),t._v(" "),r("p",[r("span",[t._v("投食会消耗你一枚")]),t._v(" "),r("a",{attrs:{href:"/app/notice/1",target:"_blank"}},[t._v("\n            「团子」\n          ")])]),t._v(" "),r("p",[t._v("如果你已经没有团子了，你可以：")]),t._v(" "),r("ul",[r("li",[t._v("每天签到可以获得一枚团子")]),t._v(" "),r("li",[t._v("每天在站内发言、活跃就会获得团子")]),t._v(" "),r("li",[t._v("邀请别人注册 calibur，你与注册者都会获得团子")]),t._v(" "),r("li",[t._v("calibur 目前还不支持氪金，请见谅")])]),t._v(" "),r("button",{directives:[{name:"clipboard",rawName:"v-clipboard",value:"http://calibur.tv/about/invite/"+t.user.id,expression:"`http://calibur.tv/about/invite/${user.id}`"}],staticClass:"invite-btn",on:{success:function(e){return t.$toast.success("复制成功~快去发送给好友吧")}}},[t._v("\n          点击生成你的专属邀请码，获得团子\n        ")])])])],2)],2)},[],!1,function(t){var e=r(487);e.__inject__&&e.__inject__(t)},null,"15691b20");e.default=C.exports}};
//# sourceMappingURL=_id.chunk.ded8a06d.js.map