exports.ids=[55],exports.modules={226:function(t,e){t.exports={"image-preview":"image-preview-2_",imagePreview:"image-preview-2_",container:"container-34",bar:"bar-1j","top-bar":"top-bar-1d",topBar:"top-bar-1d","foot-bar":"foot-bar-AF",footBar:"foot-bar-AF",wrap:"wrap-tx",item:"item-32",close:"close-27",download:"download-51","next-btn":"next-btn-3T",nextBtn:"next-btn-3T","prev-btn":"prev-btn-12",prevBtn:"prev-btn-12"}},234:function(t,e){},242:function(t,e,n){"use strict";n.r(e);var r=n(226),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},249:function(t,e,n){"use strict";var r={name:"ImagePreview",props:{images:{type:Array,default:()=>[]},query:{type:String,default:""},download:{type:Boolean,default:!0}},data(){return{show:!1,currentIndex:-1,maxWidth:0,maxHeight:0,displayImages:this.images.map(t=>Object.assign({finalWidth:0,finalHeight:0,loading:!0},t))}},computed:{total(){return this.images.length},currentImage(){return-1===this.currentIndex?null:this.displayImages[this.currentIndex]}},mounted(){this.getScreenSize(),window.addEventListener("resize",this.getScreenSize)},methods:{handleClose(){this.show=!1},handleClick(t){if(!this.total)return;const e=t.target||t.currentTarget,n="img"===e.tagName.toLowerCase();if(!this.query&&!n)return;if(this.query&&-1===e.className.indexOf(this.query))return;let r="";if(n)r=e.getAttribute("src").split("?")[0];else{const img=e.querySelector("img");if(!img)return;r=img.getAttribute("src").split("?")[0]}this.getClickImageIndex(r),this.computeDisplaySize(this.currentIndex),this.show=!0},getClickImageIndex(t){this.images.forEach((image,e)=>{image.url===t&&(this.currentIndex=e)})},getScreenSize(){this.maxWidth=window.innerWidth,this.maxHeight=window.innerHeight-88},switchImage(t){if(t&&this.currentIndex===this.total-1)return;if(!t&&0===this.currentIndex)return;const e=t?this.currentIndex+1:this.currentIndex-1;this.computeDisplaySize(e),this.currentIndex=e},getSiblingsIndex(t){let e,n;return 0===this.currentIndex?(e=this.total-1,n=1):this.currentIndex===this.total-1?(e=this.total-2,n=0):(e=this.currentIndex-1,n=this.currentIndex+1),[e,t,n]},computeDisplaySize(t){if(void 0===this.images[t])return;const image=this.images[t];if(image.finalWidth&&image.finalHeight)return;const e=image.width,n=image.height,r=this.maxWidth,o=this.maxHeight;let l,c;if(r>=e&&o>=n)l=e,c=n;else if(r<e&&o<n){const t=e/o,d=n/o;t>=d?(l=r,c=parseInt(n/t,10)):(l=parseInt(e/d,10),c=o)}else if(n<o){l=r,c=parseInt(n/(e/o),10)}else{l=parseInt(e/(n/o),10),c=o}this.displayImages[t].finalWidth=l||r,this.displayImages[t].finalHeight=c||o},handleSwitch(t,e){this.currentIndex=e}}},o=n(0);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{class:t.$style.imagePreview,on:{click:t.handleClick}},[t._ssrNode((t.show?"<div"+t._ssrClass(null,t.$style.container)+"><div"+t._ssrClass(null,[t.$style.bar,t.$style.topBar])+">"+(t.total?"<span"+t._ssrClass(null,t.$style.total)+">"+t._ssrEscape("\n        "+t._s(t.currentIndex+1)+"/"+t._s(t.total)+"\n      ")+"</span>":"\x3c!----\x3e")+" <span"+t._ssrClass(null,t.$style.close)+">\n        ×\n      </span></div> <div"+t._ssrClass(null,[t.$style.bar,t.$style.footBar])+">"+(t.currentImage&&t.download?"<a"+t._ssrAttr("href",t.currentImage.url)+' target="_blank"'+t._ssrClass(null,t.$style.download)+">\n        下载原图\n      </a>":"\x3c!----\x3e")+"</div> "+(t.currentImage?"<div"+t._ssrClass(null,t.$style.wrap)+"><div"+t._ssrClass(null,t.$style.item)+t._ssrStyle(null,{backgroundImage:"url("+t.$resize(t.currentImage.url,{webP:!t.download})+")",width:t.currentImage.finalWidth+"px",height:t.currentImage.finalHeight+"px"},null)+"></div> "+(t.total>1?"<button"+t._ssrClass(null,t.$style.prevBtn)+'><i class="el-icon-caret-left"></i></button> <button'+t._ssrClass(null,t.$style.nextBtn)+'><i class="el-icon-caret-right"></i></button>':"\x3c!----\x3e")+"</div>":"\x3c!----\x3e")+"</div>":"\x3c!----\x3e")+" "),t._t("default")],2)},[],!1,function(t){var e=n(242);e.__inject__&&e.__inject__(t),this.$style=e.locals||e},null,"9fce79ee");e.a=component.exports},250:function(t,e,n){"use strict";n.r(e);var r=n(234),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},260:function(t,e,n){"use strict";var r={name:"PostShowItem",components:{ImagePreview:n(249).a},props:{item:{type:Object,required:!0},bangumiId:{type:[Number,String],default:""},userZone:{type:String,default:""}}},o=n(0);var component=Object(o.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"post-flow-item"},[t._ssrNode('<div class="header clearfix">',"</div>",[t.userZone?n("el-tooltip",{attrs:{content:t.item.bangumi.name,effect:"dark",placement:"top"}},[n("a",{staticClass:"bangumi-avatar",attrs:{href:t.$alias.bangumi(t.item.bangumi.id),target:"_blank"}},[n("v-img",{attrs:{src:t.item.bangumi.avatar,poster:!0,width:24,height:24}})],1)]):n("user-card",{attrs:{id:t.item.user.id,zone:t.item.user.zone,"custom-class":"user-avatar"}},[n("v-img",{attrs:{src:t.item.user.avatar,avatar:!0,width:32,height:32}})],1),t._ssrNode(" "),t._ssrNode('<span class="time">',"</span>",[t._ssrNode(" 发表于: "),n("v-time",{attrs:{datetime:t.item.created_at}})],2),t._ssrNode(" "+(t.item.top_at&&t.bangumiId?'<div class="top_badge">置顶</div>':"\x3c!----\x3e")+" "+(t.item.is_nice?'<div class="nice_badge">精</div>':"\x3c!----\x3e")+" "+(t.item.is_creator?'<div class="creator_badge">原创</div>':"\x3c!----\x3e")+' <div class="title oneline"><a'+t._ssrAttr("href",t.$alias.post(t.item.id))+' target="_blank" class="blue-link">'+t._ssrEscape(t._s(t.item.title))+"</a></div>")],2),t._ssrNode(" "+(t.item.user?"<p"+t._ssrClass("content",{"min-height":!t.item.images.length})+"><a"+t._ssrAttr("href",t.$alias.user(t.item.user.zone))+' target="_blank" class="nickname">'+t._ssrEscape(t._s(t.item.user.nickname))+"</a>\n    :\n    <a"+t._ssrAttr("href",t.$alias.post(t.item.id))+' target="_blank" class="desc">'+t._ssrEscape("\n      "+t._s(t.item.desc)+"\n    ")+"</a></p>":"<p"+t._ssrClass("content",{"min-height":!t.item.images.length})+">"+t._ssrEscape(t._s(t.item.desc))+"</p>")+" "),t.item.images.length?t._ssrNode('<div class="images clearfix">',"</div>",[n("image-preview",{attrs:{images:t.item.images,download:!1,query:"image-box"}},t._l(t.item.images,function(image,t){return n("div",{key:t,staticClass:"image-box"},[n("v-img",{attrs:{src:image.url,blur:!0,width:"auto",height:"90"}})],1)}),0)],1):t._e(),t._ssrNode(' <span class="counter">'+t._ssrEscape(t._s(t.item.comment_count))+"</span> "),t._ssrNode('<div class="footer clearfix">',"</div>",[t._ssrNode('<div class="stats">',"</div>",[t._ssrNode((t.item.is_creator?'<span class="meta"><i class="iconfont icon-fantuan"></i> <span>'+t._ssrEscape(t._s(t.$utils.shortenNumber(t.item.reward_count)))+"</span></span>":'<span class="meta"><i class="iconfont icon-like"></i> <span>'+t._ssrEscape(t._s(t.$utils.shortenNumber(t.item.like_count)))+"</span></span>")+' <span class="meta"><i class="iconfont icon-mark"></i> <span>'+t._ssrEscape(t._s(t.$utils.shortenNumber(t.item.mark_count)))+'</span></span> <span class="meta"><i class="iconfont icon-talk"></i> <span>'+t._ssrEscape(t._s(t.$utils.shortenNumber(t.item.comment_count)))+"</span></span> "),n("v-share",{attrs:{url:t.$alias.post(t.item.id),title:t.item.title,desc:t.item.desc,"show-text":!1,type:"button"}})],2),t._ssrNode(' <div class="tags oneline">'+(t.bangumiId?"\x3c!----\x3e":(t.item.bangumi?"<a"+t._ssrAttr("href",t.$alias.bangumi(t.item.bangumi.id))+' target="_blank"><i class="iconfont icon-biaoqian"></i> <span>'+t._ssrEscape(t._s(t.item.bangumi.name))+"</span></a>":"\x3c!----\x3e")+" "+(t.item.idol?"<a"+t._ssrAttr("href",t.$alias.cartoonRole(t.item.idol.id))+' target="_blank"><i class="iconfont icon-biaoqian"></i> <span>'+t._ssrEscape(t._s(t.item.idol.name))+"</span></a>":"\x3c!----\x3e"))+" "+t._ssrList(t.item.tags,function(e){return'<span class="tag">'+t._ssrEscape(t._s(e.name))+"</span>"})+"</div>")],2)],2)},[],!1,function(t){var e=n(250);e.__inject__&&e.__inject__(t)},null,"b52bb90c");e.a=component.exports},377:function(t,e){},378:function(t,e){},469:function(t,e,n){"use strict";n.r(e);var r=n(377),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},470:function(t,e,n){"use strict";n.r(e);var r=n(378),o=n.n(r);for(var l in r)"default"!==l&&function(t){n.d(e,t,function(){return r[t]})}(l);e.default=o.a},486:function(t,e,n){"use strict";n.r(e);var r=n(260),o={name:"PostReplyItem",props:{item:{type:Object,required:!0}}},l=n(0);var c=Object(l.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"post-reply-item"},[t._ssrNode('<div class="header clearfix">',"</div>",[t._ssrNode('<span class="prefix">回复：</span> '),n("el-tooltip",{attrs:{content:t.item.bangumi.name,effect:"dark",placement:"top"}},[n("a",{staticClass:"avatar",attrs:{href:t.$alias.bangumi(t.item.bangumi.id),target:"_blank"}},[n("v-img",{attrs:{src:t.item.bangumi.avatar,poster:!0,width:24,height:24}})],1)]),t._ssrNode(" "),n("v-time",{staticClass:"time",model:{value:t.item.created_at,callback:function(e){t.$set(t.item,"created_at",e)},expression:"item.created_at"}}),t._ssrNode(" <a"+t._ssrAttr("href",t.$alias.post(t.item.post.id,{"comment-id":t.item.id}))+' target="_blank" class="title href-fade-blue oneline">'+t._ssrEscape(t._s(t.item.post.title))+"</a>")],2),t._ssrNode(" "),t._ssrNode('<div class="origin">',"</div>",[t._ssrNode('<div class="content">'+t._s(t.item.post.content)+"</div> "),t.item.post.images.length?t._ssrNode('<div class="images clearfix">',"</div>",t._l(t.item.post.images,function(image,e){return t._ssrNode('<div class="image-box">',"</div>",[n("v-img",{attrs:{src:image.url,blur:!0,width:"auto",height:"90"}})],1)}),0):t._e()],2),t._ssrNode(" "),t._ssrNode('<div class="reply">',"</div>",[t._ssrNode('<div class="content">'+t._s(t.item.content)+"</div> "),t.item.images.length?t._ssrNode('<div class="images clearfix">',"</div>",t._l(t.item.images,function(image,e){return t._ssrNode('<div class="image-box">',"</div>",[n("v-img",{attrs:{src:image.url,blur:!0,width:"auto",height:"90"}})],1)}),0):t._e()],2)],2)},[],!1,function(t){var e=n(469);e.__inject__&&e.__inject__(t)},null,"7f0ff954").exports,d={name:"UserPost",components:{PostFlowItem:r.a,PostReplyItem:c},data:()=>({tab:"回帖"}),computed:{user(){return this.$store.state.users.show}},async asyncData({store:t,params:e}){await t.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:e.zone})},methods:{handleTabSwitch(label){"回帖"===label?this.$store.dispatch("flow/initData",{func:"getUserPostReply",sort:"news",type:"page",id:this.user.zone}):this.$store.dispatch("flow/initData",{func:"getUserPost",sort:"news",type:"page",id:this.user.zone})}}};var m=Object(l.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user-post"}},[n("el-radio-group",{attrs:{size:"mini"},on:{change:t.handleTabSwitch},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[n("el-radio-button",{attrs:{label:"回帖"}}),t._v(" "),n("el-radio-button",{attrs:{label:"主题帖"}})],1),t._ssrNode(" "),t._ssrNode('<div class="posts-of-reply"'+t._ssrStyle(null,null,{display:"回帖"===t.tab?"":"none"})+">","</div>",[n("flow-list",{attrs:{id:t.user.zone,func:"getUserPostReply",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,function(t){return n("post-reply-item",{key:t.id,attrs:{item:t}})}),1)}}])},[t._v(" "),n("no-content",{attrs:{slot:"nothing"},slot:"nothing"})],1)],1),t._ssrNode(" "),t._ssrNode('<div class="posts-of-mine"'+t._ssrStyle(null,null,{display:"主题帖"===t.tab?"":"none"})+">","</div>",[n("flow-list",{attrs:{id:t.user.zone,func:"getUserPost",type:"page",sort:"news"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.flow;return n("ul",{},t._l(r,function(e){return n("post-flow-item",{key:e.id,attrs:{"user-zone":t.user.zone,item:e}})}),1)}}])},[t._v(" "),n("no-content",{attrs:{slot:"nothing"},slot:"nothing"})],1)],1)],2)},[],!1,function(t){var e=n(470);e.__inject__&&e.__inject__(t)},null,"678c3ee2");e.default=m.exports}};
//# sourceMappingURL=post.chunk.4799c904.js.map