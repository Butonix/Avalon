exports.ids=[21],exports.modules={305:function(t,e){},402:function(t,e,n){"use strict";n.r(e);var o=n(305),r=n.n(o);for(var l in o)"default"!==l&&function(t){n.d(e,t,function(){return o[t]})}(l);e.default=r.a},515:function(t,e,n){"use strict";n.r(e);var o=n(61),r={name:"BangumiTags",data:()=>({tags:[],recommendedBangumis:[],loading:!1,bangumis:{data:[],noMore:!1,page:0,take:10,total:0}}),computed:{showEmpty(){return this.tags.some(t=>t.selected)&&!this.loading||this.tags.every(t=>!t.selected)}},asyncData:async({app:t})=>({tags:(await Object(o.e)(t)).map(t=>Object.assign(t,{selected:!1}))}),head:{title:"动画标签"},methods:{selectTag(t){this.loading||(t.selected=!t.selected,this.bangumis={data:[],noMore:!1,page:0,take:10,total:0},this.loadBangumis())},async loadBangumis(){if(!this.loading&&!this.bangumis.noMore){this.loading=!0;try{const data=await Object(o.i)(this,{page:this.bangumis.page,take:this.bangumis.take,tags:this.tags.filter(t=>t.selected).map(t=>t.id).join("-")});this.bangumis.data=this.bangumis.data.concat(data.list),this.bangumis.noMore=data.noMore,this.bangumis.total=data.total,this.bangumis.page++}catch(t){this.$toast.error(t.message)}finally{this.loading=!1}}}}},l=n(0);var component=Object(l.a)(r,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main",attrs:{id:"bangumi-tags"}},[t._ssrNode('<div class="tags"><h2 class="sub-title">标签列表</h2> <ul>'+t._ssrList(t.tags,function(e){return'<li><a href="javascript:;"'+t._ssrClass("tag-btn",{selected:e.selected})+">"+t._ssrEscape(t._s(e.name))+"</a></li>"})+"</ul></div> "),t.bangumis.total?t._ssrNode('<div class="bangumis">',"</div>",[t._ssrNode('<h2 class="sub-title">番剧列表</h2> '),t._ssrNode("<ul>","</ul>",t._l(t.bangumis.data,function(e){return t._ssrNode('<li class="bangumi">',"</li>",[t._ssrNode("<a"+t._ssrAttr("href",t.$alias.bangumi(e.id))+' target="_blank" class="avatar">',"</a>",[n("v-img",{attrs:{src:e.avatar,poster:!0,width:90,height:90}})],1),t._ssrNode(' <div class="content"><a'+t._ssrAttr("href",t.$alias.bangumi(e.id))+' target="_blank" class="title">'+t._ssrEscape(t._s(e.name))+'</a> <p class="desc">'+t._ssrEscape(t._s(e.summary))+"</p></div>")],2)}),0),t._ssrNode(" "),n("load-more-btn",{attrs:{"no-more":t.bangumis.noMore,loading:t.loading,auto:!0},on:{fetch:t.loadBangumis}})],2):t.showEmpty?n("no-content"):t._e()],2)},[],!1,function(t){var e=n(402);e.__inject__&&e.__inject__(t)},null,"1ede9e3c");e.default=component.exports}};
//# sourceMappingURL=tags.chunk.2227e305.js.map